!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(t,e,n){t.$$.on_destroy.push(l(e,n))}function a(t,e,n,r){if(t){const o=c(t,e,n,r);return t[0](o)}}function c(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t,e,n,r,o,i,l){const s=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,i);if(s){const o=c(e,n,r,l);t.p(o,s)}}function d(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function _(){return g(" ")}function y(){return g("")}function v(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}function x(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function C(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let k;function E(t){k=t}function T(){if(!k)throw new Error("Function called outside component initialization");return k}function S(t,e){T().$$.context.set(t,e)}function I(t){return T().$$.context.get(t)}const O=[],R=[],A=[],M=[],N=Promise.resolve();let B=!1;function D(t){A.push(t)}let q=!1;const L=new Set;function j(){if(!q){q=!0;do{for(let t=0;t<O.length;t+=1){const e=O[t];E(e),P(e.$$)}for(E(null),O.length=0;R.length;)R.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];L.has(e)||(L.add(e),e())}A.length=0}while(O.length);for(;M.length;)M.pop()();B=!1,q=!1,L.clear()}}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const F=new Set;let U;function H(){U={r:0,c:[],p:U}}function G(){U.r||r(U.c),U=U.p}function W(t,e){t&&t.i&&(F.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(F.has(t))return;F.add(t),U.c.push((()=>{F.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const Y="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function V(t,e){z(t,1,1,(()=>{e.delete(t.key)}))}function J(t){t&&t.c()}function K(t,n,i,l){const{fragment:s,on_mount:a,on_destroy:c,after_update:u}=t.$$;s&&s.m(n,i),l||D((()=>{const n=a.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(D)}function X(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(O.push(t),B||(B=!0,N.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(e,o,i,l,s,a,c=[-1]){const u=k;E(e);const d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let f=!1;if(d.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),f&&Z(e,t)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!l&&l(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();o.intro&&W(e.$$.fragment),K(e,o.target,o.anchor,o.customElement),j()}E(u)}class tt{$destroy(){X(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et=[];function nt(e,n=t){let r;const o=[];function l(t){if(i(e,t)&&(e=t,r)){const t=!et.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),et.push(n,e)}if(t){for(let t=0;t<et.length;t+=2)et[t][0](et[t+1]);et.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(i,s=t){const a=[i,s];return o.push(a),1===o.length&&(r=n(l)||t),i(e),()=>{const t=o.indexOf(a);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}const rt=new Map([["AMMO","item"],["GUN","item"],["ARMOR","item"],["PET_ARMOR","item"],["TOOL","item"],["TOOLMOD","item"],["TOOL_ARMOR","item"],["BOOK","item"],["COMESTIBLE","item"],["ENGINE","item"],["WHEEL","item"],["GUNMOD","item"],["MAGAZINE","item"],["BATTERY","item"],["GENERIC","item"],["BIONIC_ITEM","item"],["MONSTER","monster"],["city_building","overmap_special"]]),ot=t=>{var e;return null!==(e=rt.get(t))&&void 0!==e?e:t},it=t=>"string"==typeof t?t:"str_sp"in t?t.str_sp:t.str,lt=t=>"string"==typeof t?t+"s":"str_sp"in t?t.str_sp:"str_pl"in t?t.str_pl:t.str+"s",st=t=>{var e,n;return it(null!==(n=null!==(e=null==t?void 0:t.name)&&void 0!==e?e:null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.abstract)},at=t=>{var e,n;return lt(null!==(n=null!==(e=null==t?void 0:t.name)&&void 0!==e?e:null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.abstract)};function ct(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}function ut(t){return void 0===t?0:"number"==typeof t?250*t:t.endsWith("ml")?parseInt(t):t.endsWith("L")?1e3*parseInt(t):void 0}function dt(t){return void 0===t?0:"number"==typeof t?t:t.endsWith("mg")?parseInt(t)/1e3:t.endsWith("kg")?1e3*parseInt(t):t.endsWith("g")?parseInt(t):void 0}function ft(t){return`${(ut(t)/1e3).toFixed(2)} L`}function pt(t){return`${(dt(t)/1e3).toFixed(2)} kg`}class mt{constructor(t,e,n){this._byType=new Map,this._byTypeById=new Map,this._abstractsByType=new Map,this._craftingPseudoItems=new Map,this._migrations=new Map,this._flattenCache=new Map,this._nestedMapgensById=new Map,this._cachedDeathDrops=new Map,this._cachedMapgenSpawnItems=new Map,this._flattenItemGroupCache=new WeakMap,this._flatRequirementCache=new WeakMap,this._flatRequirementCacheExpandSubs=new WeakMap,this._flatRequirementCacheOnlyRecoverable=new WeakMap,this.release=n,this.build_number=e,this._raw=t;for(const e of t){if(!Object.hasOwnProperty.call(e,"type"))continue;if("MIGRATION"===e.type){for(const t of"string"==typeof e.id?[e.id]:e.id){const{replace:n}=e;this._migrations.set(t,n)}continue}const t=ot(e.type);if(this._byType.has(t)||this._byType.set(t,[]),this._byType.get(t).push(e),Object.hasOwnProperty.call(e,"id"))if(this._byTypeById.has(t)||this._byTypeById.set(t,new Map),"string"==typeof e.id)this._byTypeById.get(t).set(e.id,e);else if(Array.isArray(e.id))for(const n of e.id)this._byTypeById.get(t).set(n,e);if(("recipe"===t||"uncraft"===t)&&Object.hasOwnProperty.call(e,"result")){this._byTypeById.has(t)||this._byTypeById.set(t,new Map);const n=e.result+(e.id_suffix?"_"+e.id_suffix:"");this._byTypeById.get(t).set(n,e)}if("monstergroup"===t&&Object.hasOwnProperty.call(e,"name")){this._byTypeById.has(t)||this._byTypeById.set(t,new Map);const n=e.name;this._byTypeById.get(t).set(n,e)}Object.hasOwnProperty.call(e,"abstract")&&(this._abstractsByType.has(t)||this._abstractsByType.set(t,new Map),this._abstractsByType.get(t).set(e.abstract,e)),Object.hasOwnProperty.call(e,"crafting_pseudo_item")&&this._craftingPseudoItems.set(e.crafting_pseudo_item,e.id),Object.hasOwnProperty.call(e,"nested_mapgen_id")&&(this._nestedMapgensById.has(e.nested_mapgen_id)||this._nestedMapgensById.set(e.nested_mapgen_id,[]),this._nestedMapgensById.get(e.nested_mapgen_id).push(e))}}byId(t,e){var n;if("string"!=typeof e)throw new Error("Requested non-string id");if("item"===t&&this._migrations.has(e))return this.byId(t,this._migrations.get(e));const r=null===(n=this._byTypeById.get(t))||void 0===n?void 0:n.get(e);return r?this._flatten(r):void 0}byType(t){var e,n;return null!==(n=null===(e=this._byType.get(t))||void 0===e?void 0:e.map((t=>this._flatten(t))))&&void 0!==n?n:[]}abstractById(t,e){var n;if("string"!=typeof e)throw new Error("Requested non-string id");const r=null===(n=this._abstractsByType.get(t))||void 0===n?void 0:n.get(e);if(r)return this._flatten(r)}replacementTools(t){var e;if(!this._toolReplacements){this._toolReplacements=new Map;for(const t of this.byType("item"))"TOOL"===t.type&&Object.hasOwnProperty.call(t,"sub")&&(this._toolReplacements.has(t.sub)||this._toolReplacements.set(t.sub,[]),this._toolReplacements.get(t.sub).push(t.id))}return null!==(e=this._toolReplacements.get(t))&&void 0!==e?e:[]}craftingPseudoItem(t){return this._craftingPseudoItems.get(t)}nestedMapgensById(t){return this._nestedMapgensById.get(t)}all(){return this._raw}_flatten(t){var e,n,r,o,i,l,s,a,c,u,d,f,p,m,h,g,_,y,v,$,b,w,x,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L;const j=t;if(this._flattenCache.has(j))return this._flattenCache.get(j);const P="copy-from"in j?null!==(n=null===(e=this._byTypeById.get(ot(j.type)))||void 0===e?void 0:e.get(j["copy-from"]))&&void 0!==n?n:null===(r=this._abstractsByType.get(ot(j.type)))||void 0===r?void 0:r.get(j["copy-from"]):null;if("copy-from"in j&&!P&&console.error(`Missing parent in ${null!==(l=null!==(i=null!==(o=j.id)&&void 0!==o?o:j.abstract)&&void 0!==i?i:j.result)&&void 0!==l?l:JSON.stringify(j)}`),P===j)return console.warn("Object copied from itself:",j),this._flattenCache.set(j,j),j;if(!P)return this._flattenCache.set(j,j),j;const{abstract:F,...U}=this._flatten(P),H={...U,...j};for(const t of Object.keys(null!==(s=H.relative)&&void 0!==s?s:{}))if("number"==typeof H.relative[t])if("melee_damage"===t){const e=yt(JSON.parse(JSON.stringify(H.melee_damage)));for(const n of e)n.amount=(null!==(a=n.amount)&&void 0!==a?a:0)+H.relative[t];H.melee_damage=e}else H[t]=(null!==(c=H[t])&&void 0!==c?c:0)+H.relative[t];else if("damage"===t&&H[t]){H.damage=JSON.parse(JSON.stringify(H.damage));const t=yt(H.relative.damage);for(const e of t){const t=Array.isArray(H.damage)?H.damage.find((t=>t.damage_type===e.damage_type)):H.damage.damage_type===e.damage_type?H.damage:null;t&&(t.amount=(null!==(u=t.amount)&&void 0!==u?u:0)+(null!==(d=e.amount)&&void 0!==d?d:0),t.armor_penetration=(null!==(f=t.armor_penetration)&&void 0!==f?f:0)+(null!==(p=e.armor_penetration)&&void 0!==p?p:0),t.armor_multiplier=(null!==(m=t.armor_multiplier)&&void 0!==m?m:0)+(null!==(h=e.armor_multiplier)&&void 0!==h?h:0),t.damage_multiplier=(null!==(g=t.damage_multiplier)&&void 0!==g?g:0)+(null!==(_=e.damage_multiplier)&&void 0!==_?_:0),t.constant_armor_multiplier=(null!==(y=t.constant_armor_multiplier)&&void 0!==y?y:0)+(null!==(v=e.constant_armor_multiplier)&&void 0!==v?v:0),t.constant_damage_multiplier=(null!==($=t.constant_damage_multiplier)&&void 0!==$?$:0)+(null!==(b=e.constant_damage_multiplier)&&void 0!==b?b:0))}}delete H.relative;for(const t of Object.keys(null!==(w=H.proportional)&&void 0!==w?w:{}))if("number"==typeof H.proportional[t])if("attack_cost"!==t||t in H||(H[t]=100),"string"==typeof H[t]){const e=/^\s*(\d+)\s*(.+)$/.exec(H[t]);if(e){const[,n,r]=e;H[t]=`${Number(n)*H.proportional[t]} ${r}`}}else H[t]*=H.proportional[t],H[t]=0|H[t];else if("damage"===t&&H[t]){H.damage=JSON.parse(JSON.stringify(H.damage));const t=yt(H.proportional.damage);for(const e of t){const t=Array.isArray(H.damage)?H.damage.find((t=>t.damage_type===e.damage_type)):H.damage.damage_type===e.damage_type?H.damage:null;t&&(t.amount=(null!==(x=t.amount)&&void 0!==x?x:0)*(null!==(C=e.amount)&&void 0!==C?C:1),t.armor_penetration=(null!==(k=t.armor_penetration)&&void 0!==k?k:0)*(null!==(E=e.armor_penetration)&&void 0!==E?E:1),t.armor_multiplier=(null!==(T=t.armor_multiplier)&&void 0!==T?T:0)*(null!==(S=e.armor_multiplier)&&void 0!==S?S:1),t.damage_multiplier=(null!==(I=t.damage_multiplier)&&void 0!==I?I:0)*(null!==(O=e.damage_multiplier)&&void 0!==O?O:1),t.constant_armor_multiplier=(null!==(R=t.constant_armor_multiplier)&&void 0!==R?R:0)*(null!==(A=e.constant_armor_multiplier)&&void 0!==A?A:1),t.constant_damage_multiplier=(null!==(M=t.constant_damage_multiplier)&&void 0!==M?M:0)*(null!==(N=e.constant_damage_multiplier)&&void 0!==N?N:1))}}delete H.proportional;for(const t of Object.keys(null!==(B=H.extend)&&void 0!==B?B:{}))Array.isArray(H.extend[t])&&(H[t]=(null!==(D=H[t])&&void 0!==D?D:[]).concat(H.extend[t]));delete H.extend;for(const t of Object.keys(null!==(q=H.delete)&&void 0!==q?q:{}))if(Array.isArray(H.delete[t])){const e=(t,n)=>t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every(((t,r)=>e(t,n[r])));H[t]=(null!==(L=H[t])&&void 0!==L?L:[]).filter((n=>!H.delete[t].some((t=>e(t,n)))))}return delete H.delete,this._flattenCache.set(j,H),H}flatDeathDrops(t){if(this._cachedDeathDrops.has(t))return this._cachedDeathDrops.get(t);const e=this.byId("monster",t),n=e.death_drops?this.flattenItemGroup(this.normalizeItemGroup(e.death_drops,"distribution")):[];return n.sort(((t,e)=>e.prob-t.prob)),this._cachedDeathDrops.set(t,n),n}uncraftRecipe(t){for(const e of this.byType("uncraft"))if(e.result===t)return e;for(const e of this.byType("recipe"))if(e.result===t&&e.reversible)return e}mapgenSpawnItems(t){var e,n,r,o,i,l,s;if(this._cachedMapgenSpawnItems.has(t))return this._cachedMapgenSpawnItems.get(t);const a=new Map,c=(t,e)=>{a.has(t)||a.set(t,new Set),a.get(t).add(e)},u=(t,e)=>{const n="string"==typeof e?this.byId("item_group",e):Array.isArray(e)?{subtype:"collection",entries:e}:e;if(n)for(const{id:e}of this.flattenItemGroup(n))c(t,e);else if("string"==typeof e){this.byId("item",e)&&c(t,e)}},d=t=>{var e,n,r,o,i;for(const[n,r]of Object.entries(null!==(e=t.item)&&void 0!==e?e:{})){const t=Array.isArray(r)?r:[r];for(const e of t)c(n,e.item)}for(const[e,r]of Object.entries(null!==(n=t.items)&&void 0!==n?n:{})){const t=Array.isArray(r)?r:[r];for(const n of t)u(e,n.item)}for(const[e,n]of Object.entries(null!==(r=t.sealed_item)&&void 0!==r?r:{})){const t=Array.isArray(n)?n:[n];for(const n of t)(null===(o=n.item)||void 0===o?void 0:o.item)&&c(e,n.item.item),(null===(i=n.items)||void 0===i?void 0:i.item)&&u(e,n.items.item)}};d(t.object);for(const n of null!==(e=t.object.palettes)&&void 0!==e?e:[])"string"==typeof n&&d(this.byId("palette",n));const f=new Set,p=new Set;for(const e of null!==(n=t.object.rows)&&void 0!==n?n:[])for(const t of e)p.add(t);for(const t of p){const e=null!==(r=a.get(t))&&void 0!==r?r:new Set;for(const t of e)f.add(t)}for(const e of null!==(o=t.object.place_item)&&void 0!==o?o:[])f.add(e.item);for(const e of null!==(i=t.object.place_items)&&void 0!==i?i:[]){const t="string"==typeof e.item?this.byId("item_group",e.item):Array.isArray(e.item)?{subtype:"collection",entries:e.item}:e.item;if(t)for(const{id:e}of this.flattenItemGroup(t))f.add(e);else if("string"==typeof e){this.byId("item",e)&&f.add(e)}}for(const e of null!==(l=t.object.place_loot)&&void 0!==l?l:[])if(e.item&&f.add(e.item),e.group)for(const{id:t}of this.flattenItemGroup(this.byId("item_group",e.group)))f.add(t);for(const e of null!==(s=t.object.add)&&void 0!==s?s:[])f.add(e.item);const m=[...f];return this._cachedMapgenSpawnItems.set(t,m),m}flattenItemGroup(t){var e,n,r,o,i;if(this._flattenItemGroupCache.has(t))return this._flattenItemGroupCache.get(t);const l=new Map;function s({id:t,prob:e,count:n}){var r;const{prob:o,count:i}=null!==(r=l.get(t))&&void 0!==r?r:{prob:0,count:[0,0]},s=1-(1-o)*(1-e),a=[n[0]+i[0],n[1]+i[1]];l.set(t,{prob:s,count:a})}function a(...t){t.forEach(s)}t["container-item"]&&a({id:t["container-item"],prob:1,count:[1,1]});const c=[];if("old"!==t.subtype&&t.subtype){for(const n of null!==(e=t.entries)&&void 0!==e?e:[])Array.isArray(n)?c.push({item:n[0],prob:n[1]}):c.push(n);for(const e of null!==(n=t.items)&&void 0!==n?n:[])Array.isArray(e)?c.push({item:e[0],prob:e[1]}):"string"==typeof e?c.push({item:e,prob:100}):c.push(e);for(const e of null!==(r=t.groups)&&void 0!==r?r:[])Array.isArray(e)?c.push({group:e[0],prob:e[1]}):"string"==typeof e?c.push({group:e,prob:100}):c.push(e)}else for(const e of t.items)Array.isArray(e)?c.push({item:e[0],prob:e[1]}):c.push(e);function u(t,e,n){return{id:t.id,prob:t.prob*e,count:[t.count[0]*n[0],t.count[1]*n[1]]}}function d(t){return t.count?"number"==typeof t.count?[t.count,t.count]:t.count:t.charges?"number"==typeof t.charges?[t.charges,t.charges]:t.charges:[1,1]}if("collection"===t.subtype)for(const t of c){const{prob:e=100}=t,n=Math.min(e,100)/100,r=d(t);if(t["container-item"]&&a({id:t["container-item"],prob:n,count:[1,1]}),"item"in t){a({id:t.item,prob:n,count:r});const e=this.byId("item",t.item);e&&e.container&&a({id:e.container,prob:n,count:r})}else if("group"in t)a(...this.flattenItemGroup(this.byId("item_group",t.group)).map((t=>u(t,n,r))));else if("collection"in t)a(...this.flattenItemGroup({subtype:"collection",entries:t.collection}).map((t=>u(t,n,r))));else{if(!("distribution"in t))throw new Error(`unknown item group entry: ${JSON.stringify(t)}`);a(...this.flattenItemGroup({subtype:"distribution",entries:t.distribution}).map((t=>u(t,n,r))))}}else{let t=0;for(const e of c)t+=null!==(o=e.prob)&&void 0!==o?o:100;for(const e of c){const n=(null!==(i=e.prob)&&void 0!==i?i:100)/t,r=d(e);if(e["container-item"]&&a({id:e["container-item"],prob:n,count:[1,1]}),"item"in e)a({id:e.item,prob:n,count:r});else if("group"in e)a(...this.flattenItemGroup(this.byId("item_group",e.group)).map((t=>u(t,n,r))));else if("collection"in e)a(...this.flattenItemGroup({subtype:"collection",entries:e.collection}).map((t=>u(t,n,r))));else{if(!("distribution"in e))throw new Error(`unknown item group entry: ${JSON.stringify(e)}`);a(...this.flattenItemGroup({subtype:"distribution",entries:e.distribution}).map((t=>u(t,n,r))))}}}const f=[...l.entries()].map((([t,e])=>({id:t,...e})));return this._flattenItemGroupCache.set(t,f),f}_flatRequirementCacheForOpts(t){if((null==t?void 0:t.expandSubstitutes)&&(null==t?void 0:t.onlyRecoverable))throw new Error("didn't expect to see expandSubstitutes && onlyRecoverable");return(null==t?void 0:t.expandSubstitutes)?this._flatRequirementCacheExpandSubs:(null==t?void 0:t.onlyRecoverable)?this._flatRequirementCacheOnlyRecoverable:this._flatRequirementCache}flattenRequirement(t,e,n){const r=this._flatRequirementCacheForOpts(n);if(r.has(t))return r.get(t);const{expandSubstitutes:o=!1,onlyRecoverable:i=!1}=null!=n?n:{},l=o?t=>t.flatMap((t=>function(t,e){const n=t.replacementTools(e.id);return[e,...n.map((t=>({id:t,count:e.count})))]}(this,t))):t=>t,s=gt(t).map((t=>l(ht(this,t,(t=>gt(e(t))),i)))).map((t=>i?t.filter((t=>{var e;return!(null!==(e=this.byId("item",t.id).flags)&&void 0!==e?e:[]).includes("UNRECOVERABLE")})):t)).filter((t=>t.length));return r.set(t,s),s}normalizeRequirements(t){const e="string"==typeof t.using?[[t.using,1]]:t.using,n=(null!=e?e:[]).map((([t,e])=>[this.byId("requirement",t),e])).concat([[t,1]]).filter((t=>t[0]));return{tools:n.flatMap((([t,e])=>{var n;return this.flattenRequirement(null!==(n=t.tools)&&void 0!==n?n:[],(t=>t.tools),{expandSubstitutes:!0}).map((t=>t.map((t=>({...t,count:t.count*e})))))})),qualities:n.flatMap((([t,e])=>{var n;return(null!==(n=t.qualities)&&void 0!==n?n:[]).map((t=>Array.isArray(t)?t:[t]))})),components:n.flatMap((([t,e])=>{var n;return this.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))}))}}getItemComponents(){if(this._itemComponentCache)return this._itemComponentCache;const t=new Map,e=new Map;return this.byType("recipe").forEach((n=>{if(!n.result||!this.byId("item",n.result))return!1;const r="string"==typeof n.using?[[n.using,1]]:n.using,o=(null!=r?r:[]).map((([t,e])=>[this.byId("requirement",t),e])).concat([[n,1]]),i=o.flatMap((([t])=>{var e;return this.flattenRequirement(null!==(e=t.tools)&&void 0!==e?e:[],(t=>t.tools))}));for(const e of i)for(const r of e)t.has(r.id)||t.set(r.id,new Set),t.get(r.id).add(n.result);const l=o.flatMap((([t,e])=>{var n;return this.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))}));for(const t of l)for(const r of t)e.has(r.id)||e.set(r.id,new Set),e.get(r.id).add(n.result)})),this._itemComponentCache={byTool:t,byComponent:e},this._itemComponentCache}normalizeItemGroup(t,e){return t?"string"==typeof t?this.byId("item_group",t):Array.isArray(t)?{subtype:e,entries:t}:{subtype:e,...t}:{subtype:e,entries:[]}}}function ht(t,e,n,r=!1){var o;const i=[];for(const l of e)if(Array.isArray(l)){const[e,s,...a]=l,c=a.includes("LIST");if(a.includes("NO_RECOVER")&&r)continue;if(c){const l=t.byId("requirement",e);"requirement"!==l.type&&console.error(`Expected a requirement, got ${l.type} (id=${l.id})`);const a=(null!==(o=n(l))&&void 0!==o?o:[])[0];i.push(...ht(t,a,n,r).map((t=>({...t,count:t.count*s}))))}else i.push({id:e,count:s})}else{if("string"!=typeof l)throw new Error("unexpected choice type");i.push({id:l,count:1})}return i}function gt(t){return t.map((t=>Array.isArray(t)?t:[t]))}const _t=t=>"AMMO"===t.type||"COMESTIBLE"===t.type||t.stackable;function yt(t){return Array.isArray(t)?t:"values"in t?t.values:[t]}const vt=["cover_left","cover_right","hatch_wheel_left","hatch_wheel_right","wheel_left","wheel_right","cross_unconnected","cross","horizontal_front_edge","horizontal_front","horizontal_rear_edge","horizontal_rear","horizontal_2_front","horizontal_2_rear","ne_edge","nw_edge","se_edge","sw_edge","vertical_right","vertical_left","vertical_2_right","vertical_2_left","vertical_T_right","vertical_T_left","front_right","front_left","rear_right","rear_left","cover","vertical","horizontal","vertical_2","horizontal_2","ne","nw","se","sw","front","rear","left","right"],$t=(t,e)=>{if(t.byId("vehicle_part",e))return[e,""];for(const t of vt)if(e.endsWith("_"+t))return[e.slice(0,e.length-t.length-1),t];return[e,""]};function bt(t){var e;return{subtype:"collection",entries:(null!==(e=t.items)&&void 0!==e?e:[]).map((t=>t.items?{collection:("string"==typeof t.items?[t.items]:t.items).map((t=>({item:t}))),prob:t.chance}:t.item_groups?{distribution:("string"==typeof t.item_groups?[t.item_groups]:t.item_groups).map((t=>({group:t}))),prob:t.chance}:{distribution:[]}))}}let wt=!1;const{subscribe:xt,set:Ct}=nt(null),kt={subscribe:xt,setVersion(t){if(wt)throw new Error("can only set version once");wt=!0,(async t=>{const e=await fetch(`https://raw.githubusercontent.com/nornagon/cdda-data/main/data/${t}/all.json`,{mode:"cors"});if(!e.ok)throw new Error(`Error ${e.status} (${e.statusText}) fetching data`);const n=await e.json();return new mt(n.data,n.build_number,n.release)})(t).then(Ct)}};function Et(e){let n,r,o,i=(e[4]?(e[2]?at:st)(e[4]):e[1])+"";return{c(){n=h("a"),r=g(i),$(n,"href",o="#/"+e[0]+"/"+e[1])},m(t,e){f(t,n,e),d(n,r)},p(t,e){22&e&&i!==(i=(t[4]?(t[2]?at:st)(t[4]):t[1])+"")&&b(r,i),3&e&&o!==(o="#/"+t[0]+"/"+t[1])&&$(n,"href",o)},i:t,o:t,d(t){t&&p(n)}}}function Tt(t){let e,n,r,o,i=!_t(t[4]),l=_t(t[4]),s=i&&St(t);r=new Nt({props:{type:t[0],id:t[1],plural:At(t[3])&&!_t(t[4])}});let a=l&&It(t);return{c(){e=h("span"),s&&s.c(),n=_(),J(r.$$.fragment),a&&a.c(),x(e,"white-space","nowrap")},m(t,i){f(t,e,i),s&&s.m(e,null),d(e,n),K(r,e,null),a&&a.m(e,null),o=!0},p(t,o){16&o&&(i=!_t(t[4])),i?s?s.p(t,o):(s=St(t),s.c(),s.m(e,n)):s&&(s.d(1),s=null);const c={};1&o&&(c.type=t[0]),2&o&&(c.id=t[1]),24&o&&(c.plural=At(t[3])&&!_t(t[4])),r.$set(c),16&o&&(l=_t(t[4])),l?a?a.p(t,o):(a=It(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),s&&s.d(),X(r),a&&a.d()}}}function St(t){let e,n=Rt(t[3])+"";return{c(){e=g(n)},m(t,n){f(t,e,n)},p(t,r){8&r&&n!==(n=Rt(t[3])+"")&&b(e,n)},d(t){t&&p(e)}}}function It(t){let e,n,r,o,i=Rt(t[3])+"";return{c(){e=g(" "),n=g("("),r=g(i),o=g(")")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,e){8&e&&i!==(i=Rt(t[3])+"")&&b(r,i)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function Ot(t){let e,n,r,o;const i=[Tt,Et],l=[];function s(t,e){return null!=t[3]?0:1}return e=s(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,[o]){let a=e;e=s(t),e===a?l[e].p(t,o):(H(),z(l[a],1,1,(()=>{l[a]=null})),G(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function Rt(t){return"number"==typeof t?t.toString():t[0]===t[1]?t[0].toString():`${t[0]}â€“${t[1]}`}function At(t){return"number"==typeof t?1!==t:t[0]!==t[1]||1!==t[0]}function Mt(t,e,n){let{type:r}=e,{id:o}=e,{plural:i=!1}=e,{count:l}=e;const s=I("data");let a=s.byId(r,o);return"vehicle_part"===(null==a?void 0:a.type)&&!a.name&&a.item&&(a=s.byId("item",a.item)),t.$$set=t=>{"type"in t&&n(0,r=t.type),"id"in t&&n(1,o=t.id),"plural"in t&&n(2,i=t.plural),"count"in t&&n(3,l=t.count)},[r,o,i,l,a]}class Nt extends tt{constructor(t){super(),Q(this,t,Mt,Ot,i,{type:0,id:1,plural:2,count:3})}}const{subscribe:Bt,set:Dt}=nt(null),qt={subscribe:Bt,setURL(t){t?(async t=>{var e,n;const r=await fetch(`${t}/tile_config.json`,{mode:"cors"});if(!r.ok)throw new Error(`Error ${r.status} (${r.statusText}) fetching tile data`);const o=await r.json();for(const r of o["tiles-new"]){const i=await fetch(`${t}/${r.file}`).then((t=>t.blob())),l=URL.createObjectURL(i),s=new Image;s.src=l;try{await new Promise(((t,e)=>{s.onload=t,s.onerror=e}))}finally{URL.revokeObjectURL(l)}const a=s.width/(null!==(e=r.sprite_width)&&void 0!==e?e:o.tile_info[0].width)|0,c=s.height/(null!==(n=r.sprite_height)&&void 0!==n?n:o.tile_info[0].height)|0;r.nx=a,r.ny=c}return o})(t).then((e=>{Dt({...e,baseUrl:t})})):Dt(null)}},Lt={},jt=(t,e,n)=>{Lt[t]=[e,n]};function Pt(t){return{fg:Lt[t][0],bg:Lt[t][1],bold(){return{...this,is_bold:!0}},blink(){return{...this,is_blink:!0}},is_bold:!1,is_blink:!1,color(){let t=this.fg,e=this.bg;return this.is_bold&&(t+=8),this.is_blink&&(e+=8),{fg:t,bg:e}}}}function Ft(t){return t?"_"!=t[1]?Ft("c_"+t):Ut[t]:Ft("c_white")}jt(1,7,0),jt(2,1,0),jt(3,2,0),jt(4,4,0),jt(5,6,0),jt(6,5,0),jt(7,3,0),jt(8,0,7),jt(9,0,1),jt(10,0,2),jt(11,0,4),jt(12,0,6),jt(13,0,5),jt(14,0,3),jt(15,7,4),jt(16,1,4),jt(17,2,4),jt(18,4,4),jt(19,6,4),jt(20,0,4),jt(21,5,4),jt(22,3,4),jt(23,7,1),jt(24,1,1),jt(25,2,1),jt(26,4,1),jt(27,6,1),jt(28,5,1),jt(29,3,1),jt(30,0,0),jt(31,7,0),jt(32,0,7),jt(33,7,7),jt(34,1,7),jt(35,2,7),jt(36,3,7),jt(37,4,7),jt(38,5,7),jt(39,6,7),jt(40,0,2),jt(41,7,2),jt(42,1,2),jt(43,2,2),jt(44,3,2),jt(45,4,2),jt(46,5,2),jt(47,6,2),jt(48,0,3),jt(49,7,3),jt(50,1,3),jt(51,2,3),jt(52,3,3),jt(53,4,3),jt(54,5,3),jt(55,6,3),jt(56,0,5),jt(57,7,5),jt(58,1,5),jt(59,2,5),jt(60,3,5),jt(61,4,5),jt(62,5,5),jt(63,6,5),jt(64,0,6),jt(65,7,6),jt(66,1,6),jt(67,2,6),jt(68,3,6),jt(69,4,6),jt(70,5,6),jt(71,6,6);const Ut={};function Ht(t,e,n,r){Ut[e]={...n.color(),inverse:r}}function Gt(e){let n,r;return{c(){n=h("span"),r=g(e[3]),x(n,"font-family","monospace"),$(n,"class","c_"+e[4]+" svelte-17io91a")},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Wt(t){let e,n,r,o=null!=t[1].bg&&zt(t),i=null!=t[1].fg&&Yt(t);return{c(){e=h("div"),o&&o.c(),n=_(),i&&i.c(),$(e,"style",r=Xt({width:t[0].width*t[0].pixelscale+"px",height:t[0].height*t[0].pixelscale+"px"})),$(e,"class","tile-icon svelte-17io91a")},m(t,r){f(t,e,r),o&&o.m(e,null),d(e,n),i&&i.m(e,null)},p(t,l){null!=t[1].bg?o?o.p(t,l):(o=zt(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),null!=t[1].fg?i?i.p(t,l):(i=Yt(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null),1&l&&r!==(r=Xt({width:t[0].width*t[0].pixelscale+"px",height:t[0].height*t[0].pixelscale+"px"}))&&$(e,"style",r)},d(t){t&&p(e),o&&o.d(),i&&i.d()}}}function zt(t){let e,n;return{c(){e=h("div"),$(e,"class","icon-layer bg svelte-17io91a"),$(e,"style",n=Xt({width:`${t[1].bg.width}px`,height:`${t[1].bg.height}px`,"background-image":`url(${t[2]}/${encodeURIComponent(t[1].bg.file)})`,"background-position":`${-t[1].bg.tx*t[1].bg.width}px ${-t[1].bg.ty*t[1].bg.height}px`,transform:`scale(${t[0].pixelscale}) translate(${t[1].bg.offx}px, ${t[1].bg.offy}px)`}))},m(t,n){f(t,e,n)},p(t,r){7&r&&n!==(n=Xt({width:`${t[1].bg.width}px`,height:`${t[1].bg.height}px`,"background-image":`url(${t[2]}/${encodeURIComponent(t[1].bg.file)})`,"background-position":`${-t[1].bg.tx*t[1].bg.width}px ${-t[1].bg.ty*t[1].bg.height}px`,transform:`scale(${t[0].pixelscale}) translate(${t[1].bg.offx}px, ${t[1].bg.offy}px)`}))&&$(e,"style",n)},d(t){t&&p(e)}}}function Yt(t){let e,n;return{c(){e=h("div"),$(e,"class","icon-layer fg svelte-17io91a"),$(e,"style",n=Xt({width:`${t[1].fg.width}px`,height:`${t[1].fg.height}px`,"background-image":`url(${t[2]}/${encodeURIComponent(t[1].fg.file)})`,"background-position":`${-t[1].fg.tx*t[1].fg.width}px ${-t[1].fg.ty*t[1].fg.height}px`,transform:`scale(${t[0].pixelscale}) translate(${t[1].fg.offx}px, ${t[1].fg.offy}px)`}))},m(t,n){f(t,e,n)},p(t,r){7&r&&n!==(n=Xt({width:`${t[1].fg.width}px`,height:`${t[1].fg.height}px`,"background-image":`url(${t[2]}/${encodeURIComponent(t[1].fg.file)})`,"background-position":`${-t[1].fg.tx*t[1].fg.width}px ${-t[1].fg.ty*t[1].fg.height}px`,transform:`scale(${t[0].pixelscale}) translate(${t[1].fg.offx}px, ${t[1].fg.offy}px)`}))&&$(e,"style",n)},d(t){t&&p(e)}}}function Vt(e){let n;function r(t,e){return t[1]?Wt:Gt}let o=r(e),i=o(e);return{c(){i.c(),n=y()},m(t,e){i.m(t,e),f(t,n,e)},p(t,[e]){o===(o=r(t))&&i?i.p(t,e):(i.d(1),i=o(t),i&&(i.c(),i.m(n.parentNode,n)))},i:t,o:t,d(t){i.d(t),t&&p(n)}}}function Jt(t){return"string"==typeof t?`i_${t}`:Jt(t[0])}function Kt(t,e){if(!t||!e)return;let n=0;const r=[];for(const e of t["tiles-new"])r.push({from:n,to:n+e.nx*e.ny,chunk:e}),n+=e.nx*e.ny;function o(e){var n,o,i,l;if(null==e)return;const s=function(t){for(const e of r)if(t>=e.from&&t<e.to)return e}(e),a=e-s.from,c=a%s.chunk.nx,u=a/s.chunk.nx|0;return{file:s.chunk.file,width:null!==(n=s.chunk.sprite_width)&&void 0!==n?n:t.tile_info[0].width,height:null!==(o=s.chunk.sprite_height)&&void 0!==o?o:t.tile_info[0].height,offx:null!==(i=s.chunk.sprite_offset_x)&&void 0!==i?i:0,offy:null!==(l=s.chunk.sprite_offset_y)&&void 0!==l?l:0,tx:c,ty:u}}for(const r of t["tiles-new"]){for(const t of r.tiles)if(Array.isArray(t.id)&&t.id.includes(e)||t.id===e){let e=Array.isArray(t.fg)?t.fg[0]:t.fg,n=Array.isArray(t.bg)?t.bg[0]:t.bg;return e&&"object"==typeof e&&(e=e.sprite),n&&"object"==typeof n&&(n=n.sprite),{fg:o(e),bg:o(n)}}n+=r.nx*r.ny}}function Xt(t){let e="";for(const[n,r]of Object.entries(t))e+=`${n}: ${r};`;return e}function Zt(t,e,n){let r,o,i,l;var a,c;s(t,qt,(t=>n(7,l=t)));let{item:u}=e,d=I("data");const f=null!==(c=[u.symbol].flat()[0])&&void 0!==c?c:" ",p=/^LINE_/.test(f)?"|":f,m=u.color?"string"==typeof u.color?u.color:u.color[0]:u.bgcolor?Jt(u.bgcolor):null;function h(t,e,n=10){var r,o,i;function l(t){return"vehicle_part"===e.type?`vp_${t}`:t}const s=Kt(t,l(null!==(r=e.id)&&void 0!==r?r:e.abstract));if(s)return s;const a=null!==(o=e.looks_like)&&void 0!==o?o:e["copy-from"];if(!a)return;const c=Kt(t,l(a));if(c)return c;if(n>0){const r=null!==(i=d.byId(ot(e.type),a))&&void 0!==i?i:d.abstractById(ot(e.type),a);if(r)return h(t,r,n-1)}}function g(t,e,n){var r;if(!t)return;const o=[e].flat()[0],i=o?/^LINE_/.test(o)?"|":o:" ",l=Ft(Array.isArray(n)?n[0]:n).fg;for(const e of t["tiles-new"])for(const n of null!==(r=e.ascii)&&void 0!==r?r:[]){if(s(n.color)+(n.bold?8:0)===l){const r=n.offset+i.charCodeAt(0),o=r%e.nx,l=r/e.nx|0;return{fg:{file:e.file,tx:o,ty:l,width:t.tile_info[0].width,height:t.tile_info[0].height,offx:0,offy:0}}}}function s(t){return"BLACK"===t?0:"RED"===t?1:"GREEN"===t?2:"YELLOW"===t?3:"BLUE"===t?4:"MAGENTA"===t?5:"CYAN"===t?6:"WHITE"===t?7:-1}}return t.$$set=t=>{"item"in t&&n(5,u=t.item)},t.$$.update=()=>{128&t.$$.dirty&&n(0,r=null==l?void 0:l.tile_info[0]),224&t.$$.dirty&&n(1,o=function(t){return["item","monster","terrain","furniture","vehicle_part"].includes(ot(t.type))}(u)?null!==n(6,a=h(l,u))&&void 0!==a?a:g(l,u.symbol,u.color):null),128&t.$$.dirty&&n(2,i=null==l?void 0:l.baseUrl)},[r,o,i,p,m,u,a,l]}Ht(0,"c_black",Pt(30),"def_i_black"),Ht(0,"c_white",Pt(1).bold(),"def_i_white"),Ht(0,"c_light_gray",Pt(1),"def_i_light_gray"),Ht(0,"c_dark_gray",Pt(30).bold(),"def_i_dark_gray"),Ht(0,"c_red",Pt(2),"def_i_red"),Ht(0,"c_green",Pt(3),"def_i_green"),Ht(0,"c_blue",Pt(4),"def_i_blue"),Ht(0,"c_cyan",Pt(5),"def_i_cyan"),Ht(0,"c_magenta",Pt(6),"def_i_magenta"),Ht(0,"c_brown",Pt(7),"def_i_brown"),Ht(0,"c_light_red",Pt(2).bold(),"def_i_light_red"),Ht(0,"c_light_green",Pt(3).bold(),"def_i_light_green"),Ht(0,"c_light_blue",Pt(4).bold(),"def_i_light_blue"),Ht(0,"c_light_cyan",Pt(5).bold(),"def_i_light_cyan"),Ht(0,"c_pink",Pt(6).bold(),"def_i_pink"),Ht(0,"c_yellow",Pt(7).bold(),"def_i_yellow"),Ht(0,"h_black",Pt(20),"def_c_blue"),Ht(0,"h_white",Pt(15).bold(),"def_c_light_blue_white"),Ht(0,"h_light_gray",Pt(15),"def_c_blue_white"),Ht(0,"h_dark_gray",Pt(20).bold(),"def_c_light_blue"),Ht(0,"h_red",Pt(16),"def_c_blue_red"),Ht(0,"h_green",Pt(17),"def_c_blue_green"),Ht(0,"h_blue",Pt(20),"def_h_blue"),Ht(0,"h_cyan",Pt(19),"def_c_blue_cyan"),Ht(0,"h_magenta",Pt(21),"def_c_blue_magenta"),Ht(0,"h_brown",Pt(22),"def_c_blue_yellow"),Ht(0,"h_light_red",Pt(16).bold(),"def_c_light_blue_red"),Ht(0,"h_light_green",Pt(17).bold(),"def_c_light_blue_green"),Ht(0,"h_light_blue",Pt(18).bold(),"def_h_light_blue"),Ht(0,"h_light_cyan",Pt(19).bold(),"def_c_light_blue_cyan"),Ht(0,"h_pink",Pt(21).bold(),"def_c_light_blue_magenta"),Ht(0,"h_yellow",Pt(22).bold(),"def_c_light_blue_yellow"),Ht(0,"i_black",Pt(32),"def_c_black"),Ht(0,"i_white",Pt(8).blink(),"def_c_white"),Ht(0,"i_light_gray",Pt(8),"def_c_light_gray"),Ht(0,"i_dark_gray",Pt(32).blink(),"def_c_dark_gray"),Ht(0,"i_red",Pt(9),"def_c_red"),Ht(0,"i_green",Pt(10),"def_c_green"),Ht(0,"i_blue",Pt(11),"def_c_blue"),Ht(0,"i_cyan",Pt(12),"def_c_cyan"),Ht(0,"i_magenta",Pt(13),"def_c_magenta"),Ht(0,"i_brown",Pt(14),"def_c_brown"),Ht(0,"i_light_red",Pt(9).blink(),"def_c_light_red"),Ht(0,"i_light_green",Pt(10).blink(),"def_c_light_green"),Ht(0,"i_light_blue",Pt(11).blink(),"def_c_light_blue"),Ht(0,"i_light_cyan",Pt(12).blink(),"def_c_light_cyan"),Ht(0,"i_pink",Pt(13).blink(),"def_c_pink"),Ht(0,"i_yellow",Pt(14).blink(),"def_c_yellow"),Ht(0,"c_black_red",Pt(9).bold(),"def_c_red"),Ht(0,"c_white_red",Pt(23).bold(),"def_c_red_white"),Ht(0,"c_light_gray_red",Pt(23),"def_c_light_red_white"),Ht(0,"c_dark_gray_red",Pt(9),"def_c_dark_gray_red"),Ht(0,"c_red_red",Pt(9),"def_c_red_red"),Ht(0,"c_green_red",Pt(25),"def_c_red_green"),Ht(0,"c_blue_red",Pt(26),"def_h_red"),Ht(0,"c_cyan_red",Pt(27),"def_c_red_cyan"),Ht(0,"c_magenta_red",Pt(28),"def_c_red_magenta"),Ht(0,"c_brown_red",Pt(29),"def_c_red_yellow"),Ht(0,"c_light_red_red",Pt(24).bold(),"def_c_red_red"),Ht(0,"c_light_green_red",Pt(25).bold(),"def_c_light_red_green"),Ht(0,"c_light_blue_red",Pt(26).bold(),"def_h_light_red"),Ht(0,"c_light_cyan_red",Pt(27).bold(),"def_c_light_red_cyan"),Ht(0,"c_pink_red",Pt(28).bold(),"def_c_light_red_magenta"),Ht(0,"c_yellow_red",Pt(29).bold(),"def_c_red_yellow"),Ht(0,"c_unset",Pt(31),"def_c_unset"),Ht(0,"c_black_white",Pt(32),"def_c_light_gray"),Ht(0,"c_dark_gray_white",Pt(32).bold(),"def_c_white"),Ht(0,"c_light_gray_white",Pt(33),"def_c_light_gray_white"),Ht(0,"c_white_white",Pt(33).bold(),"def_c_white_white"),Ht(0,"c_red_white",Pt(34),"def_c_white_red"),Ht(0,"c_light_red_white",Pt(34).bold(),"def_c_light_gray_red"),Ht(0,"c_green_white",Pt(35),"def_c_light_gray_green"),Ht(0,"c_light_green_white",Pt(35).bold(),"def_c_white_green"),Ht(0,"c_brown_white",Pt(36),"def_c_light_gray_yellow"),Ht(0,"c_yellow_white",Pt(36).bold(),"def_c_white_yellow"),Ht(0,"c_blue_white",Pt(37),"def_h_light_gray"),Ht(0,"c_light_blue_white",Pt(37).bold(),"def_h_white"),Ht(0,"c_magenta_white",Pt(38),"def_c_light_gray_magenta"),Ht(0,"c_pink_white",Pt(38).bold(),"def_c_white_magenta"),Ht(0,"c_cyan_white",Pt(39),"def_c_light_gray_cyan"),Ht(0,"c_light_cyan_white",Pt(39).bold(),"def_c_white_cyan"),Ht(0,"c_black_green",Pt(40),"def_c_green"),Ht(0,"c_dark_gray_green",Pt(40).bold(),"def_c_light_green"),Ht(0,"c_light_gray_green",Pt(41),"def_c_green_white"),Ht(0,"c_white_green",Pt(41).bold(),"def_c_light_green_white"),Ht(0,"c_red_green",Pt(42),"def_c_green_red"),Ht(0,"c_light_red_green",Pt(42).bold(),"def_c_light_green_red"),Ht(0,"c_green_green",Pt(43),"def_c_green_green"),Ht(0,"c_light_green_green",Pt(43).bold(),"def_c_light_green_green"),Ht(0,"c_brown_green",Pt(44),"def_c_green_yellow"),Ht(0,"c_yellow_green",Pt(44).bold(),"def_c_light_green_yellow"),Ht(0,"c_blue_green",Pt(45),"def_h_green"),Ht(0,"c_light_blue_green",Pt(45).bold(),"def_h_light_green"),Ht(0,"c_magenta_green",Pt(46),"def_c_green_magenta"),Ht(0,"c_pink_green",Pt(46).bold(),"def_c_light_green_magenta"),Ht(0,"c_cyan_green",Pt(47),"def_c_green_cyan"),Ht(0,"c_light_cyan_green",Pt(47).bold(),"def_c_light_green_cyan"),Ht(0,"c_black_yellow",Pt(48),"def_c_brown"),Ht(0,"c_dark_gray_yellow",Pt(48).bold(),"def_c_yellow"),Ht(0,"c_light_gray_yellow",Pt(49),"def_c_brown_white"),Ht(0,"c_white_yellow",Pt(49).bold(),"def_c_yellow_white"),Ht(0,"c_red_yellow",Pt(50),"def_c_yellow_red"),Ht(0,"c_light_red_yellow",Pt(50).bold(),"def_c_yellow_red"),Ht(0,"c_green_yellow",Pt(51),"def_c_brown_green"),Ht(0,"c_light_green_yellow",Pt(51).bold(),"def_c_yellow_green"),Ht(0,"c_brown_yellow",Pt(52),"def_c_brown_yellow"),Ht(0,"c_yellow_yellow",Pt(52).bold(),"def_c_yellow_yellow"),Ht(0,"c_blue_yellow",Pt(53),"def_h_brown"),Ht(0,"c_light_blue_yellow",Pt(53).bold(),"def_h_yellow"),Ht(0,"c_magenta_yellow",Pt(54),"def_c_brown_magenta"),Ht(0,"c_pink_yellow",Pt(54).bold(),"def_c_yellow_magenta"),Ht(0,"c_cyan_yellow",Pt(55),"def_c_brown_cyan"),Ht(0,"c_light_cyan_yellow",Pt(55).bold(),"def_c_yellow_cyan"),Ht(0,"c_black_magenta",Pt(56),"def_c_magenta"),Ht(0,"c_dark_gray_magenta",Pt(56).bold(),"def_c_pink"),Ht(0,"c_light_gray_magenta",Pt(57),"def_c_magenta_white"),Ht(0,"c_white_magenta",Pt(57).bold(),"def_c_pink_white"),Ht(0,"c_red_magenta",Pt(58),"def_c_magenta_red"),Ht(0,"c_light_red_magenta",Pt(58).bold(),"def_c_pink_red"),Ht(0,"c_green_magenta",Pt(59),"def_c_magenta_green"),Ht(0,"c_light_green_magenta",Pt(59).bold(),"def_c_pink_green"),Ht(0,"c_brown_magenta",Pt(60),"def_c_magenta_yellow"),Ht(0,"c_yellow_magenta",Pt(60).bold(),"def_c_pink_yellow"),Ht(0,"c_blue_magenta",Pt(61),"def_h_magenta"),Ht(0,"c_light_blue_magenta",Pt(61).bold(),"def_h_pink"),Ht(0,"c_magenta_magenta",Pt(62),"def_c_magenta_magenta"),Ht(0,"c_pink_magenta",Pt(62).bold(),"def_c_pink_magenta"),Ht(0,"c_cyan_magenta",Pt(63),"def_c_magenta_cyan"),Ht(0,"c_light_cyan_magenta",Pt(63).bold(),"def_c_pink_cyan"),Ht(0,"c_black_cyan",Pt(64),"def_c_cyan"),Ht(0,"c_dark_gray_cyan",Pt(64).bold(),"def_c_light_cyan"),Ht(0,"c_light_gray_cyan",Pt(65),"def_c_cyan_white"),Ht(0,"c_white_cyan",Pt(65).bold(),"def_c_light_cyan_white"),Ht(0,"c_red_cyan",Pt(66),"def_c_cyan_red"),Ht(0,"c_light_red_cyan",Pt(66).bold(),"def_c_light_cyan_red"),Ht(0,"c_green_cyan",Pt(67),"def_c_cyan_green"),Ht(0,"c_light_green_cyan",Pt(67).bold(),"def_c_light_cyan_green"),Ht(0,"c_brown_cyan",Pt(68),"def_c_cyan_yellow"),Ht(0,"c_yellow_cyan",Pt(68).bold(),"def_c_light_cyan_yellow"),Ht(0,"c_blue_cyan",Pt(69),"def_h_cyan"),Ht(0,"c_light_blue_cyan",Pt(69).bold(),"def_h_light_cyan"),Ht(0,"c_magenta_cyan",Pt(70),"def_c_cyan_magenta"),Ht(0,"c_pink_cyan",Pt(70).bold(),"def_c_light_cyan_magenta"),Ht(0,"c_cyan_cyan",Pt(71),"def_c_cyan_cyan"),Ht(0,"c_light_cyan_cyan",Pt(71).bold(),"def_c_light_cyan_cyan");class Qt extends tt{constructor(t){super(),Q(this,t,Zt,Vt,i,{item:5})}}function te(t){let e,n,r,o,i,l=t[0].cooldown+"";return e=new Nt({props:{type:"item",id:t[0].gun_type}}),{c(){J(e.$$.fragment),n=g(" (cooldown: "),r=g(l),o=g(")")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,[n]){const o={};1&n&&(o.id=t[0].gun_type),e.$set(o),(!i||1&n)&&l!==(l=t[0].cooldown+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function ee(t,e,n){let{attack:r}=e;return t.$$set=t=>{"attack"in t&&n(0,r=t.attack)},[r]}class ne extends tt{constructor(t){super(),Q(this,t,ee,te,i,{attack:0})}}function re(e){let n,r,o,i=e[0].id+"",l="damage_max_instance"in e[0]&&le(e),s=e[0].cooldown&&se(e);return{c(){n=g(i),l&&l.c(),r=y(),s&&s.c(),o=y()},m(t,e){f(t,n,e),l&&l.m(t,e),f(t,r,e),s&&s.m(t,e),f(t,o,e)},p(t,e){1&e&&i!==(i=t[0].id+"")&&b(n,i),"damage_max_instance"in t[0]?l?l.p(t,e):(l=le(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null),t[0].cooldown?s?s.p(t,e):(s=se(t),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:t,o:t,d(t){t&&p(n),l&&l.d(t),t&&p(r),s&&s.d(t),t&&p(o)}}}function oe(t){let e,n,r,o;const i=[ce,ae],l=[];function s(t,e){return"gun"===t[0].type?0:1}return e=s(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,o){let a=e;e=s(t),e===a?l[e].p(t,o):(H(),z(l[a],1,1,(()=>{l[a]=null})),G(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function ie(e){let n,r,o=e[0][0]+"",i=e[0].length>1&&de(e);return{c(){n=g(o),i&&i.c(),r=y()},m(t,e){f(t,n,e),i&&i.m(t,e),f(t,r,e)},p(t,e){1&e&&o!==(o=t[0][0]+"")&&b(n,o),t[0].length>1?i?i.p(t,e):(i=de(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&p(n),i&&i.d(t),t&&p(r)}}}function le(t){let e,n,r=yt(t[0].damage_max_instance).map(pe).join(" ")+"";return{c(){e=g(":\n    "),n=g(r)},m(t,r){f(t,e,r),f(t,n,r)},p(t,e){1&e&&r!==(r=yt(t[0].damage_max_instance).map(pe).join(" ")+"")&&b(n,r)},d(t){t&&p(e),t&&p(n)}}}function se(t){let e,n,r,o,i=t[0].cooldown+"";return{c(){e=g(" "),n=g("(cooldown: "),r=g(i),o=g(")")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,e){1&e&&i!==(i=t[0].cooldown+"")&&b(r,i)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function ae(e){let n,r,o=e[0].type+"",i=e[0].cooldown&&ue(e);return{c(){n=g(o),i&&i.c(),r=y()},m(t,e){f(t,n,e),i&&i.m(t,e),f(t,r,e)},p(t,e){1&e&&o!==(o=t[0].type+"")&&b(n,o),t[0].cooldown?i?i.p(t,e):(i=ue(t),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&p(n),i&&i.d(t),t&&p(r)}}}function ce(t){let e,n;return e=new ne({props:{attack:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.attack=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ue(t){let e,n,r,o,i=t[0].cooldown+"";return{c(){e=g(" "),n=g("(cooldown: "),r=g(i),o=g(")")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,e){1&e&&i!==(i=t[0].cooldown+"")&&b(r,i)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function de(t){let e,n,r,o,i=t[0][1]+"";return{c(){e=g(" "),n=g("(cooldown: "),r=g(i),o=g(")")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,e){1&e&&i!==(i=t[0][1]+"")&&b(r,i)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function fe(t){let e,n,r,o,i;const l=[ie,oe,re],s=[];function a(t,n){return 1&n&&(e=!!Array.isArray(t[0])),e?0:"type"in t[0]?1:"id"in t[0]?2:-1}return~(n=a(t,-1))&&(r=s[n]=l[n](t)),{c(){r&&r.c(),o=y()},m(t,e){~n&&s[n].m(t,e),f(t,o,e),i=!0},p(t,[e]){let i=n;n=a(t,e),n===i?~n&&s[n].p(t,e):(r&&(H(),z(s[i],1,1,(()=>{s[i]=null})),G()),~n?(r=s[n],r?r.p(t,e):(r=s[n]=l[n](t),r.c()),W(r,1),r.m(o.parentNode,o)):r=null)},i(t){i||(W(r),i=!0)},o(t){z(r),i=!1},d(t){~n&&s[n].d(t),t&&p(o)}}}const pe=t=>`(${t.damage_type} for ${t.amount} damage)`;function me(t,e,n){let{special_attack:r}=e;return t.$$set=t=>{"special_attack"in t&&n(0,r=t.special_attack)},[r]}class he extends tt{constructor(t){super(),Q(this,t,me,fe,i,{special_attack:0})}}function ge(t,e,n){const r=t.slice();return r[7]=e[n],r}const _e=t=>({item:3&t}),ye=t=>({item:t[7]});function ve(t){let e,n;const r=t[5].default,o=a(r,t,t[4],ye);return{c(){e=h("li"),o&&o.c()},m(t,r){f(t,e,r),o&&o.m(e,null),n=!0},p(t,e){o&&o.p&&19&e&&u(o,r,t,t[4],e,_e,ye)},i(t){n||(W(o,t),n=!0)},o(t){z(o,t),n=!1},d(t){t&&p(e),o&&o.d(t)}}}function $e(t){let e,n,r,o,i,l,s=Number(t[0].length).toLocaleString()+"";return{c(){e=h("button"),n=g("See all "),r=g(s),o=g("..."),$(e,"class","disclosure")},m(s,a){f(s,e,a),d(e,n),d(e,r),d(e,o),i||(l=v(e,"click",t[6]),i=!0)},p(t,e){1&e&&s!==(s=Number(t[0].length).toLocaleString()+"")&&b(r,s)},d(t){t&&p(e),i=!1,l()}}}function be(t){let e,n,r,o,i=t[0].slice(0,t[1]),l=[];for(let e=0;e<i.length;e+=1)l[e]=ve(ge(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));let a=t[0].length>t[1]&&$e(t);return{c(){e=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();n=_(),a&&a.c(),r=y()},m(t,i){f(t,e,i);for(let t=0;t<l.length;t+=1)l[t].m(e,null);f(t,n,i),a&&a.m(t,i),f(t,r,i),o=!0},p(t,[n]){if(19&n){let r;for(i=t[0].slice(0,t[1]),r=0;r<i.length;r+=1){const o=ge(t,i,r);l[r]?(l[r].p(o,n),W(l[r],1)):(l[r]=ve(o),l[r].c(),W(l[r],1),l[r].m(e,null))}for(H(),r=i.length;r<l.length;r+=1)s(r);G()}t[0].length>t[1]?a?a.p(t,n):(a=$e(t),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),m(l,t),t&&p(n),a&&a.d(t),t&&p(r)}}}function we(t,e,n){let{$$slots:r={},$$scope:o}=e,{items:i}=e,{limit:l=10}=e,{grace:s=4}=e,a=i.length<=l+s?l+s:l;return t.$$set=t=>{"items"in t&&n(0,i=t.items),"limit"in t&&n(2,l=t.limit),"grace"in t&&n(3,s=t.grace),"$$scope"in t&&n(4,o=t.$$scope)},[i,a,l,s,o,r,t=>{t.preventDefault(),n(1,a=1/0)}]}class xe extends tt{constructor(t){super(),Q(this,t,we,be,i,{items:0,limit:2,grace:3})}}function Ce(t,e,n){const r=t.slice();return r[11]=e[n],r}function ke(t,e,n){const r=t.slice();return r[14]=e[n].id,r[15]=e[n].prob,r}function Ee(t,e,n){const r=t.slice();return r[11]=e[n],r}function Te(t,e,n){const r=t.slice();return r[14]=e[n].id,r[15]=e[n].prob,r}function Se(t,e,n){const r=t.slice();return r[22]=e[n],r}function Ie(t,e,n){const r=t.slice();return r[25]=e[n],r}function Oe(t,e,n){const r=t.slice();return r[28]=e[n],r}function Re(t,e,n){const r=t.slice();return r[28]=e[n],r}function Ae(t,e,n){const r=t.slice();return r[28]=e[n],r}function Me(t,e,n){const r=t.slice();return r[35]=e[n],r}function Ne(t,e,n){const r=t.slice();return r[14]=e[n],r}function Be(t){let e,n,r,o=t[0].bodytype+"";return{c(){e=h("dt"),e.textContent="Body Type",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e[0]&&o!==(o=t[0].bodytype+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function De(t){let e,n,r,o=(t[0].species??[]).join(", ")+"";return{c(){e=h("dt"),e.textContent="Species",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e[0]&&o!==(o=(t[0].species??[]).join(", ")+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function qe(e){let n,r,o;return r=new Nt({props:{type:"material",id:e[14]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Le(t){let e,n,r,o,i=t[0].special_attacks,l=[];for(let e=0;e<i.length;e+=1)l[e]=Fe(Me(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Special Attacks",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();$(r,"class","no-bullets")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(3&e[0]){let n;for(i=t[0].special_attacks,n=0;n<i.length;n+=1){const o=Me(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Fe(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}function je(t){let e,n;return e=new he({props:{special_attack:t[35]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.special_attack=t[35]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Pe(t){let e,n;return e=new Nt({props:{type:"monster_attack",id:t[35][0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.id=t[35][0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Fe(t){let e,n,r,o,i,l;const s=[Pe,je],a=[];function c(t,e){return 1&e[0]&&(n=!(!t[35][0]||!t[1].byId("monster_attack",t[35][0]))),n?0:1}return r=c(t,[-1]),o=a[r]=s[r](t),{c(){e=h("li"),o.c(),i=_()},m(t,n){f(t,e,n),a[r].m(e,null),d(e,i),l=!0},p(t,n){let l=r;r=c(t,n),r===l?a[r].p(t,n):(H(),z(a[l],1,1,(()=>{a[l]=null})),G(),o=a[r],o?o.p(t,n):(o=a[r]=s[r](t),o.c()),W(o,1),o.m(e,i))},i(t){l||(W(o),l=!0)},o(t){z(o),l=!1},d(t){t&&p(e),a[r].d()}}}function Ue(t){let e,n,r,o,i=t[0].regenerates+"";return{c(){e=h("dt"),e.textContent="Regenerates",n=h("dd"),r=g(i),o=g(" hp/turn")},m(t,i){f(t,e,i),f(t,n,i),d(n,r),d(n,o)},p(t,e){1&e[0]&&i!==(i=t[0].regenerates+"")&&b(r,i)},d(t){t&&p(e),t&&p(n)}}}function He(t){let e,n,r,o,i,l,s=t[0].special_when_hit[0]+"",a=t[0].special_when_hit[1]+"";return{c(){e=h("dt"),e.textContent="When Hit",n=h("dd"),r=g(s),o=g(" ("),i=g(a),l=g("%)")},m(t,s){f(t,e,s),f(t,n,s),d(n,r),d(n,o),d(n,i),d(n,l)},p(t,e){1&e[0]&&s!==(s=t[0].special_when_hit[0]+"")&&b(r,s),1&e[0]&&a!==(a=t[0].special_when_hit[1]+"")&&b(i,a)},d(t){t&&p(e),t&&p(n)}}}function Ge(t){let e,n,r,o,i=t[0].anger_triggers,l=[];for(let e=0;e<i.length;e+=1)l[e]=We(Ae(t,i,e));return{c(){e=h("dt"),e.textContent="Anger Triggers",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=_(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o)},p(t,e){if(17&e[0]){let n;for(i=t[0].anger_triggers,n=0;n<i.length;n+=1){const o=Ae(t,i,n);l[n]?l[n].p(o,e):(l[n]=We(o),l[n].c(),l[n].m(r,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),t&&p(n),m(l,t)}}}function We(t){let e,n,r,o,i=t[28]+"";return{c(){e=h("li"),n=h("abbr"),r=g(i),$(n,"title",o=t[4][t[28]])},m(t,o){f(t,e,o),d(e,n),d(n,r)},p(t,e){1&e[0]&&i!==(i=t[28]+"")&&b(r,i),1&e[0]&&o!==(o=t[4][t[28]])&&$(n,"title",o)},d(t){t&&p(e)}}}function ze(t){let e,n,r,o,i=t[0].placate_triggers,l=[];for(let e=0;e<i.length;e+=1)l[e]=Ye(Re(t,i,e));return{c(){e=h("dt"),e.textContent="Placate Triggers",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=_(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o)},p(t,e){if(17&e[0]){let n;for(i=t[0].placate_triggers,n=0;n<i.length;n+=1){const o=Re(t,i,n);l[n]?l[n].p(o,e):(l[n]=Ye(o),l[n].c(),l[n].m(r,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),t&&p(n),m(l,t)}}}function Ye(t){let e,n,r,o,i=t[28]+"";return{c(){e=h("li"),n=h("abbr"),r=g(i),$(n,"title",o=t[4][t[28]])},m(t,o){f(t,e,o),d(e,n),d(n,r)},p(t,e){1&e[0]&&i!==(i=t[28]+"")&&b(r,i),1&e[0]&&o!==(o=t[4][t[28]])&&$(n,"title",o)},d(t){t&&p(e)}}}function Ve(t){let e,n,r,o,i=t[0].fear_triggers,l=[];for(let e=0;e<i.length;e+=1)l[e]=Je(Oe(t,i,e));return{c(){e=h("dt"),e.textContent="Fear Triggers",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=_(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o)},p(t,e){if(17&e[0]){let n;for(i=t[0].fear_triggers,n=0;n<i.length;n+=1){const o=Oe(t,i,n);l[n]?l[n].p(o,e):(l[n]=Je(o),l[n].c(),l[n].m(r,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),t&&p(n),m(l,t)}}}function Je(t){let e,n,r,o,i=t[28]+"";return{c(){e=h("li"),n=h("abbr"),r=g(i),$(n,"title",o=t[4][t[28]])},m(t,o){f(t,e,o),d(e,n),d(n,r)},p(t,e){1&e[0]&&i!==(i=t[28]+"")&&b(r,i),1&e[0]&&o!==(o=t[4][t[28]])&&$(n,"title",o)},d(t){t&&p(e)}}}function Ke(t){let e,n,r,o,i=t[0].flags??[],l=[];for(let e=0;e<i.length;e+=1)l[e]=Xe(Ie(t,i,e));return{c(){e=h("dt"),e.textContent="Flags",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=_(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o)},p(t,e){if(9&e[0]){let n;for(i=t[0].flags??[],n=0;n<i.length;n+=1){const o=Ie(t,i,n);l[n]?l[n].p(o,e):(l[n]=Xe(o),l[n].c(),l[n].m(r,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),t&&p(n),m(l,t)}}}function Xe(t){let e,n,r,o,i=t[25]+"";return{c(){e=h("li"),n=h("abbr"),r=g(i),$(n,"title",o=t[3][t[25]])},m(t,o){f(t,e,o),d(e,n),d(n,r)},p(t,e){1&e[0]&&i!==(i=t[25]+"")&&b(r,i),1&e[0]&&o!==(o=t[3][t[25]])&&$(n,"title",o)},d(t){t&&p(e)}}}function Ze(t){let e,n,r,o;function i(t,e){return(null==r||1&e[0])&&(r=!(!t[0].death_function.effect?.id||!t[1].byId("SPELL",t[0].death_function.effect.id))),r?tn:Qe}let l=i(t,[-1]),s=l(t);return{c(){e=h("dt"),e.textContent="On Death",n=h("dd"),s.c(),o=_()},m(t,r){f(t,e,r),f(t,n,r),s.m(n,null),d(n,o)},p(t,e){l===(l=i(t,e))&&s?s.p(t,e):(s.d(1),s=l(t),s&&(s.c(),s.m(n,o)))},d(t){t&&p(e),t&&p(n),s.d()}}}function Qe(t){let e,n=(t[0].death_function.effect?.id??t[0].death_function.corpse_type??"NORMAL")+"";return{c(){e=g(n)},m(t,n){f(t,e,n)},p(t,r){1&r[0]&&n!==(n=(t[0].death_function.effect?.id??t[0].death_function.corpse_type??"NORMAL")+"")&&b(e,n)},d(t){t&&p(e)}}}function tn(t){let e,n,r,o,i=st(t[1].byId("SPELL",t[0].death_function.effect.id))+"",l=it(t[1].byId("SPELL",t[0].death_function.effect.id).description)+"";return{c(){e=g(i),n=g(" ("),r=g(l),o=g(")")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,n){1&n[0]&&i!==(i=st(t[1].byId("SPELL",t[0].death_function.effect.id))+"")&&b(e,i),1&n[0]&&l!==(l=it(t[1].byId("SPELL",t[0].death_function.effect.id).description)+"")&&b(r,l)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function en(e){let n,r,o;return r=new Nt({props:{type:"monster",id:e[22]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function nn(e){let n,r,o,i,l=e[9].half_life+"",s=1!==e[9].half_life&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("with a half-life of "),r=g(l),o=g(" day"),s&&s.c(),i=y()},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),s&&s.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),s&&s.d(t),t&&p(i)}}}function rn(e){let n,r,o,i,l=e[9].age_grow+"",s=1!==e[9].age_grow&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("in "),r=g(l),o=g(" day"),s&&s.c(),i=y()},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),s&&s.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),s&&s.d(t),t&&p(i)}}}function on(t){let e,n,r,o,i,l,s,a=yn(t[0].prob)+"";return e=new Qt({props:{item:t[1].byId("item",t[0].id)}}),r=new Nt({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment),o=g(" ("),i=g(a),l=g(")")},m(t,a){K(e,t,a),f(t,n,a),K(r,t,a),f(t,o,a),f(t,i,a),f(t,l,a),s=!0},p(t,n){const o={};1&n[0]&&(o.item=t[1].byId("item",t[0].id)),e.$set(o);const l={};1&n[0]&&(l.id=t[0].id),r.$set(l),(!s||1&n[0])&&a!==(a=yn(t[0].prob)+"")&&b(i,a)},i(t){s||(W(e.$$.fragment,t),W(r.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),t&&p(l)}}}function ln(e){let n,r,o,i,l,s;return r=new Qt({props:{item:e[1].byId("item",e[11].drop)}}),i=new Nt({props:{type:"item",id:e[11].drop}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=_()},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,l),s=!0},p:t,i(t){s||(W(r.$$.fragment,t),W(i.$$.fragment,t),s=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),s=!1},d(t){t&&p(n),X(r),X(i)}}}function sn(t){let e,n,r=t[1].flattenItemGroup(t[1].byId("item_group",t[11].drop)),o=[];for(let e=0;e<r.length;e+=1)o[e]=an(Te(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(130&n[0]){let l;for(r=t[1].flattenItemGroup(t[1].byId("item_group",t[11].drop)),l=0;l<r.length;l+=1){const i=Te(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=an(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function an(e){let n,r,o,i,l,s,a,c,u=(100*e[15]).toFixed(2)+"";return r=new Qt({props:{item:e[1].byId("item",e[14])}}),i=new Nt({props:{type:"item",id:e[14]}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=g(" ("),s=g(u),a=g("%)\n            ")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,l),d(n,s),d(n,a),c=!0},p:t,i(t){c||(W(r.$$.fragment,t),W(i.$$.fragment,t),c=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),c=!1},d(t){t&&p(n),X(r),X(i)}}}function cn(t){let e,n,r,o;const i=[sn,ln],l=[];return e=function(t,e){return t[1].byId("harvest_drop_type",t[11].type)?.group?0:1}(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,e){n.p(t,e)},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function un(e){let n,r,o,i,l,s;return r=new Qt({props:{item:e[1].byId("item",e[11].drop)}}),i=new Nt({props:{type:"item",id:e[11].drop}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=_()},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,l),s=!0},p:t,i(t){s||(W(r.$$.fragment,t),W(i.$$.fragment,t),s=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),s=!1},d(t){t&&p(n),X(r),X(i)}}}function dn(t){let e,n,r=t[1].flattenItemGroup(t[1].byId("item_group",t[11].drop)),o=[];for(let e=0;e<r.length;e+=1)o[e]=fn(ke(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(258&n[0]){let l;for(r=t[1].flattenItemGroup(t[1].byId("item_group",t[11].drop)),l=0;l<r.length;l+=1){const i=ke(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=fn(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function fn(e){let n,r,o,i,l,s,a,c,u=(100*e[15]).toFixed(2)+"";return r=new Qt({props:{item:e[1].byId("item",e[14])}}),i=new Nt({props:{type:"item",id:e[14]}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=g(" ("),s=g(u),a=g("%)\n            ")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,l),d(n,s),d(n,a),c=!0},p:t,i(t){c||(W(r.$$.fragment,t),W(i.$$.fragment,t),c=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),c=!1},d(t){t&&p(n),X(r),X(i)}}}function pn(t){let e,n,r,o;const i=[dn,un],l=[];return e=function(t,e){return t[1].byId("harvest_drop_type",t[11].type)?.group?0:1}(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,e){n.p(t,e)},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function mn(t){let e,n,r,o,i,l,s,a,c,u,v,w,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,Y,V,Z,Q,tt,et,nt,rt,ot,it,lt,at,ct,ut,dt,mt,ht,gt,_t,yt,vt,$t,bt,wt,xt,Ct,kt,Et,Tt,St,It,Ot,Rt,At,Mt,Nt,Bt,Dt,qt,Lt,jt,Pt,Ft,Ut,Ht,Gt,Wt,zt,Yt,Vt,Jt,Kt,Xt,Zt,te,ee,ne,re,oe,ie,le,se,ae,ce,ue,de,fe,pe,me,he,ge,_e,ye,ve=st(t[0])+"",$e=ft(t[0].volume)+"",be=pt(t[0].weight)+"",we=hn(t[0])+"",ke=gn(hn(t[0]))+"",Te=t[0].description+"",Ie=(t[0].speed??0)+"",Oe=(t[0].melee_skill??0)+"",Re=t[2](t[0])+"",Ae=t[0].hp+"",Me=(t[0].dodge??0)+"",je=(t[0].armor_bash??0)+"",Pe=(t[0].armor_cut??0)+"",Fe=(t[0].armor_stab??Math.floor(.8*(t[0].armor_cut??0)))+"",We=(t[0].armor_bullet??0)+"",Ye=(t[0].armor_acid??Math.floor(.5*(t[0].armor_cut??0)))+"",Je=(t[0].armor_fire??0)+"",Xe=(t[0].aggression??0)+"",Qe=(t[0].morale??0)+"",tn=(t[0].vision_day??40)+"",ln=(t[0].vision_night??1)+"",sn=t[0].default_faction+"";n=new Qt({props:{item:t[0]}});let an=t[0].bodytype&&Be(t),un=t[0].species&&t[0].species.length&&De(t),dn=t[5].length&&function(t){let e,n,r,o,i,l=t[5],s=[];for(let e=0;e<l.length;e+=1)s[e]=qe(Ne(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Material",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(32&e[0]){let n;for(l=t[5],n=0;n<l.length;n+=1){const o=Ne(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=qe(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),fn=t[0].special_attacks&&Le(t),mn=t[0].regenerates&&Ue(t),yn=t[0].special_when_hit&&He(t),vn=t[0].anger_triggers?.length&&Ge(t),$n=t[0].placate_triggers?.length&&ze(t),bn=t[0].fear_triggers?.length&&Ve(t),wn=t[0].flags?.length&&Ke(t),xn=t[0].death_function&&Ze(t),Cn=t[9]&&function(t){let e,n,r,o,i,l=t[9].monsters,s=[];for(let e=0;e<l.length;e+=1)s[e]=en(Se(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));let c=function(t,e){return t[9].age_grow?rn:t[9].half_life?nn:void 0}(t),u=c&&c(t);return{c(){e=h("dt"),e.textContent="Upgrades Into",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),u&&u.c(),$(r,"class","comma-separated or")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),u&&u.m(n,null),i=!0},p(t,e){if(512&e[0]){let n;for(l=t[9].monsters,n=0;n<l.length;n+=1){const o=Se(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=en(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}u&&u.p(t,e)},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t),u&&u.d()}}}(t),kn=t[6]?.length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[6],$$slots:{default:[on,({item:t})=>({0:t}),({item:t})=>[t?1:0]]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Drops",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};1&e[0]|512&e[1]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),En=t[7]&&(t[7].entries??[]).length&&function(t){let e,n,r,o,i,l=t[7].entries,s=[];for(let e=0;e<l.length;e+=1)s[e]=cn(Ee(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Butchering Results",r=_(),o=h("ul");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(130&e[0]){let n;for(l=t[7].entries,n=0;n<l.length;n+=1){const r=Ee(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=cn(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),m(s,t)}}}(t),Tn=t[8]&&(t[8].entries??[]).length&&function(t){let e,n,r,o,i,l=t[8].entries,s=[];for(let e=0;e<l.length;e+=1)s[e]=pn(Ce(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Dissection Results",r=_(),o=h("ul");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(258&e[0]){let n;for(l=t[8].entries,n=0;n<l.length;n+=1){const r=Ce(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=pn(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),m(s,t)}}}(t);return{c(){e=h("h1"),J(n.$$.fragment),r=_(),o=g(ve),i=_(),l=h("section"),s=h("dl"),an&&an.c(),a=y(),un&&un.c(),c=h("dt"),c.textContent="Volume",u=h("dd"),v=g($e),w=h("dt"),w.textContent="Weight",C=h("dd"),k=g(be),dn&&dn.c(),E=h("dt"),E.textContent="Difficulty",T=h("dd"),S=g(we),I=_(),O=h("span"),R=g("("),A=g(ke),M=g(")"),B=_(),D=h("p"),q=g(Te),L=_(),j=h("div"),P=h("section"),F=h("h1"),F.textContent="Attack",U=_(),Y=h("dl"),V=h("dt"),V.textContent="Speed",Z=h("dd"),Q=g(Ie),tt=h("dt"),tt.textContent="Melee Skill",et=h("dd"),nt=g(Oe),rt=h("dt"),rt.textContent="Damage",ot=h("dd"),it=g(Re),fn&&fn.c(),lt=_(),at=h("section"),ct=h("h1"),ct.textContent="Defense",ut=_(),dt=h("dl"),mt=h("dt"),mt.textContent="HP",ht=h("dd"),gt=g(Ae),mn&&mn.c(),_t=h("dt"),_t.textContent="Dodge",yt=h("dd"),vt=g(Me),$t=h("dt"),$t.textContent="Armor",bt=h("dd"),wt=h("dl"),xt=h("dt"),xt.textContent="Bash",Ct=h("dd"),kt=g(je),Et=h("dt"),Et.textContent="Cut",Tt=h("dd"),St=g(Pe),It=h("dt"),It.textContent="Stab",Ot=h("dd"),Rt=g(Fe),At=h("dt"),At.textContent="Bullet",Mt=h("dd"),Nt=g(We),Bt=h("dt"),Bt.textContent="Acid",Dt=h("dd"),qt=g(Ye),Lt=h("dt"),Lt.textContent="Fire",jt=h("dd"),Pt=g(Je),Ft=_(),yn&&yn.c(),Ut=_(),Ht=h("section"),Gt=h("h1"),Gt.textContent="Behavior",Wt=_(),zt=h("dl"),Yt=h("dt"),Yt.textContent="Aggression\n    ",Vt=h("dd"),Jt=g(Xe),Kt=h("dt"),Kt.textContent="Morale",Xt=h("dd"),Zt=g(Qe),te=h("dt"),te.textContent="Vision Range",ee=h("dd"),ne=g(tn),re=g(" (day) / "),oe=g(ln),ie=g(" (night)"),le=h("dt"),le.textContent="Default Faction",se=h("dd"),ae=g(sn),vn&&vn.c(),ce=y(),$n&&$n.c(),ue=y(),bn&&bn.c(),de=y(),wn&&wn.c(),fe=y(),xn&&xn.c(),pe=y(),Cn&&Cn.c(),me=_(),kn&&kn.c(),he=_(),En&&En.c(),ge=_(),Tn&&Tn.c(),_e=y(),$(O,"class",N="c_"+_n(hn(t[0]))+" fg_only"),x(D,"color","var(--cata-color-gray)"),x(dt,"flex","1"),$(j,"class","side-by-side"),$(Yt,"title","Monsters with high aggression are more likely to be hostile. Ranges from -100 to 100"),$(Kt,"title","Morale at spawn. Monsters with low morale will flee.")},m(t,p){f(t,e,p),K(n,e,null),d(e,r),d(e,o),f(t,i,p),f(t,l,p),d(l,s),an&&an.m(s,null),d(s,a),un&&un.m(s,null),d(s,c),d(s,u),d(u,v),d(s,w),d(s,C),d(C,k),dn&&dn.m(s,null),d(s,E),d(s,T),d(T,S),d(T,I),d(T,O),d(O,R),d(O,A),d(O,M),d(l,B),d(l,D),d(D,q),f(t,L,p),f(t,j,p),d(j,P),d(P,F),d(P,U),d(P,Y),d(Y,V),d(Y,Z),d(Z,Q),d(Y,tt),d(Y,et),d(et,nt),d(Y,rt),d(Y,ot),d(ot,it),fn&&fn.m(Y,null),d(j,lt),d(j,at),d(at,ct),d(at,ut),d(at,dt),d(dt,mt),d(dt,ht),d(ht,gt),mn&&mn.m(dt,null),d(dt,_t),d(dt,yt),d(yt,vt),d(dt,$t),d(dt,bt),d(bt,wt),d(wt,xt),d(wt,Ct),d(Ct,kt),d(wt,Et),d(wt,Tt),d(Tt,St),d(wt,It),d(wt,Ot),d(Ot,Rt),d(wt,At),d(wt,Mt),d(Mt,Nt),d(wt,Bt),d(wt,Dt),d(Dt,qt),d(wt,Lt),d(wt,jt),d(jt,Pt),d(bt,Ft),yn&&yn.m(dt,null),f(t,Ut,p),f(t,Ht,p),d(Ht,Gt),d(Ht,Wt),d(Ht,zt),d(zt,Yt),d(zt,Vt),d(Vt,Jt),d(zt,Kt),d(zt,Xt),d(Xt,Zt),d(zt,te),d(zt,ee),d(ee,ne),d(ee,re),d(ee,oe),d(ee,ie),d(zt,le),d(zt,se),d(se,ae),vn&&vn.m(zt,null),d(zt,ce),$n&&$n.m(zt,null),d(zt,ue),bn&&bn.m(zt,null),d(zt,de),wn&&wn.m(zt,null),d(zt,fe),xn&&xn.m(zt,null),d(zt,pe),Cn&&Cn.m(zt,null),f(t,me,p),kn&&kn.m(t,p),f(t,he,p),En&&En.m(t,p),f(t,ge,p),Tn&&Tn.m(t,p),f(t,_e,p),ye=!0},p(t,e){const r={};1&e[0]&&(r.item=t[0]),n.$set(r),(!ye||1&e[0])&&ve!==(ve=st(t[0])+"")&&b(o,ve),t[0].bodytype?an?an.p(t,e):(an=Be(t),an.c(),an.m(s,a)):an&&(an.d(1),an=null),t[0].species&&t[0].species.length?un?un.p(t,e):(un=De(t),un.c(),un.m(s,c)):un&&(un.d(1),un=null),(!ye||1&e[0])&&$e!==($e=ft(t[0].volume)+"")&&b(v,$e),(!ye||1&e[0])&&be!==(be=pt(t[0].weight)+"")&&b(k,be),t[5].length&&dn.p(t,e),(!ye||1&e[0])&&we!==(we=hn(t[0])+"")&&b(S,we),(!ye||1&e[0])&&ke!==(ke=gn(hn(t[0]))+"")&&b(A,ke),(!ye||1&e[0]&&N!==(N="c_"+_n(hn(t[0]))+" fg_only"))&&$(O,"class",N),(!ye||1&e[0])&&Te!==(Te=t[0].description+"")&&b(q,Te),(!ye||1&e[0])&&Ie!==(Ie=(t[0].speed??0)+"")&&b(Q,Ie),(!ye||1&e[0])&&Oe!==(Oe=(t[0].melee_skill??0)+"")&&b(nt,Oe),(!ye||1&e[0])&&Re!==(Re=t[2](t[0])+"")&&b(it,Re),t[0].special_attacks?fn?(fn.p(t,e),1&e[0]&&W(fn,1)):(fn=Le(t),fn.c(),W(fn,1),fn.m(Y,null)):fn&&(H(),z(fn,1,1,(()=>{fn=null})),G()),(!ye||1&e[0])&&Ae!==(Ae=t[0].hp+"")&&b(gt,Ae),t[0].regenerates?mn?mn.p(t,e):(mn=Ue(t),mn.c(),mn.m(dt,_t)):mn&&(mn.d(1),mn=null),(!ye||1&e[0])&&Me!==(Me=(t[0].dodge??0)+"")&&b(vt,Me),(!ye||1&e[0])&&je!==(je=(t[0].armor_bash??0)+"")&&b(kt,je),(!ye||1&e[0])&&Pe!==(Pe=(t[0].armor_cut??0)+"")&&b(St,Pe),(!ye||1&e[0])&&Fe!==(Fe=(t[0].armor_stab??Math.floor(.8*(t[0].armor_cut??0)))+"")&&b(Rt,Fe),(!ye||1&e[0])&&We!==(We=(t[0].armor_bullet??0)+"")&&b(Nt,We),(!ye||1&e[0])&&Ye!==(Ye=(t[0].armor_acid??Math.floor(.5*(t[0].armor_cut??0)))+"")&&b(qt,Ye),(!ye||1&e[0])&&Je!==(Je=(t[0].armor_fire??0)+"")&&b(Pt,Je),t[0].special_when_hit?yn?yn.p(t,e):(yn=He(t),yn.c(),yn.m(dt,null)):yn&&(yn.d(1),yn=null),(!ye||1&e[0])&&Xe!==(Xe=(t[0].aggression??0)+"")&&b(Jt,Xe),(!ye||1&e[0])&&Qe!==(Qe=(t[0].morale??0)+"")&&b(Zt,Qe),(!ye||1&e[0])&&tn!==(tn=(t[0].vision_day??40)+"")&&b(ne,tn),(!ye||1&e[0])&&ln!==(ln=(t[0].vision_night??1)+"")&&b(oe,ln),(!ye||1&e[0])&&sn!==(sn=t[0].default_faction+"")&&b(ae,sn),t[0].anger_triggers?.length?vn?vn.p(t,e):(vn=Ge(t),vn.c(),vn.m(zt,ce)):vn&&(vn.d(1),vn=null),t[0].placate_triggers?.length?$n?$n.p(t,e):($n=ze(t),$n.c(),$n.m(zt,ue)):$n&&($n.d(1),$n=null),t[0].fear_triggers?.length?bn?bn.p(t,e):(bn=Ve(t),bn.c(),bn.m(zt,de)):bn&&(bn.d(1),bn=null),t[0].flags?.length?wn?wn.p(t,e):(wn=Ke(t),wn.c(),wn.m(zt,fe)):wn&&(wn.d(1),wn=null),t[0].death_function?xn?xn.p(t,e):(xn=Ze(t),xn.c(),xn.m(zt,pe)):xn&&(xn.d(1),xn=null),t[9]&&Cn.p(t,e),t[6]?.length&&kn.p(t,e),t[7]&&(t[7].entries??[]).length&&En.p(t,e),t[8]&&(t[8].entries??[]).length&&Tn.p(t,e)},i(t){ye||(W(n.$$.fragment,t),W(dn),W(fn),W(Cn),W(kn),W(En),W(Tn),ye=!0)},o(t){z(n.$$.fragment,t),z(dn),z(fn),z(Cn),z(kn),z(En),z(Tn),ye=!1},d(t){t&&p(e),X(n),t&&p(i),t&&p(l),an&&an.d(),un&&un.d(),dn&&dn.d(),t&&p(L),t&&p(j),fn&&fn.d(),mn&&mn.d(),yn&&yn.d(),t&&p(Ut),t&&p(Ht),vn&&vn.d(),$n&&$n.d(),bn&&bn.d(),wn&&wn.d(),xn&&xn.d(),Cn&&Cn.d(),t&&p(me),kn&&kn.d(t),t&&p(he),En&&En.d(t),t&&p(ge),Tn&&Tn.d(t),t&&p(_e)}}}function hn(t){const{melee_skill:e=0,melee_dice:n=0,melee_cut:r=0,melee_dice_sides:o=0,dodge:i=0,armor_bash:l=-1,armor_cut:s=-1,diff:a=0,special_attacks:c=[],emit_fields:u=[],hp:d,speed:f=0,attack_cost:p=100,morale:m=0,aggression:h=0,vision_day:g=40,vision_night:_=1}=t;let y=(e+1)*n*(r+o)*.04+(i+1)*(3+l+s)*.04+(a+c.length+8*u.length);return y=Math.floor(y),y*=.01*(d+f-p+.1*(m+h))+.01*(g+2*_),Math.floor(y)}function gn(t){return t<3?"Minimal threat.":t<10?"Mildly dangerous.":t<20?"Dangerous.":t<30?"Very dangerous.":t<50?"Extremely dangerous.":"Fatally dangerous!"}function _n(t){return t<3||t<10?"light_gray":t<20?"light_red":"red"}function yn(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}function vn(t,e,n){var r;let{item:o}=e,i=I("data");let l=null!==(r=o.material)&&void 0!==r?r:[],s=i.flatDeathDrops(o.id),a=o.harvest?i.byId("harvest",o.harvest):void 0,c=o.dissect?i.byId("harvest",o.dissect):void 0,u=o.upgrades&&(o.upgrades.into||o.upgrades.into_group)?{...o.upgrades,monsters:o.upgrades.into?[o.upgrades.into]:(d=i.byId("monstergroup",o.upgrades.into_group),[d.default].concat(d.monsters.map((t=>t.monster)).filter((t=>t!==d.default))).filter((t=>t)))}:null;var d;return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,i,function(t){let{melee_dice:e=0,melee_dice_sides:n=0,melee_damage:r=[],melee_cut:o}=t;const i=yt(r);return o&&i.push({damage_type:"cut",amount:o}),`${e}d${n} bash`+i.map((t=>` + ${t.amount} ${t.damage_type}`)).join("")},{SEES:"It can see you (and will run/follow)",HEARS:"It can hear you",GOODHEARING:"Pursues sounds more than most monsters",SMELLS:"It can smell you",KEENNOSE:"Keen sense of smell",STUMBLES:"Stumbles in its movement",WARM:"Warm blooded",NOHEAD:"Headshots not allowed!",HARDTOSHOOT:"It's one size smaller for ranged attacks, no less then creature_size::tiny",GRABS:"Its attacks may grab us!",BASHES:"Bashes down doors",DESTROYS:"Bashes down walls and more",BORES:"Tunnels through just about anything",POISON:"Poisonous to eat",VENOM:"Attack may poison the player",BADVENOM:"Attack may SEVERELY poison the player",PARALYZE:"Attack may paralyze the player with venom",WEBWALK:"Doesn't destroy webs",DIGS:"Digs through the ground",CAN_DIG:"Can dig and walk",FLIES:"Can fly (over water, etc)",AQUATIC:"Confined to water",SWIMS:"Treats water as 50 movement point terrain",ATTACKMON:"Attacks other monsters",ANIMAL:'Is an "animal" for purposes of the Animal Empath trait',PLASTIC:"Absorbs physical damage to a great degree",SUNDEATH:"Dies in full sunlight",ELECTRIC:"Shocks unarmed attackers",ACIDPROOF:"Immune to acid",ACIDTRAIL:"Leaves a trail of acid",SHORTACIDTRAIL:"Leaves an intermittent trail of acid",FIREPROOF:"Immune to fire",SLUDGEPROOF:"Ignores the effect of sludge trails",SLUDGETRAIL:"Causes monster to leave a sludge trap trail when moving",COLDPROOF:"Immune to cold damage",FIREY:"Burns stuff and is immune to fire",QUEEN:"When it dies, local populations start to die off too",ELECTRONIC:"e.g. a robot; affected by EMP blasts, and other stuff",FUR:"May produce fur when butchered",LEATHER:"May produce leather when butchered",WOOL:"May produce wool when butchered",BONES:"May produce bones and sinews when butchered; if combined with POISON flag, tainted bones, if combined with HUMAN, human bones",FAT:"May produce fat when butchered; if combined with POISON flag, tainted fat",CONSOLE_DESPAWN:"Despawns when a nearby console is properly hacked",IMMOBILE:"Doesn't move (e.g. turrets)",ID_CARD_DESPAWN:"Despawns when a science ID card is used on a nearby console",RIDEABLE_MECH:"A rideable mech that is immobile until ridden.",MILITARY_MECH:"A rideable mech that was designed for military work.",MECH_RECON_VISION:"This mech gives you IR night-vision.",MECH_DEFENSIVE:"This mech gives you thorough protection.",HIT_AND_RUN:"Flee for several turns after a melee attack",GUILT:"You feel guilty for killing it",PAY_BOT:"You can pay this bot to be your friend for a time",HUMAN:"It's a live human, as long as it's alive",NO_BREATHE:"Creature can't drown and is unharmed by gas, smoke, or poison",FLAMMABLE:"Monster catches fire, burns, and spreads fire to nearby objects",REVIVES:"Monster corpse will revive after a short period of time",CHITIN:"May produce chitin when butchered",VERMIN:'Obsolete flag labeling "nuisance" or "scenery" monsters, now used to prevent loading the same.',NOGIB:"Creature won't leave gibs / meat chunks when killed with huge damage.",LARVA:"Creature is a larva. Currently used for gib and blood handling.",ARTHROPOD_BLOOD:"Forces monster to bleed hemolymph.",ACID_BLOOD:"Makes monster bleed acid. Fun stuff! Does not automatically dissolve in a pool of acid on death.",BILE_BLOOD:"Makes monster bleed bile.",ABSORBS:"Consumes objects it moves over which gives bonus hp.",ABSORBS_SPLITS:"Consumes objects it moves over which gives bonus hp. If it gets enough bonus HP, it spawns a copy of itself.",CBM_CIV:"May produce a common CBM a power CBM when butchered.",CBM_POWER:"May produce a power CBM when butchered, independent of MF_CBM_wev.",CBM_SCI:"May produce a bionic from bionics_sci when butchered.",CBM_OP:"May produce a bionic from bionics_op when butchered, and the power storage is mk 2.",CBM_TECH:"May produce a bionic from bionics_tech when butchered.",CBM_SUBS:"May produce a bionic from bionics_subs when butchered.",FILTHY:"Any clothing it drops will be filthy.",FISHABLE:"It is fishable.",GROUP_BASH:"Monsters that can pile up against obstacles and add their strength together to break them.",SWARMS:"Monsters that like to group together and form loose packs",GROUP_MORALE:"Monsters that are more courageous when near friends",INTERIOR_AMMO:"Monster contain's its ammo inside itself, no need to load on launch. Prevents ammo from being dropped on disable.",CLIMBS:"Monsters that can climb certain terrain and furniture",PACIFIST:"Monsters that will never use melee attack, useful for having them use grab without attacking the player",PUSH_MON:"Monsters that can push creatures out of their way",PUSH_VEH:"Monsters that can push vehicles out of their way",NIGHT_INVISIBILITY:"Monsters that are invisible in poor light conditions",REVIVES_HEALTHY:"When revived, this monster has full hitpoints and speed",NO_NECRO:"This monster can't be revived by necros. It will still rise on its own.",PATH_AVOID_DANGER_1:"This monster will path around some dangers instead of through them.",PATH_AVOID_DANGER_2:"This monster will path around most dangers instead of through them.",PATH_AVOID_FIRE:"This monster will path around heat-related dangers instead of through them.",PATH_AVOID_FALL:"This monster will path around cliffs instead of off of them.",PRIORITIZE_TARGETS:"This monster will prioritize targets depending on their danger levels",NOT_HALLU:"Monsters that will NOT appear when player's producing hallucinations",CATFOOD:"This monster will become friendly when fed cat food.",CATTLEFODDER:"This monster will become friendly when fed cattle fodder.",BIRDFOOD:"This monster will become friendly when fed bird food.",CANPLAY:"This monster can be played with if it's a pet.",PET_MOUNTABLE:"This monster can be mounted and ridden when tamed.",PET_HARNESSABLE:"This monster can be harnessed when tamed.",DOGFOOD:"This monster will become friendly when fed dog food.",MILKABLE:"This monster is milkable.",SHEARABLE:"This monster is shearable.",NO_BREED:"This monster doesn't breed, even though it has breed data",PET_WONT_FOLLOW:"This monster won't follow the player automatically when tamed.",DRIPS_NAPALM:"This monster occasionally drips napalm on move",DRIPS_GASOLINE:"This monster occasionally drips gasoline on move",ELECTRIC_FIELD:"This monster is surrounded by an electrical field that ignites flammable liquids near it",LOUDMOVES:"This monster makes move noises as if ~2 sizes louder, even if flying.",CAN_OPEN_DOORS:"This monster can open doors.",STUN_IMMUNE:"This monster is immune to the stun effect",DROPS_AMMO:"This monster drops ammo. Should not be set for monsters that use pseudo ammo.",INSECTICIDEPROOF:"This monster is immune to insecticide, even though it's made of bug flesh",RANGED_ATTACKER:"This monster has any sort of ranged attack"},{FIRE:"Triggers if there's a fire within 3 tiles, the strength of the effect equals 5 * the field intensity of the fire.",FRIEND_ATTACKED:"Triggers if the monster sees another monster of the same type being attacked; strength = 15.",FRIEND_DIED:"Triggers if the monster sees another monster of the same type dying; strength = 15.",HURT:"Triggers when the monster is hurt, strength equals 1 + (damage / 3).",MEAT:"Meat or a corpse is nearby.",PLAYER_CLOSE:"Triggers when a potential enemy is within 5 tiles range.",PLAYER_WEAK:"Raises monster aggression by 10 - (percent of hp remaining / 10) if a potential enemy has less than 70% hp remaining",PLAYER_NEAR_BABY:"Increases monster aggression by 8 and morale by 4 if **the player** comes within 3 tiles of its offspring (defined by the baby_monster field in its reproduction data)",SOUND:"Not an actual trigger, monsters above 10 aggression and 0 morale will wander towards, monsters below 0 morale will wander away from the source of the sound for 1 turn (6, if they have the GOODHEARING flag).",STALK:"Raises monster aggresssion by 1, triggers 20% of the time each turn if aggression > 5.",HOSTILE_SEEN:"Increases aggression/decreases morale by a random amount between 0-2 for every potential enemy it can see, up to 20 aggression.",MATING_SEASON:"Increases aggression by 3 if a potential enemy is within 5 tiles range and the season is the same as the monster's mating season (defined by the baby_flags field in its reproduction data)."},l,s,a,c,u]}class $n extends tt{constructor(t){super(),Q(this,t,vn,mn,i,{item:0},[-1,-1])}}function bn(t,e,n){const r=t.slice();return r[3]=e[n],r}function wn(t,e,n){const r=t.slice();return r[6]=e[n],r}function xn(e){let n,r,o=e[6].string+"";return{c(){n=h("span"),r=g(o),$(n,"class","c_"+e[6].color)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Cn(t){let e,n=t[3],r=[];for(let e=0;e<n.length;e+=1)r[e]=xn(wn(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=g("\n")},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);f(t,e,n)},p(t,o){if(1&o){let i;for(n=t[3],i=0;i<n.length;i+=1){const l=wn(t,n,i);r[i]?r[i].p(l,o):(r[i]=xn(l),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){m(r,t),t&&p(e)}}}function kn(e){let n,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=Cn(bn(e,r,t));return{c(){n=h("pre");for(let t=0;t<o.length;t+=1)o[t].c();x(n,"font-family","Unifont, monospace"),x(n,"line-height","1")},m(t,e){f(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(1&e){let i;for(r=t[0],i=0;i<r.length;i+=1){const l=bn(t,r,i);o[i]?o[i].p(l,e):(o[i]=Cn(l),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:t,o:t,d(t){t&&p(n),m(o,t)}}}function En(t,e,n){let{picture:r}=e,o=["white"];const i=[];for(const t of r.picture){const e=[];let n=t;for(;;){const t=n.match(/<\/?color([^>]*?)>/);if(!t)break;t.index>0&&e.push({string:n.substr(0,t.index),color:o[0]}),"/"===t[0][1]&&o.length>1?o.shift():o.unshift(t[1].substr(1)),n=n.substr(t.index+t[0].length)}n.length&&e.push({string:n,color:o[0]});const r=41-e.reduce(((t,e)=>t+e.string.length),0);r>0&&e.push({string:" ".repeat(r),color:o[0]}),i.push(e)}return t.$$set=t=>{"picture"in t&&n(1,r=t.picture)},[i,r]}class Tn extends tt{constructor(t){super(),Q(this,t,En,kn,i,{picture:1})}}function Sn(t){let e,n,r,o,i,l,s,a,c,u,m,v,w,x,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L=(t[0].range??0)+"",j=(t[0].dispersion??0)+"",P=(t[0].recoil??0)+"",F=t[2](t[0])+"",U=(t[0].critical_multiplier??2)+"";s=new Nt({props:{type:"ammunition_type",id:t[0].ammo_type}});let Y=t[0].casing&&In(t),V=t[0].effects?.length&&On(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Ammunition",r=_(),o=h("dl"),i=h("dt"),i.textContent="Ammunition Type",l=h("dd"),J(s.$$.fragment),a=h("dt"),a.textContent="Damage",c=h("dd"),c.textContent=`${t[1].amount??0} (${t[1].damage_type??"bullet"})`,u=h("dt"),u.textContent="Armor Penetration",m=h("dd"),m.textContent=`${t[1].armor_penetration??0}`,v=h("dt"),v.textContent="Range",w=h("dd"),x=g(L),C=h("dt"),C.textContent="Dispersion",k=h("dd"),E=g(j),T=h("dt"),T.textContent="Recoil",S=h("dd"),I=g(P),O=h("dt"),O.textContent="Loudness\n      ",R=h("dd"),A=g(F),M=h("dt"),M.textContent="Critical Multiplier",N=h("dd"),B=g(U),Y&&Y.c(),D=y(),V&&V.c(),$(O,"title","Base loudness of ammo (possibly modified by gun/gunmods)")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,l),K(s,l,null),d(o,a),d(o,c),d(o,u),d(o,m),d(o,v),d(o,w),d(w,x),d(o,C),d(o,k),d(k,E),d(o,T),d(o,S),d(S,I),d(o,O),d(o,R),d(R,A),d(o,M),d(o,N),d(N,B),Y&&Y.m(o,null),d(o,D),V&&V.m(o,null),q=!0},p(t,e){const n={};1&e&&(n.id=t[0].ammo_type),s.$set(n),(!q||1&e)&&L!==(L=(t[0].range??0)+"")&&b(x,L),(!q||1&e)&&j!==(j=(t[0].dispersion??0)+"")&&b(E,j),(!q||1&e)&&P!==(P=(t[0].recoil??0)+"")&&b(I,P),(!q||1&e)&&F!==(F=t[2](t[0])+"")&&b(A,F),(!q||1&e)&&U!==(U=(t[0].critical_multiplier??2)+"")&&b(B,U),t[0].casing?Y?(Y.p(t,e),1&e&&W(Y,1)):(Y=In(t),Y.c(),W(Y,1),Y.m(o,D)):Y&&(H(),z(Y,1,1,(()=>{Y=null})),G()),t[0].effects?.length?V?V.p(t,e):(V=On(t),V.c(),V.m(o,null)):V&&(V.d(1),V=null)},i(t){q||(W(s.$$.fragment,t),W(Y),q=!0)},o(t){z(s.$$.fragment,t),z(Y),q=!1},d(t){t&&p(e),X(s),Y&&Y.d(),V&&V.d()}}}function In(t){let e,n,r,o;return r=new Nt({props:{id:t[0].casing,type:"item"}}),{c(){e=h("dt"),e.textContent="Casing",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].casing),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function On(t){let e,n,r,o=t[0].effects.join(", ")+"";return{c(){e=h("dt"),e.textContent="Effects",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].effects.join(", ")+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Rn(t){let e,n,r=(t[0].damage||t[0].show_stats)&&Sn(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[n]){t[0].damage||t[0].show_stats?r?(r.p(t,n),1&n&&W(r,1)):(r=Sn(t),r.c(),W(r,1),r.m(e.parentNode,e)):r&&(H(),z(r,1,1,(()=>{r=null})),G())},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function An(t,e,n){var r;let{item:o}=e;const i=Array.isArray(o.damage)?o.damage[0]:o.damage&&"values"in o.damage?o.damage.values[0]:null!==(r=o.damage)&&void 0!==r?r:{amount:0,damage_type:"bullet",armor_penetration:0};return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,i,function(t){var e,n,r,o,l;return(null!==(e=t.loudness)&&void 0!==e?e:-1)>=0?null!==(n=t.loudness)&&void 0!==n?n:0:2*(null!==(r=t.range)&&void 0!==r?r:0)+(null!==(o=i.amount)&&void 0!==o?o:0)*(null!==(l=i.armor_penetration)&&void 0!==l?l:0)}]}class Mn extends tt{constructor(t){super(),Q(this,t,An,Rn,i,{item:0})}}function Nn(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}function Bn(t){var e;let n=new Map;for(const[r,o]of t){const t=null!==(e=n.get(r))&&void 0!==e?e:[];t.push(o),n.set(r,t)}return n}function Dn(t,e){const n=new Map;for(const r of t){const t=e(r);for(const e of t)n.has(e)||n.set(e,[]),n.get(e).push(r)}return n}function qn(t,e=(t=>t)){const n=new Set,r=[];for(const o of t){const t=e(o);n.has(t)||r.push(o),n.add(t)}return r}function Ln(t,e,n){const r=t.slice();return r[58]=e[n],r}function jn(t){let e;return{c(){e=g("Normal")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Pn(t){let e;return{c(){e=g("Outer aura")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Fn(t){let e;return{c(){e=g("Waist")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Un(t){let e;return{c(){e=g("Outer")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Hn(t){let e;return{c(){e=g("Strapped")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Gn(t){let e;return{c(){e=g("Close to skin")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Wn(t){let e;return{c(){e=g("Personal aura")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function zn(t){let e,n;return{c(){e=h("dt"),e.textContent="Sided",n=h("dd"),n.textContent="Yes"},m(t,r){f(t,e,r),f(t,n,r)},d(t){t&&p(e),t&&p(n)}}}function Yn(e){let n,r,o,i,l,s,a,c=e[58].apd.coverage+"",u=e[58].apd.coverage!==e[58].apd.cover_melee&&function(e){let n,r,o,i,l=e[58].apd.cover_melee+"";return{c(){n=h("dt"),n.textContent="Melee",r=h("dd"),o=g(l),i=g("%")},m(t,e){f(t,n,e),f(t,r,e),d(r,o),d(r,i)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),m=e[58].apd.coverage!==e[58].apd.cover_ranged&&function(e){let n,r,o,i,l=e[58].apd.cover_ranged+"";return{c(){n=h("dt"),n.textContent="Ranged",r=h("dd"),o=g(l),i=g("%")},m(t,e){f(t,n,e),f(t,r,e),d(r,o),d(r,i)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),_=e[58].apd.cover_vitals&&function(e){let n,r,o,i,l=e[58].apd.cover_vitals+"";return{c(){n=h("dt"),n.textContent="Vitals",r=h("dd"),o=g(l),i=g("%")},m(t,e){f(t,n,e),f(t,r,e),d(r,o),d(r,i)},p:t,d(t){t&&p(n),t&&p(r)}}}(e);return{c(){n=h("dl"),r=h("dt"),r.textContent="Default",o=h("dd"),i=g(c),l=g("%"),u&&u.c(),s=y(),m&&m.c(),a=y(),_&&_.c()},m(t,e){f(t,n,e),d(n,r),d(n,o),d(o,i),d(o,l),u&&u.m(n,null),d(n,s),m&&m.m(n,null),d(n,a),_&&_.m(n,null)},p(t,e){t[58].apd.coverage!==t[58].apd.cover_melee&&u.p(t,e),t[58].apd.coverage!==t[58].apd.cover_ranged&&m.p(t,e),t[58].apd.cover_vitals&&_.p(t,e)},d(t){t&&p(n),u&&u.d(),m&&m.d(),_&&_.d()}}}function Vn(e){let n,r,o=e[58].apd.coverage+"";return{c(){n=g(o),r=g("%")},m(t,e){f(t,n,e),f(t,r,e)},p:t,d(t){t&&p(n),t&&p(r)}}}function Jn(e){let n,r,o,i,l,s,a,c,u,m,y,v,b,w,C,k,E,T,S,I,O,R,A,M,N,B,D,q=e[3](e[58].bp_ids)+"",L=e[4](e[58])+"",j=e[5](e[58].bp_ids[0],0,Qn).toFixed(2)+"",P=e[5](e[58].bp_ids[0],0,tr).toFixed(2)+"",F=e[5](e[58].bp_ids[0],0,er).toFixed(2)+"",U=e[6](),H=e[58].apd.specifically_covers?.length&&function(e){let n,r,o,i=e[1](e[58].apd.specifically_covers).join(", ")+"";return{c(){n=g("("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);let G=function(t,e){return t[58].apd.coverage===t[58].apd.cover_melee&&t[58].apd.coverage===t[58].apd.cover_ranged&&0===t[58].apd.cover_vitals?Vn:Yn}(e)(e),W=U&&function(e){let n,r,o,i,l,s,a,c,u=e[7](e[58].bp_ids[0]).toFixed(2)+"",m=e[8](e[58].bp_ids[0]).toFixed(2)+"";return{c(){n=h("dt"),n.textContent="Acid",r=h("dd"),o=g(u),i=h("dt"),i.textContent="Fire",l=h("dd"),s=g(m),a=h("dt"),a.textContent="Environ.",c=h("dd"),c.textContent=`${e[6]()}`},m(t,e){f(t,n,e),f(t,r,e),d(r,o),f(t,i,e),f(t,l,e),d(l,s),f(t,a,e),f(t,c,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(i),t&&p(l),t&&p(a),t&&p(c)}}}(e);return{c(){n=h("div"),r=h("h2"),o=g(q),i=_(),H&&H.c(),l=_(),s=h("dl"),a=h("dt"),a.textContent="Encumbrance",c=h("dd"),u=g(L),m=h("dt"),m.textContent="Coverage",y=h("dd"),G.c(),v=_(),b=h("dt"),b.textContent="Protection",w=h("dd"),C=h("dl"),k=h("dt"),k.textContent="Bash",E=h("dd"),T=g(j),S=_(),I=h("dt"),I.textContent="Cut",O=h("dd"),R=g(P),A=h("dt"),A.textContent="Ballistic",M=h("dd"),N=g(F),B=_(),W&&W.c(),D=_(),$(r,"class","svelte-z6vyu0"),x(C,"font-variant","tabular-nums"),$(n,"class","body-part svelte-z6vyu0")},m(t,e){f(t,n,e),d(n,r),d(r,o),d(r,i),H&&H.m(r,null),d(n,l),d(n,s),d(s,a),d(s,c),d(c,u),d(s,m),d(s,y),G.m(y,null),d(y,v),d(s,b),d(s,w),d(w,C),d(C,k),d(C,E),d(E,T),d(E,S),d(C,I),d(C,O),d(O,R),d(C,A),d(C,M),d(M,N),d(M,B),W&&W.m(C,null),d(n,D)},p(t,e){t[58].apd.specifically_covers?.length&&H.p(t,e),G.p(t,e),U&&W.p(t,e)},d(t){t&&p(n),H&&H.d(),G.d(),W&&W.d()}}}function Kn(e){let n,r,o,i,l,s,a,c,u,y,v,w,x,C,k,E,T,S,I=(e[0].warmth??0)+"";function O(t,e){return(null==a||1&e[0])&&(a=!!(t[0].flags??[]).includes("PERSONAL")),a?Wn:((null==c||1&e[0])&&(c=!!(t[0].flags??[]).includes("SKINTIGHT")),c?Gn:((null==u||1&e[0])&&(u=!!(t[0].flags??[]).includes("BELTED")),u?Hn:((null==y||1&e[0])&&(y=!!(t[0].flags??[]).includes("OUTER")),y?Un:((null==v||1&e[0])&&(v=!!(t[0].flags??[]).includes("WAIST")),v?Fn:((null==w||1&e[0])&&(w=!!(t[0].flags??[]).includes("AURA")),w?Pn:jn)))))}let R=O(e,[-1]),A=R(e),M=e[0].sided&&zn(),N=e[2],B=[];for(let t=0;t<N.length;t+=1)B[t]=Jn(Ln(e,N,t));return{c(){n=h("section"),r=h("h1"),r.textContent="Armor",o=_(),i=h("dl"),l=h("dt"),l.textContent="Layer",s=h("dd"),A.c(),x=_(),C=h("dt"),C.textContent="Warmth",k=h("dd"),E=g(I),M&&M.c(),T=_(),S=h("div");for(let t=0;t<B.length;t+=1)B[t].c();$(S,"class","body-parts svelte-z6vyu0")},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(i,l),d(i,s),A.m(s,null),d(s,x),d(i,C),d(i,k),d(k,E),M&&M.m(i,null),d(n,T),d(n,S);for(let t=0;t<B.length;t+=1)B[t].m(S,null)},p(t,e){if(R!==(R=O(t,e))&&(A.d(1),A=R(t),A&&(A.c(),A.m(s,x))),1&e[0]&&I!==(I=(t[0].warmth??0)+"")&&b(E,I),t[0].sided?M||(M=zn(),M.c(),M.m(i,null)):M&&(M.d(1),M=null),510&e[0]){let n;for(N=t[2],n=0;n<N.length;n+=1){const r=Ln(t,N,n);B[n]?B[n].p(r,e):(B[n]=Jn(r),B[n].c(),B[n].m(S,null))}for(;n<B.length;n+=1)B[n].d(1);B.length=N.length}},i:t,o:t,d(t){t&&p(n),A.d(),M&&M.d(),m(B,t)}}}function Xn(t,e){const[n,r]="number"==typeof t?[t,t]:t,[o,i]="number"==typeof e?[e,e]:e;return[n+o,r+i]}function Zn(t){return"string"==typeof t?{type:t}:t}const Qn=t=>t.bash_resist,tr=t=>t.cut_resist,er=t=>t.bullet_resist;function nr(t,e,n){var r,o,i,l,s,a,c,u,d,f,p,m,h,g,_,y,v,$,b,w,x,C,k,E,T,S,O,R,A,M,N,B,D,q,L,j,P,F,U,H;let{item:G}=e,W=I("data");const z=[];for(const t of null!==(r=G.armor)&&void 0!==r?r:[])if(null!==(o=t.covers)&&void 0!==o?o:G.covers)for(const e of qn(null!==(i=t.covers)&&void 0!==i?i:G.covers)){const n=W.byId("body_part",e),r=z.find((t=>t.covers.includes(e)));if(r){r.encumbrance=Xn(null!==(l=r.encumbrance)&&void 0!==l?l:0,null!==(s=t.encumbrance)&&void 0!==s?s:0);const e=V(n,t)/100,o=V(n,r)/100;r.coverage+=(null!==(a=t.coverage)&&void 0!==a?a:0)*e|0,r.cover_melee+=(null!==(c=t.cover_melee)&&void 0!==c?c:0)*e|0,r.cover_ranged+=(null!==(u=t.cover_ranged)&&void 0!==u?u:0)*e|0,r.cover_vitals=(null!==(d=r.cover_vitals)&&void 0!==d?d:0)+(null!==(f=t.cover_vitals)&&void 0!==f?f:0),r.material_thickness=((null!==(m=null!==(p=t.material_thickness)&&void 0!==p?p:G.material_thickness)&&void 0!==m?m:0)*e+(null!==(g=null!==(h=r.material_thickness)&&void 0!==h?h:G.material_thickness)&&void 0!==g?g:0)*o)/(e+o),r.environmental_protection=((null!==(y=null!==(_=t.environmental_protection)&&void 0!==_?_:G.environmental_protection)&&void 0!==y?y:0)*e+(null!==($=null!==(v=r.environmental_protection)&&void 0!==v?v:G.environmental_protection)&&void 0!==$?$:0)*o)/(e+o)|0,r.environmental_protection_with_filter=((null!==(w=null!==(b=t.environmental_protection_with_filter)&&void 0!==b?b:G.environmental_protection_with_filter)&&void 0!==w?w:0)*e+(null!==(C=null!==(x=r.environmental_protection_with_filter)&&void 0!==x?x:G.environmental_protection_with_filter)&&void 0!==C?C:0)*o)/(e+o)|0,r.layers=null!==(k=r.layers)&&void 0!==k?k:[];for(const e of null!==(E=t.layers)&&void 0!==E?E:[])r.layers.includes(e)||r.layers.push(e);for(const e of null!==(S=null===(T=t.material)||void 0===T?void 0:T.map(Zn))&&void 0!==S?S:[]){const o=r.material.find((t=>t.type===e.type));if(o){const i=V(n,t),l=V(n,r);o.covered_by_mat=(null!==(O=o.covered_by_mat)&&void 0!==O?O:100)+(null!==(R=e.covered_by_mat)&&void 0!==R?R:100)*i/100|0,o.thickness=(i*(null!==(A=e.thickness)&&void 0!==A?A:0)+l*(null!==(M=o.thickness)&&void 0!==M?M:0))/(l+i)}else{const o=V(n,t),i=JSON.parse(JSON.stringify(e));i.covered_by_mat=(null!==(N=e.covered_by_mat)&&void 0!==N?N:100)*o/100,r.material.push(i)}}for(const e of null!==(B=t.specifically_covers)&&void 0!==B?B:[])(null===(D=r.specifically_covers)||void 0===D?void 0:D.includes(e))||(null==r.specifically_covers&&(r.specifically_covers=[]),r.specifically_covers.push(e))}else{const r=JSON.parse(JSON.stringify(t));r.covers=[e];const o=V(n,r)/100,i=null!==(q=r.coverage)&&void 0!==q?q:0;r.coverage=i*o|0,r.cover_melee=(null!==(L=r.cover_melee)&&void 0!==L?L:i)*o|0,r.cover_ranged=(null!==(j=r.cover_ranged)&&void 0!==j?j:i)*o|0,r.material=null===(P=r.material)||void 0===P?void 0:P.map(Zn),z.push(r)}}for(const t of z)for(const e of null!==(F=t.material)&&void 0!==F?F:[])e.covered_by_mat=(null!==(U=e.covered_by_mat)&&void 0!==U?U:100)/((null!==(H=t.coverage)&&void 0!==H?H:0)/100)|0;const Y=[...Dn([...new Set(z.flatMap((t=>t.covers)))],(t=>{const{covers:e,...n}=z.find((e=>e.covers.includes(t)));return[JSON.stringify(n)]})).values()].map((t=>{const e=z.find((e=>e.covers.includes(t[0])));return{bp_ids:t,apd:e}}));function V(t,e){var n,r;if(!(null===(n=t.sub_parts)||void 0===n?void 0:n.length))return 100;let o=0,i=0;const l=(null!==(r=e.specifically_covers)&&void 0!==r?r:[]).length?e.specifically_covers.map((t=>W.byId("sub_body_part",t))):W.byType("sub_body_part").filter((e=>e.parent===t.id));for(const e of l)t.id===e.parent&&(e.secondary?i+=e.max_coverage:o+=e.max_coverage);return Math.max(o,i)}function J(t){var e;for(const n of z)if(null===(e=n.covers)||void 0===e?void 0:e.includes(t))return n.material;return[]}function K(){if(0===z.length)return 0;return z.reduce(((t,e)=>{var n,r;return t+(null!==(r=null!==(n=e.environmental_protection)&&void 0!==n?n:G.environmental_protection)&&void 0!==r?r:0)}),0)/z.length}function X(){var t;let e=0;const n=[];if(Array.isArray(G.material))for(const r of G.material)if("string"==typeof r)n.push({type:r,portion:1}),e+=1;else if("object"==typeof r){const o={type:r.type,portion:null!==(t=r.portion)&&void 0!==t?t:1};e+=o.portion,n.push(o)}return{mats:n,total:e}}return t.$$set=t=>{"item"in t&&n(0,G=t.item)},[G,function(t){const e=new Set,n=[];for(const r of null!=t?t:[]){if(e.has(r))continue;const o=W.byId("sub_body_part",r);o.opposite&&t.includes(o.opposite)?(n.push(it(o.name_multiple)),e.add(o.opposite)):n.push(it(o.name)),e.add(r)}return n},Y,t=>function(t){const e=new Set,n=[];for(const r of null!=t?t:[]){if(e.has(r))continue;const o=W.byId("body_part",r);o.opposite_part&&t.includes(o.opposite_part)?(n.push(o.heading_multiple),e.add(o.opposite_part)):n.push(o.heading),e.add(r)}return n}(t).join(", "),t=>{var e;const[n,r]="number"==typeof t.apd.encumbrance?[t.apd.encumbrance,t.apd.encumbrance]:null!==(e=t.apd.encumbrance)&&void 0!==e?e:[0,0];return n===r?`${n}`:`${n} (${r} when full)`},function(t,e,n){var r;{const o=J(t);if(null==o?void 0:o.length){let t=0;for(const i of o){const o=Math.max(.1,i.thickness);null!==(r=(e<0?100*Math.random()|0:e)<i.covered_by_mat)&&void 0!==r&&r&&(t+=n(W.byId("material",i.type))*o)}return t}}let o=0;const i=function(t){var e,n,r;for(const o of z)if(null===(e=o.covers)||void 0===e?void 0:e.includes(t))return null!==(r=null!==(n=o.material_thickness)&&void 0!==n?n:G.material_thickness)&&void 0!==r?r:0}(t),{mats:l,total:s}=X();if(l.length){for(const t of l)o+=n(W.byId("material",t.type))*t.portion;o/=s}return o*i},K,function(t){var e;{const n=J(t);if(null==n?void 0:n.length){let t=0;for(const r of n)t+=W.byId("material",r.type).acid_resist*(null!==(e=r.covered_by_mat)&&void 0!==e?e:0)*.01;const r=K();return r<10&&(t*=r/10),t}}let n=0;const{mats:r,total:o}=X();if(r.length){for(const t of r)n+=W.byId("material",t.type).acid_resist;n/=o}const i=K();return i<10&&(n*=i/10),n},function(t){var e;{const n=J(t);if(null==n?void 0:n.length){let t=0;for(const r of n)t+=W.byId("material",r.type).fire_resist*(null!==(e=r.covered_by_mat)&&void 0!==e?e:0)*.01;const r=K();return r<10&&(t*=r/10),t}}let n=0;const{mats:r,total:o}=X();if(r.length){for(const t of r)n+=W.byId("material",t.type).fire_resist;n/=o}const i=K();return i<10&&(n*=i/10),n}]}class rr extends tt{constructor(t){super(),Q(this,t,nr,Kn,i,{item:0},[-1,-1])}}function or(t,e,n){const r=t.slice();return r[14]=e[n],r}function ir(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function lr(t,e,n){const r=t.slice();return r[14]=e[n],r}function sr(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function ar(t,e,n){const r=t.slice();return r[23]=e[n][0],r[24]=e[n][1],r}function cr(t){let e,n,r,o,i;return{c(){e=g("The "),n=h("strong"),r=g("right "),o=g(t[23]),i=g(".")},m(t,l){f(t,e,l),f(t,n,l),d(n,r),d(n,o),f(t,i,l)},d(t){t&&p(e),t&&p(n),t&&p(i)}}}function ur(t){let e,n,r,o,i;return{c(){e=g("The "),n=h("strong"),r=g("left "),o=g(t[23]),i=g(".")},m(t,l){f(t,e,l),f(t,n,l),d(n,r),d(n,o),f(t,i,l)},d(t){t&&p(e),t&&p(n),t&&p(i)}}}function dr(t){let e,n,r,o;return{c(){e=g("The "),n=h("strong"),r=g(t[24]),o=g(".")},m(t,i){f(t,e,i),f(t,n,i),d(n,r),f(t,o,i)},d(t){t&&p(e),t&&p(n),t&&p(o)}}}function fr(t){let e,n,r,o;return{c(){e=g("Either "),n=h("strong"),r=g(t[23]),o=g(".")},m(t,i){f(t,e,i),f(t,n,i),d(n,r),f(t,o,i)},d(t){t&&p(e),t&&p(n),t&&p(o)}}}function pr(t){let e,n,r,o,i,l;function s(t,i){return(null==e||1&i)&&(e=!(!t[0].sided||!t[3](`${t[23]}_l`)&&!t[3](`${t[23]}_r`))),e?fr:(null==n&&(n=!(!t[3](`${t[23]}_l`)||!t[3](`${t[23]}_r`))),n?dr:(null==r&&(r=!!t[3](`${t[23]}_l`)),r?ur:(null==o&&(o=!!t[3](`${t[23]}_r`)),o?cr:void 0)))}let a=s(t,-1),c=a&&a(t);return{c(){c&&c.c(),i=_(),l=g(" ")},m(t,e){c&&c.m(t,e),f(t,i,e),f(t,l,e)},p(t,e){a!==(a=s(t,e))&&(c&&c.d(1),c=a&&a(t),c&&(c.c(),c.m(i.parentNode,i)))},d(t){c&&c.d(t),t&&p(i),t&&p(l)}}}function mr(t){let e;return{c(){e=g("Normal")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function hr(t){let e;return{c(){e=g("Outer aura")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function gr(t){let e;return{c(){e=g("Waist")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function _r(t){let e;return{c(){e=g("Outer")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function yr(t){let e;return{c(){e=g("Strapped")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function vr(t){let e;return{c(){e=g("Close to skin")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function $r(t){let e;return{c(){e=g("Personal aura")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function br(t){let e,n,r=(t[0].encumbrance??0)+"",o=t[0].max_encumbrance&&xr(t);return{c(){e=g(r),o&&o.c(),n=y()},m(t,r){f(t,e,r),o&&o.m(t,r),f(t,n,r)},p(t,i){1&i&&r!==(r=(t[0].encumbrance??0)+"")&&b(e,r),t[0].max_encumbrance?o?o.p(t,i):(o=xr(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(t){t&&p(e),o&&o.d(t),t&&p(n)}}}function wr(t){let e,n=t[5],r=[];for(let e=0;e<n.length;e+=1)r[e]=Tr(lr(t,n,e));return{c(){e=h("dl");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){f(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(96&o){let i;for(n=t[5],i=0;i<n.length;i+=1){const l=lr(t,n,i);r[i]?r[i].p(l,o):(r[i]=Tr(l),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&p(e),m(r,t)}}}function xr(t){let e,n,r,o,i=t[0].max_encumbrance+"";return{c(){e=g(" "),n=g("("),r=g(i),o=g(" when full)")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,e){1&e&&i!==(i=t[0].max_encumbrance+"")&&b(r,i)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function Cr(e){let n,r=e[17]+"",o=0!==e[19]&&function(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){o&&o.c(),n=g(r)},m(t,e){o&&o.m(t,e),f(t,n,e)},p:t,d(t){o&&o.d(t),t&&p(n)}}}function kr(e){let n,r=(e[14].encumbrance??0)+"";return{c(){n=g(r)},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Er(e){let n,r,o,i=e[14].encumbrance[0]+"",l=e[14].encumbrance[1]!==e[14].encumbrance[0]&&function(e){let n,r,o,i=e[14].encumbrance[1]+"";return{c(){n=g("("),r=g(i),o=g(" when full)")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=g(i),r=_(),l&&l.c(),o=y()},m(t,e){f(t,n,e),f(t,r,e),l&&l.m(t,e),f(t,o,e)},p(t,e){t[14].encumbrance[1]!==t[14].encumbrance[0]&&l.p(t,e)},d(t){t&&p(n),t&&p(r),l&&l.d(t),t&&p(o)}}}function Tr(t){let e,n,r,o,i=t[6](t[14]),l=[];for(let e=0;e<i.length;e+=1)l[e]=Cr(sr(t,i,e));let s=function(t,e){return Array.isArray(t[14].encumbrance)?Er:kr}(t)(t);return{c(){e=h("dt");for(let t=0;t<l.length;t+=1)l[t].c();n=_(),r=h("dd"),s.c(),o=_()},m(t,i){f(t,e,i);for(let t=0;t<l.length;t+=1)l[t].m(e,null);d(e,n),f(t,r,i),s.m(r,null),d(r,o)},p(t,r){if(96&r){let o;for(i=t[6](t[14]),o=0;o<i.length;o+=1){const s=sr(t,i,o);l[o]?l[o].p(s,r):(l[o]=Cr(s),l[o].c(),l[o].m(e,n))}for(;o<l.length;o+=1)l[o].d(1);l.length=i.length}s.p(t,r)},d(t){t&&p(e),m(l,t),t&&p(r),s.d()}}}function Sr(t){let e,n,r=(t[0].coverage??0)+"";return{c(){e=g(r),n=g("%")},m(t,r){f(t,e,r),f(t,n,r)},p(t,n){1&n&&r!==(r=(t[0].coverage??0)+"")&&b(e,r)},d(t){t&&p(e),t&&p(n)}}}function Ir(t){let e,n=t[0].armor,r=[];for(let e=0;e<n.length;e+=1)r[e]=Rr(or(t,n,e));return{c(){e=h("dl");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){f(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(65&o){let i;for(n=t[0].armor,i=0;i<n.length;i+=1){const l=or(t,n,i);r[i]?r[i].p(l,o):(r[i]=Rr(l),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&p(e),m(r,t)}}}function Or(t){let e,n=t[17]+"",r=0!==t[19]&&function(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){r&&r.c(),e=g(n)},m(t,n){r&&r.m(t,n),f(t,e,n)},p(t,r){1&r&&n!==(n=t[17]+"")&&b(e,n)},d(t){r&&r.d(t),t&&p(e)}}}function Rr(t){let e,n,r,o,i,l=(t[14].coverage??0)+"",s=t[6](t[14]),a=[];for(let e=0;e<s.length;e+=1)a[e]=Or(ir(t,s,e));return{c(){e=h("dt");for(let t=0;t<a.length;t+=1)a[t].c();n=_(),r=h("dd"),o=g(l),i=g("%")},m(t,l){f(t,e,l);for(let t=0;t<a.length;t+=1)a[t].m(e,null);d(e,n),f(t,r,l),d(r,o),d(r,i)},p(t,r){if(65&r){let o;for(s=t[6](t[14]),o=0;o<s.length;o+=1){const i=ir(t,s,o);a[o]?a[o].p(i,r):(a[o]=Or(i),a[o].c(),a[o].m(e,n))}for(;o<a.length;o+=1)a[o].d(1);a.length=s.length}1&r&&l!==(l=(t[14].coverage??0)+"")&&b(o,l)},d(t){t&&p(e),m(a,t),t&&p(r)}}}function Ar(t){let e,n,r,o,i,l,s=(t[0].environmental_protection??0)+"",a=t[1].length&&function(t){let e,n,r,o,i,l,s,a,c,u,m,y,v,$,w,x,C,k,E,T,S=(t[1].reduce(Nr,0)*(t[0].material_thickness??0)/t[2]).toFixed(2)+"",I=(t[1].reduce(Br,0)*(t[0].material_thickness??0)/t[2]).toFixed(2)+"",O=(t[1].reduce(Dr,0)*(t[0].material_thickness??0)/t[2]).toFixed(2)+"",R=t[7]().toFixed(2)+"",A=t[8]().toFixed(2)+"";return{c(){e=h("dt"),e.textContent="Bash",n=h("dd"),r=g(S),o=_(),i=h("dt"),i.textContent="Cut",l=h("dd"),s=g(I),a=_(),c=h("dt"),c.textContent="Ballistic",u=h("dd"),m=g(O),y=_(),v=h("dt"),v.textContent="Acid",$=h("dd"),w=g(R),x=_(),C=h("dt"),C.textContent="Fire",k=h("dd"),E=g(A),T=_()},m(t,p){f(t,e,p),f(t,n,p),d(n,r),d(n,o),f(t,i,p),f(t,l,p),d(l,s),d(l,a),f(t,c,p),f(t,u,p),d(u,m),d(u,y),f(t,v,p),f(t,$,p),d($,w),d($,x),f(t,C,p),f(t,k,p),d(k,E),d(k,T)},p(t,e){1&e&&S!==(S=(t[1].reduce(Nr,0)*(t[0].material_thickness??0)/t[2]).toFixed(2)+"")&&b(r,S),1&e&&I!==(I=(t[1].reduce(Br,0)*(t[0].material_thickness??0)/t[2]).toFixed(2)+"")&&b(s,I),1&e&&O!==(O=(t[1].reduce(Dr,0)*(t[0].material_thickness??0)/t[2]).toFixed(2)+"")&&b(m,O),1&e&&R!==(R=t[7]().toFixed(2)+"")&&b(w,R),1&e&&A!==(A=t[8]().toFixed(2)+"")&&b(E,A)},d(t){t&&p(e),t&&p(n),t&&p(i),t&&p(l),t&&p(c),t&&p(u),t&&p(v),t&&p($),t&&p(C),t&&p(k)}}}(t);return{c(){e=h("dt"),e.textContent="Protection",n=h("dd"),r=h("dl"),a&&a.c(),o=h("dt"),o.textContent="Environ.",i=h("dd"),l=g(s),$(o,"title","Environmental")},m(t,s){f(t,e,s),f(t,n,s),d(n,r),a&&a.m(r,null),d(r,o),d(r,i),d(i,l)},p(t,e){t[1].length&&a.p(t,e),1&e&&s!==(s=(t[0].environmental_protection??0)+"")&&b(l,s)},d(t){t&&p(e),t&&p(n),a&&a.d()}}}function Mr(e){let n,r,o,i,l,s,a,c,u,y,v,w,x,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F=e[3]("head"),U=e[3]("eyes"),H=e[3]("mouth"),G=e[3]("torso"),W=(e[0].warmth??0)+"",z=F&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="head",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),Y=U&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="eyes",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),V=H&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="mouth",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),J=G&&function(t){let e,n,r;return{c(){e=g("The "),n=h("strong"),n.textContent="torso",r=g(".")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}(),K=[["arm","arms"],["hand","hands"],["leg","legs"],["foot","feet"]],X=[];for(let t=0;t<4;t+=1)X[t]=pr(ar(e,K,t));let Z=!e[4]&&function(t){let e;return{c(){e=g("Nothing.")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();function Q(t,e){return(null==k||1&e)&&(k=!!(t[0].flags??[]).includes("PERSONAL")),k?$r:((null==E||1&e)&&(E=!!(t[0].flags??[]).includes("SKINTIGHT")),E?vr:((null==T||1&e)&&(T=!!(t[0].flags??[]).includes("BELTED")),T?yr:((null==S||1&e)&&(S=!!(t[0].flags??[]).includes("OUTER")),S?_r:((null==I||1&e)&&(I=!!(t[0].flags??[]).includes("WAIST")),I?gr:((null==O||1&e)&&(O=!!(t[0].flags??[]).includes("AURA")),O?hr:mr)))))}let tt=Q(e,-1),et=tt(e);let nt=function(t,e){return t[5]?wr:br}(e)(e);function rt(t,e){return t[0].armor?Ir:Sr}let ot=rt(e),it=ot(e),lt=(e[1].length||e[0].environmental_protection)&&Ar(e);return{c(){n=h("section"),r=h("h1"),r.textContent="Armor",o=_(),i=h("dl"),l=h("dt"),l.textContent="Covers",s=h("dd"),z&&z.c(),a=_(),Y&&Y.c(),c=_(),V&&V.c(),u=_(),J&&J.c(),y=_();for(let t=0;t<4;t+=1)X[t].c();v=_(),Z&&Z.c(),w=_(),x=h("dt"),x.textContent="Layer",C=h("dd"),et.c(),R=_(),A=h("dt"),A.textContent="Warmth",M=h("dd"),N=g(W),B=h("dt"),B.textContent="Encumbrance",D=h("dd"),nt.c(),q=_(),L=h("dt"),L.textContent="Coverage\n    ",j=h("dd"),it.c(),P=_(),lt&&lt.c(),$(L,"title","This determines how likely it is that an attack hits the item instead of the player.")},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(i,l),d(i,s),z&&z.m(s,null),d(s,a),Y&&Y.m(s,null),d(s,c),V&&V.m(s,null),d(s,u),J&&J.m(s,null),d(s,y);for(let t=0;t<4;t+=1)X[t].m(s,null);d(s,v),Z&&Z.m(s,null),d(s,w),d(i,x),d(i,C),et.m(C,null),d(C,R),d(i,A),d(i,M),d(M,N),d(i,B),d(i,D),nt.m(D,null),d(D,q),d(i,L),d(i,j),it.m(j,null),d(j,P),lt&&lt.m(i,null)},p(t,[e]){if(9&e){let n;for(K=[["arm","arms"],["hand","hands"],["leg","legs"],["foot","feet"]],n=0;n<4;n+=1){const r=ar(t,K,n);X[n]?X[n].p(r,e):(X[n]=pr(r),X[n].c(),X[n].m(s,v))}for(;n<4;n+=1)X[n].d(1)}tt!==(tt=Q(t,e))&&(et.d(1),et=tt(t),et&&(et.c(),et.m(C,R))),1&e&&W!==(W=(t[0].warmth??0)+"")&&b(N,W),nt.p(t,e),ot===(ot=rt(t))&&it?it.p(t,e):(it.d(1),it=ot(t),it&&(it.c(),it.m(j,P))),t[1].length||t[0].environmental_protection?lt?lt.p(t,e):(lt=Ar(t),lt.c(),lt.m(i,null)):lt&&(lt.d(1),lt=null)},i:t,o:t,d(t){t&&p(n),z&&z.d(),Y&&Y.d(),V&&V.d(),J&&J.d(),m(X,t),Z&&Z.d(),et.d(),nt.d(),it.d(),lt&&lt.d()}}}const Nr=(t,e)=>t+(e.material.bash_resist??0)*e.portion,Br=(t,e)=>t+(e.material.cut_resist??0)*e.portion,Dr=(t,e)=>t+(e.material.bullet_resist??0)*e.portion;function qr(t,e,n){var r,o,i;let{item:l}=e,s=I("data");let a=(null==l.material?[]:"string"==typeof l.material?[{type:l.material,portion:1}]:"string"==typeof l.material[0]?l.material.map((t=>({type:t,portion:1}))):l.material).map((t=>({material:s.byId("material",t.type),portion:t.portion})));const c=a.reduce(((t,e)=>t+e.portion),0);let u=(null!==(r=l.covers)&&void 0!==r?r:[]).length||(null!==(o=l.armor)&&void 0!==o?o:[]).length;const d=null!==(i=l.armor)&&void 0!==i?i:l.armor_portion_data;return t.$$set=t=>{"item"in t&&n(0,l=t.item)},[l,a,c,function(t){var e,n;return(null!==(e=l.covers)&&void 0!==e?e:[]).includes(t)||(null!==(n=l.armor)&&void 0!==n?n:[]).some((e=>{var n;return(null!==(n=e.covers)&&void 0!==n?n:[]).includes(t)}))},u,d,function(t){var e;const n=new Set,r=[];for(const o of null!==(e=t.covers)&&void 0!==e?e:[]){if(n.has(o))continue;const e=s.byId("body_part",o);e.opposite_part&&t.covers.includes(e.opposite_part)?(r.push(e.heading_multiple),n.add(e.opposite_part)):r.push(e.heading),n.add(o)}return r},()=>{let t=a.reduce(((t,e)=>t+(e.material.acid_resist??0)*e.portion),0)/c;const e=l.environmental_protection??0;return e<10&&(t*=e/10),t},()=>{let t=a.reduce(((t,e)=>t+(e.material.fire_resist??0)*e.portion),0)/c;const e=l.environmental_protection??0;return e<10&&(t*=e/10),t}]}class Lr extends tt{constructor(t){super(),Q(this,t,qr,Mr,i,{item:0})}}function jr(t){let e,n,r,o;return e=new Qt({props:{item:t[0].byId(t[3].type,t[3].id)}}),r=new Nt({props:{id:t[3].id,type:t[3].type}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};8&n&&(o.item=t[0].byId(t[3].type,t[3].id)),e.$set(o);const i={};8&n&&(i.id=t[3].id),8&n&&(i.type=t[3].type),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Pr(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1],$$slots:{default:[jr,({item:t})=>({3:t}),({item:t})=>t?8:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Bash",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};24&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Fr(t,e,n){let{item_id:r}=e;const o=I("data");let i=o.byType("terrain").concat(o.byType("furniture")).filter((t=>{var e;return((null===(e=t.bash)||void 0===e?void 0:e.items)?o.flattenItemGroup({subtype:"collection",entries:"string"==typeof t.bash.items?[{group:t.bash.items}]:t.bash.items}):[]).some((({id:t})=>t===r))})).sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[o,i,r]}class Ur extends tt{constructor(t){super(),Q(this,t,Fr,Pr,i,{item_id:2})}}function Hr(t,e,n){const r=t.slice();return r[5]=e[n][0],r[6]=e[n][1],r}function Gr(t){let e,n,r,o,i,l,s,a,c,u,m=(t[0].required_level??0)+"",_=(t[0].max_level??0)+"";return r=new Nt({props:{id:t[0].skill,type:"skill"}}),{c(){e=h("dt"),e.textContent="Skill",n=h("dd"),J(r.$$.fragment),o=h("dt"),o.textContent="Required Level",i=h("dd"),l=g(m),s=h("dt"),s.textContent="Maximum Level",a=h("dd"),c=g(_)},m(t,p){f(t,e,p),f(t,n,p),K(r,n,null),f(t,o,p),f(t,i,p),d(i,l),f(t,s,p),f(t,a,p),d(a,c),u=!0},p(t,e){const n={};1&e&&(n.id=t[0].skill),r.$set(n),(!u||1&e)&&m!==(m=(t[0].required_level??0)+"")&&b(l,m),(!u||1&e)&&_!==(_=(t[0].max_level??0)+"")&&b(c,_)},i(t){u||(W(r.$$.fragment,t),u=!0)},o(t){z(r.$$.fragment,t),u=!1},d(t){t&&p(e),t&&p(n),X(r),t&&p(o),t&&p(i),t&&p(s),t&&p(a)}}}function Wr(t){let e,n,r,o=t[0].chapters+"";return{c(){e=h("dt"),e.textContent="Chapters",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].chapters+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function zr(t){let e,n,r,o;return r=new Nt({props:{type:"martial_art",id:t[0].martial_art}}),{c(){e=h("dt"),e.textContent="Martial Art",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].martial_art),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function Yr(e){let n,r,o,i,l,s,a=e[6]+"";return r=new Nt({props:{id:e[5],type:"item"}}),{c(){n=h("li"),J(r.$$.fragment),o=g(" ("),i=g(a),l=g(")")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),d(n,i),d(n,l),s=!0},p:t,i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){z(r.$$.fragment,t),s=!1},d(t){t&&p(n),X(r)}}}function Vr(t){let e,n,r,o,i,l,s,a,c,u,v,$,w,x,C,k,E=(t[0].intelligence??0)+"",T=(t[0].time??0)+"",S=(t[0].fun??0)+"",I=t[0].skill&&Gr(t),O=t[0].chapters&&Wr(t),R=t[0].martial_art&&zr(t),A=t[1].size&&function(t){let e,n,r,o,i=[...t[1].entries()].sort(Jr),l=[];for(let e=0;e<i.length;e+=1)l[e]=Yr(Hr(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Recipes",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(2&e){let n;for(i=[...t[1].entries()].sort(Jr),n=0;n<i.length;n+=1){const o=Hr(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Yr(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Book",r=_(),o=h("dl"),I&&I.c(),i=h("dt"),i.textContent="Required Intelligence",l=h("dd"),s=g(E),a=h("dt"),a.textContent="Read Time",c=h("dd"),u=g(T),v=h("dt"),v.textContent="Fun",$=h("dd"),w=g(S),O&&O.c(),x=y(),R&&R.c(),C=y(),A&&A.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),I&&I.m(o,null),d(o,i),d(o,l),d(l,s),d(o,a),d(o,c),d(c,u),d(o,v),d(o,$),d($,w),O&&O.m(o,null),d(o,x),R&&R.m(o,null),d(o,C),A&&A.m(o,null),k=!0},p(t,[e]){t[0].skill?I?(I.p(t,e),1&e&&W(I,1)):(I=Gr(t),I.c(),W(I,1),I.m(o,i)):I&&(H(),z(I,1,1,(()=>{I=null})),G()),(!k||1&e)&&E!==(E=(t[0].intelligence??0)+"")&&b(s,E),(!k||1&e)&&T!==(T=(t[0].time??0)+"")&&b(u,T),(!k||1&e)&&S!==(S=(t[0].fun??0)+"")&&b(w,S),t[0].chapters?O?O.p(t,e):(O=Wr(t),O.c(),O.m(o,x)):O&&(O.d(1),O=null),t[0].martial_art?R?(R.p(t,e),1&e&&W(R,1)):(R=zr(t),R.c(),W(R,1),R.m(o,C)):R&&(H(),z(R,1,1,(()=>{R=null})),G()),t[1].size&&A.p(t,e)},i(t){k||(W(I),W(R),W(A),k=!0)},o(t){z(I),z(R),z(A),k=!1},d(t){t&&p(e),I&&I.d(),O&&O.d(),R&&R.d(),A&&A.d()}}}const Jr=(t,e)=>t[1]!==e[1]?t[1]-e[1]:t[0].localeCompare(e[0]);function Kr(t,e,n){var r;let{item:o}=e,i=I("data");const l=new Map;function s(t,e){var n;l.set(t,Math.min(e,null!==(n=l.get(t))&&void 0!==n?n:1/0))}for(const t of i.byType("recipe"))if(Array.isArray(t.book_learn))for(const[e,n=0]of t.book_learn)if(e===o.id)s(t.result,n);else if(t.book_learn)for(const[e,n]of Object.entries(t.book_learn))e===o.id&&s(t.result,null!==(r=n.skill_level)&&void 0!==r?r:0);return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,l]}class Xr extends tt{constructor(t){super(),Q(this,t,Kr,Vr,i,{item:0})}}function Zr(t,e,n){const r=t.slice();return r[1]=e[n][0],r[2]=e[n][1],r[4]=n,r}function Qr(t){let e,n,r,o=t[0].vitamins,i=[];for(let e=0;e<o.length;e+=1)i[e]=no(Zr(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("dt"),e.textContent="Vitamins (%RDA)",n=h("dd");for(let t=0;t<i.length;t+=1)i[t].c()},m(t,o){f(t,e,o),f(t,n,o);for(let t=0;t<i.length;t+=1)i[t].m(n,null);r=!0},p(t,e){if(1&e){let r;for(o=t[0].vitamins,r=0;r<o.length;r+=1){const l=Zr(t,o,r);i[r]?(i[r].p(l,e),W(i[r],1)):(i[r]=no(l),i[r].c(),W(i[r],1),i[r].m(n,null))}for(H(),r=o.length;r<i.length;r+=1)l(r);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),t&&p(n),m(i,t)}}}function to(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function eo(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function no(t){let e,n,r,o,i,l,s=t[2]+"";function a(t,e){return t[4]<t[0].vitamins.length-2?eo:t[4]===t[0].vitamins.length-2?to:void 0}e=new Nt({props:{id:t[1],type:"vitamin"}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g("%)"),u&&u.c(),i=y()},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),u&&u.m(t,s),f(t,i,s),l=!0},p(t,n){const o={};1&n&&(o.id=t[1]),e.$set(o),(!l||1&n)&&s!==(s=t[2]+"")&&b(r,s),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function ro(t){let e,n,r,o,i,l,s,a,c,u,m,y,v,$,w,x,C,k,E,T,S,I,O,R,A=(t[0].calories??0)+"",M=(t[0].quench??0)+"",N=(t[0].fun??0)+"",B=(t[0].charges??1)+"",D=(t[0].spoils_in??"never")+"",q=(t[0].healthy??0)+"",L=t[0].vitamins&&Qr(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Comestible",r=_(),o=h("dl"),i=h("dt"),i.textContent="Calories",l=h("dd"),s=g(A),a=g(" kcal"),c=h("dt"),c.textContent="Quench",u=h("dd"),m=g(M),y=h("dt"),y.textContent="Enjoyability",v=h("dd"),$=g(N),w=h("dt"),w.textContent="Portions",x=h("dd"),C=g(B),k=h("dt"),k.textContent="Spoils In",E=h("dd"),T=g(D),S=h("dt"),S.textContent="Health",I=h("dd"),O=g(q),L&&L.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,l),d(l,s),d(l,a),d(o,c),d(o,u),d(u,m),d(o,y),d(o,v),d(v,$),d(o,w),d(o,x),d(x,C),d(o,k),d(o,E),d(E,T),d(o,S),d(o,I),d(I,O),L&&L.m(o,null),R=!0},p(t,[e]){(!R||1&e)&&A!==(A=(t[0].calories??0)+"")&&b(s,A),(!R||1&e)&&M!==(M=(t[0].quench??0)+"")&&b(m,M),(!R||1&e)&&N!==(N=(t[0].fun??0)+"")&&b($,N),(!R||1&e)&&B!==(B=(t[0].charges??1)+"")&&b(C,B),(!R||1&e)&&D!==(D=(t[0].spoils_in??"never")+"")&&b(T,D),(!R||1&e)&&q!==(q=(t[0].healthy??0)+"")&&b(O,q),t[0].vitamins?L?(L.p(t,e),1&e&&W(L,1)):(L=Qr(t),L.c(),W(L,1),L.m(o,null)):L&&(H(),z(L,1,1,(()=>{L=null})),G())},i(t){R||(W(L),R=!0)},o(t){z(L),R=!1},d(t){t&&p(e),L&&L.d()}}}function oo(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class io extends tt{constructor(t){super(),Q(this,t,oo,ro,i,{item:0})}}function lo(t){let e,n,r,o;return e=new Qt({props:{item:t[12]}}),r=new Nt({props:{type:t[12].type,id:t[12].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};4096&n&&(o.item=t[12]),e.$set(o);const i={};4096&n&&(i.type=t[12].type),4096&n&&(i.id=t[12].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function so(t){let e,n,r,o;return e=new Qt({props:{item:t[12]}}),r=new Nt({props:{type:t[12].type,id:t[12].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};4096&n&&(o.item=t[12]),e.$set(o);const i={};4096&n&&(i.type=t[12].type),4096&n&&(i.id=t[12].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function ao(t){let e,n,r,o;return e=new Qt({props:{item:t[0].byId("item",t[12])}}),r=new Nt({props:{type:"item",id:t[12]}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};4096&n&&(o.item=t[0].byId("item",t[12])),e.$set(o);const i={};4096&n&&(i.id=t[12]),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function co(t){let e,n,r,o;return e=new Qt({props:{item:t[0].byId("item",t[12])}}),r=new Nt({props:{type:"item",id:t[12]}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};4096&n&&(o.item=t[0].byId("item",t[12])),e.$set(o);const i={};4096&n&&(i.id=t[12]),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function uo(t){let e,n,r,o,i,l=t[1].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1],$$slots:{default:[lo,({item:t})=>({12:t}),({item:t})=>t?4096:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Provided By Vehicle Parts",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};12288&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),s=t[2].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[2],$$slots:{default:[so,({item:t})=>({12:t}),({item:t})=>t?4096:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Provided By Furniture",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};12288&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),a=t[3].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[3],$$slots:{default:[ao,({item:t})=>({12:t}),({item:t})=>t?4096:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Component Of",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};12288&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),c=t[4].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[4],$$slots:{default:[co,({item:t})=>({12:t}),({item:t})=>t?4096:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Tool For Crafting",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};12288&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){l&&l.c(),e=_(),s&&s.c(),n=_(),r=h("div"),a&&a.c(),o=_(),c&&c.c(),$(r,"class","side-by-side")},m(t,u){l&&l.m(t,u),f(t,e,u),s&&s.m(t,u),f(t,n,u),f(t,r,u),a&&a.m(r,null),d(r,o),c&&c.m(r,null),i=!0},p(t,[e]){t[1].length&&l.p(t,e),t[2].length&&s.p(t,e),t[3].length&&a.p(t,e),t[4].length&&c.p(t,e)},i(t){i||(W(l),W(s),W(a),W(c),i=!0)},o(t){z(l),z(s),z(a),z(c),i=!1},d(t){l&&l.d(t),t&&p(e),s&&s.d(t),t&&p(n),t&&p(r),a&&a.d(),c&&c.d()}}}function fo(t,e,n){var r,o;let{item_id:i}=e;const l=I("data"),{byTool:s,byComponent:a}=l.getItemComponents(),c=null!==(r=a.get(i))&&void 0!==r?r:new Set,u=null!==(o=s.get(i))&&void 0!==o?o:new Set,d=l.byType("vehicle_part").filter((t=>{var e;return t.id&&(null===(e=t.pseudo_tools)||void 0===e?void 0:e.some((t=>t.id===i)))})),f=l.byType("furniture").filter((t=>t.id&&t.crafting_pseudo_item===i)),p=[...c].sort(((t,e)=>st(l.byId("item",t)).localeCompare(st(l.byId("item",e))))),m=[...u].sort(((t,e)=>st(l.byId("item",t)).localeCompare(st(l.byId("item",e)))));return t.$$set=t=>{"item_id"in t&&n(5,i=t.item_id)},[l,d,f,p,m,i]}class po extends tt{constructor(t){super(),Q(this,t,fo,uo,i,{item_id:5})}}function mo(t){let e,n,r,o,i;return n=new Qt({props:{item:t[0].byId(t[3].pre_terrain.startsWith("f_")?"furniture":"terrain",t[3].pre_terrain)}}),o=new Nt({props:{type:t[3].pre_terrain.startsWith("f_")?"furniture":"terrain",id:t[3].pre_terrain}}),{c(){e=g("on "),J(n.$$.fragment),r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),K(n,t,l),f(t,r,l),K(o,t,l),i=!0},p(t,e){const r={};8&e&&(r.item=t[0].byId(t[3].pre_terrain.startsWith("f_")?"furniture":"terrain",t[3].pre_terrain)),n.$set(r);const i={};8&e&&(i.type=t[3].pre_terrain.startsWith("f_")?"furniture":"terrain"),8&e&&(i.id=t[3].pre_terrain),o.$set(i)},i(t){i||(W(n.$$.fragment,t),W(o.$$.fragment,t),i=!0)},o(t){z(n.$$.fragment,t),z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(n,t),t&&p(r),X(o,t)}}}function ho(t){let e,n,r,o;e=new Nt({props:{id:t[3].group,type:"construction_group"}});let i=t[3].pre_terrain&&mo(t);return{c(){J(e.$$.fragment),n=_(),i&&i.c(),r=y()},m(t,l){K(e,t,l),f(t,n,l),i&&i.m(t,l),f(t,r,l),o=!0},p(t,n){const o={};8&n&&(o.id=t[3].group),e.$set(o),t[3].pre_terrain?i?(i.p(t,n),8&n&&W(i,1)):(i=mo(t),i.c(),W(i,1),i.m(r.parentNode,r)):i&&(H(),z(i,1,1,(()=>{i=null})),G())},i(t){o||(W(e.$$.fragment,t),W(i),o=!0)},o(t){z(e.$$.fragment,t),z(i),o=!1},d(t){X(e,t),t&&p(n),i&&i.d(t),t&&p(r)}}}function go(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1],$$slots:{default:[ho,({item:t})=>({3:t}),({item:t})=>t?8:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Construct",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};24&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function _o(t,e,n){let{item_id:r}=e;const o=I("data"),i=o.byType("construction").filter((t=>o.flattenItemGroup(o.normalizeItemGroup(t.byproducts,"collection")).some((t=>t.id===r)))).sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[o,i,r]}class yo extends tt{constructor(t){super(),Q(this,t,_o,go,i,{item_id:2})}}function vo(t){let e,n,r,o;return e=new Qt({props:{item:t[0].byId(t[3].type,t[3].id)}}),r=new Nt({props:{id:t[3].id,type:t[3].type}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};8&n&&(o.item=t[0].byId(t[3].type,t[3].id)),e.$set(o);const i={};8&n&&(i.id=t[3].id),8&n&&(i.type=t[3].type),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function $o(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1],$$slots:{default:[vo,({item:t})=>({3:t}),({item:t})=>t?8:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Deconstruct",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};24&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function bo(t,e,n){let{item_id:r}=e;const o=I("data");let i=o.byType("terrain").concat(o.byType("furniture")).filter((t=>{var e;return((null===(e=t.deconstruct)||void 0===e?void 0:e.items)?o.flattenItemGroup({subtype:"collection",entries:"string"==typeof t.deconstruct.items?[{group:t.deconstruct.items}]:t.deconstruct.items}):[]).some((({id:t})=>t===r))})).sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[o,i,r]}class wo extends tt{constructor(t){super(),Q(this,t,bo,$o,i,{item_id:2})}}function xo(t){let e,n,r,o;return e=new Qt({props:{item:t[0].byId("item",t[4])}}),r=new Nt({props:{type:"item",id:t[4]}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};16&n&&(o.item=t[0].byId("item",t[4])),e.$set(o);const i={};16&n&&(i.id=t[4]),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Co(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1],$$slots:{default:[xo,({item:t})=>({4:t}),({item:t})=>t?16:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Disassemble",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};48&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function ko(t,e,n){let{item_id:r}=e,o=I("data");const i=new Set;for(const t of o.byType("recipe").concat(o.byType("uncraft")))if(t.result&&(t.reversible||"uncraft"===t.type)){(t.using?Array.isArray(t.using)?t.using:[[t.using,1]]:[]).map((([t,e])=>[o.byId("requirement",t),e])).concat([[t,1]]).flatMap((([t,e])=>{var n;return o.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components),{onlyRecoverable:!0}).map((t=>t.map((t=>({...t,count:t.count*e})))))})).map((t=>t[0])).some((t=>t.id===r))&&i.add(t.result)}const l=[...i].sort(((t,e)=>st(o.byId("item",t)).localeCompare(st(o.byId("item",e)))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[o,l,r]}class Eo extends tt{constructor(t){super(),Q(this,t,ko,Co,i,{item_id:2})}}function To(t){let e,n,r,o,i,l,s,a=ct(t[8].prob)+"";return e=new Qt({props:{item:t[0].byId("monster",t[8].id)}}),r=new Nt({props:{type:"monster",id:t[8].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment),o=g(" ("),i=g(a),l=g(")")},m(t,a){K(e,t,a),f(t,n,a),K(r,t,a),f(t,o,a),f(t,i,a),f(t,l,a),s=!0},p(t,n){const o={};256&n&&(o.item=t[0].byId("monster",t[8].id)),e.$set(o);const l={};256&n&&(l.id=t[8].id),r.$set(l),(!s||256&n)&&a!==(a=ct(t[8].prob)+"")&&b(i,a)},i(t){s||(W(e.$$.fragment,t),W(r.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),t&&p(l)}}}function So(t){let e,n,r,o;return e=new Qt({props:{item:t[7]}}),r=new Nt({props:{id:t[7].id,type:"monster"}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};128&n&&(o.item=t[7]),e.$set(o);const i={};128&n&&(i.id=t[7].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Io(t){let e,n,r,o;return e=new Qt({props:{item:t[7]}}),r=new Nt({props:{id:t[7].id,type:"monster"}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};128&n&&(o.item=t[7]),e.$set(o);const i={};128&n&&(i.id=t[7].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Oo(t){let e,n,r,o,i=t[1].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1],$$slots:{default:[To,({item:t})=>({8:t}),({item:t})=>t?256:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Dropped By",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};768&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),l=t[2].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[2],$$slots:{default:[So,({item:t})=>({7:t}),({item:t})=>t?128:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Butcher",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};640&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),s=t[3].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[3],$$slots:{default:[Io,({item:t})=>({7:t}),({item:t})=>t?128:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Dissect",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};640&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){i&&i.c(),e=_(),l&&l.c(),n=_(),s&&s.c(),r=y()},m(t,a){i&&i.m(t,a),f(t,e,a),l&&l.m(t,a),f(t,n,a),s&&s.m(t,a),f(t,r,a),o=!0},p(t,[e]){t[1].length&&i.p(t,e),t[2].length&&l.p(t,e),t[3].length&&s.p(t,e)},i(t){o||(W(i),W(l),W(s),o=!0)},o(t){z(i),z(l),z(s),o=!1},d(t){i&&i.d(t),t&&p(e),l&&l.d(t),t&&p(n),s&&s.d(t),t&&p(r)}}}function Ro(t,e,n){let{item_id:r}=e,o=I("data");const i=o.byType("monster").flatMap((t=>{if(!t.id)return[];const e=o.flatDeathDrops(t.id).find((t=>t.id===r));return e?[{id:t.id,prob:e.prob}]:[]}));i.sort(((t,e)=>e.prob-t.prob));const l=o.byType("harvest").filter((t=>(t=>{var e,n;return null!==(n=null===(e=t.entries)||void 0===e?void 0:e.flatMap((t=>{var e;return t.type&&(null===(e=o.byId("harvest_drop_type",t.type))||void 0===e?void 0:e.group)?o.flattenItemGroup(o.byId("item_group",t.drop)).map((t=>t.id)):[t.drop]})))&&void 0!==n?n:[]})(t).some((t=>t===r)))),s=o.byType("monster").filter((t=>t.id&&l.some((e=>e.id===t.harvest)))),a=o.byType("monster").filter((t=>t.id&&l.some((e=>e.id===t.dissect))));return t.$$set=t=>{"item_id"in t&&n(4,r=t.item_id)},[o,i,s,a,r]}class Ao extends tt{constructor(t){super(),Q(this,t,Ro,Oo,i,{item_id:4})}}function Mo(t,e,n){const r=t.slice();return r[6]=e[n][0],r[7]=e[n][1],r}function No(e){let n,r,o=e[6]+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Bo(t){let e,n,r,o,i,l;e=new Qt({props:{item:t[5]}}),r=new Nt({props:{type:"terrain",id:t[5].id}});let s=t[0],a=[];for(let e=0;e<s.length;e+=1)a[e]=No(Mo(t,s,e));return{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment),o=g(" in\n      "),i=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();$(i,"class","comma-separated or")},m(t,s){K(e,t,s),f(t,n,s),K(r,t,s),f(t,o,s),f(t,i,s);for(let t=0;t<a.length;t+=1)a[t].m(i,null);l=!0},p(t,n){const o={};32&n&&(o.item=t[5]),e.$set(o);const l={};if(32&n&&(l.id=t[5].id),r.$set(l),1&n){let e;for(s=t[0],e=0;e<s.length;e+=1){const r=Mo(t,s,e);a[e]?a[e].p(r,n):(a[e]=No(r),a[e].c(),a[e].m(i,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=s.length}},i(t){l||(W(e.$$.fragment,t),W(r.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),m(a,t)}}}function Do(t){let e,n,r=t[0].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1],$$slots:{default:[Bo,({item:t})=>({5:t}),({item:t})=>t?32:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Forage",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};1056&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function qo(t,e,n){let{item_id:r}=e,o=I("data");const i={Spring:"forage_spring",Summer:"forage_summer",Autumn:"forage_autumn",Winter:"forage_winter","any season":"trash_forest"},l=Object.keys(i).map((t=>{var e;return[t,null===(e=o.flattenItemGroup(o.byId("item_group",i[t])).find((t=>t.id===r)))||void 0===e?void 0:e.prob]})).filter((t=>t[1])),s=o.byType("terrain").filter((t=>"shrub_wildveggies"===t.examine_action));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[l,s,r]}class Lo extends tt{constructor(t){super(),Q(this,t,qo,Do,i,{item_id:2})}}function jo(t){let e,n,r,o,i,l,s,a=(t[3].seed_data.grow??"1 day")+"";return e=new Qt({props:{item:t[3]}}),r=new Nt({props:{id:t[3].id,type:"item"}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment),o=g(" ("),i=g(a),l=g(")")},m(t,a){K(e,t,a),f(t,n,a),K(r,t,a),f(t,o,a),f(t,i,a),f(t,l,a),s=!0},p(t,n){const o={};8&n&&(o.item=t[3]),e.$set(o);const l={};8&n&&(l.id=t[3].id),r.$set(l),(!s||8&n)&&a!==(a=(t[3].seed_data.grow??"1 day")+"")&&b(i,a)},i(t){s||(W(e.$$.fragment,t),W(r.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),t&&p(l)}}}function Po(t){let e,n,r=t[0].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[0],$$slots:{default:[jo,({item:t})=>({3:t}),({item:t})=>t?8:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Grown From",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};24&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Fo(t,e,n){let{item_id:r}=e;const o=I("data").byType("item").filter((t=>{var e;return!(!t.id||!t.seed_data)&&(t.seed_data.fruit===r||(null===(e=t.seed_data.byproducts)||void 0===e?void 0:e.includes(r)))}));return t.$$set=t=>{"item_id"in t&&n(1,r=t.item_id)},[o,r]}class Uo extends tt{constructor(t){super(),Q(this,t,Fo,Po,i,{item_id:1})}}function Ho(t){let e,n,r,o=t[0].min_strength+"";return{c(){e=h("dt"),e.textContent="Min Strength",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].min_strength+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Go(t){let e,n,r,o,i=t[0].valid_mod_locations.map(zo).join(", ")+"";return{c(){e=h("dt"),e.textContent="Mod Slots",n=h("dd"),r=g(i),o=_()},m(t,i){f(t,e,i),f(t,n,i),d(n,r),d(n,o)},p(t,e){1&e&&i!==(i=t[0].valid_mod_locations.map(zo).join(", ")+"")&&b(r,i)},d(t){t&&p(e),t&&p(n)}}}function Wo(t){let e,n,r,o,i,l,s,a,c,u,m,y,v,w,x,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,H,G,Y,V,Z=(t[0].range??0)+"",Q=(t[0].dispersion??0)+"",tt=((t[0].flags??[]).includes("DISABLE_SIGHTS")?90:t[0].sight_dispersion??30)+"",et=(t[0].recoil??0)+"",nt=(t[0].loudness??0)+"",rt=(t[0].reload??100)+"",ot=(t[0].reload_noise_volume??0)+"",it=(t[0].durability??0)+"";s=new Nt({props:{type:"skill",id:t[0].skill}});let lt=t[0].min_strength&&Ho(t),st=t[0].valid_mod_locations?.length&&Go(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Ranged",r=_(),o=h("dl"),i=h("dt"),i.textContent="Skill",l=h("dd"),J(s.$$.fragment),lt&&lt.c(),a=h("dt"),a.textContent="Base Damage",c=h("dd"),c.textContent=`${t[1].amount??0} (${t[1].damage_type??"bullet"})\n    `,u=h("dt"),u.textContent="Armor Penetration",m=h("dd"),m.textContent=`${t[1].armor_penetration??0}`,y=h("dt"),y.textContent="Range Bonus",v=h("dd"),w=g(Z),x=h("dt"),x.textContent="Base Dispersion",C=h("dd"),k=g(Q),E=h("dt"),E.textContent="Sight Dispersion",T=h("dd"),S=g(tt),I=_(),O=h("dt"),O.textContent="Base Recoil",R=h("dd"),A=g(et),M=h("dt"),M.textContent="Loudness Modifier\n    ",N=h("dd"),B=g(nt),D=h("dt"),D.textContent="Reload Time",q=h("dd"),L=g(rt),j=g(" moves"),P=h("dt"),P.textContent="Reload Noise Volume\n    ",F=h("dd"),U=g(ot),st&&st.c(),H=h("dt"),H.textContent="Durability",G=h("dd"),Y=g(it),$(y,"title","Added to ammo range"),$(x,"title","Added to ammo dispersion"),$(M,"title","Modifies base loudness as provided by the currently loaded ammo"),$(P,"title","Volume of the noise made when reloading this weapon")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,l),K(s,l,null),lt&&lt.m(o,null),d(o,a),d(o,c),d(o,u),d(o,m),d(o,y),d(o,v),d(v,w),d(o,x),d(o,C),d(C,k),d(o,E),d(o,T),d(T,S),d(T,I),d(o,O),d(o,R),d(R,A),d(o,M),d(o,N),d(N,B),d(o,D),d(o,q),d(q,L),d(q,j),d(o,P),d(o,F),d(F,U),st&&st.m(o,null),d(o,H),d(o,G),d(G,Y),V=!0},p(t,[e]){const n={};1&e&&(n.id=t[0].skill),s.$set(n),t[0].min_strength?lt?lt.p(t,e):(lt=Ho(t),lt.c(),lt.m(o,a)):lt&&(lt.d(1),lt=null),(!V||1&e)&&Z!==(Z=(t[0].range??0)+"")&&b(w,Z),(!V||1&e)&&Q!==(Q=(t[0].dispersion??0)+"")&&b(k,Q),(!V||1&e)&&tt!==(tt=((t[0].flags??[]).includes("DISABLE_SIGHTS")?90:t[0].sight_dispersion??30)+"")&&b(S,tt),(!V||1&e)&&et!==(et=(t[0].recoil??0)+"")&&b(A,et),(!V||1&e)&&nt!==(nt=(t[0].loudness??0)+"")&&b(B,nt),(!V||1&e)&&rt!==(rt=(t[0].reload??100)+"")&&b(L,rt),(!V||1&e)&&ot!==(ot=(t[0].reload_noise_volume??0)+"")&&b(U,ot),t[0].valid_mod_locations?.length?st?st.p(t,e):(st=Go(t),st.c(),st.m(o,H)):st&&(st.d(1),st=null),(!V||1&e)&&it!==(it=(t[0].durability??0)+"")&&b(Y,it)},i(t){V||(W(s.$$.fragment,t),V=!0)},o(t){z(s.$$.fragment,t),V=!1},d(t){t&&p(e),X(s),lt&&lt.d(),st&&st.d()}}}const zo=([t,e])=>`${t} (${e})`;function Yo(t,e,n){var r;let{item:o}=e;const i=Array.isArray(o.ranged_damage)?o.ranged_damage[0]:o.ranged_damage&&"values"in o.ranged_damage?o.ranged_damage.values[0]:null!==(r=o.ranged_damage)&&void 0!==r?r:{amount:0,damage_type:"bullet",armor_penetration:0};return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,i]}class Vo extends tt{constructor(t){super(),Q(this,t,Yo,Wo,i,{item:0})}}function Jo(t){let e,n,r,o;return e=new Qt({props:{item:t[3]}}),r=new Nt({props:{type:t[3].type,id:t[3].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};8&n&&(o.item=t[3]),e.$set(o);const i={};8&n&&(i.type=t[3].type),8&n&&(i.id=t[3].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Ko(t){let e,n,r=t[0].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[0],$$slots:{default:[Jo,({item:t})=>({3:t}),({item:t})=>t?8:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Harvest",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};24&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Xo(t,e,n){let{item_id:r}=e;const o=I("data"),i=o.byType("terrain").concat(o.byType("furniture")).filter((t=>{var e;return(null!==(e=t.harvest_by_season)&&void 0!==e?e:[]).some((t=>o.byId("harvest",t.id).entries.some((t=>"bionic_group"===t.type?o.flattenItemGroup(o.byId("item_group",t.drop)).some((t=>t.id===r)):t.drop===r))))}));return i.sort(((t,e)=>st(t).localeCompare(st(e)))),t.$$set=t=>{"item_id"in t&&n(1,r=t.item_id)},[i,r]}class Zo extends tt{constructor(t){super(),Q(this,t,Xo,Ko,i,{item_id:1})}}function Qo(t,e,n){const r=t.slice();return r[15]=e[n],r}function ti(t){let e,n,r,o,i,l,s,a,c,u,y,v,w,x,C,k,E,T=(t[0].bashing??0)+"",S=(t[0].cutting??0)+"",I=t[3](t[0])+"";let O=function(t,e){return t[4]?ni:ei}(t)(t),R=t[1].length&&function(t){let e,n,r,o,i=t[1],l=[];for(let e=0;e<i.length;e+=1)l[e]=ri(Qo(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Techniques",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();$(r,"class","no-bullets")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(2&e){let n;for(i=t[1],n=0;n<i.length;n+=1){const o=Qo(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=ri(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Melee",r=_(),o=h("dl"),i=h("dt"),i.textContent="Bash",l=h("dd"),s=g(T),a=h("dt"),O.c(),c=_(),u=h("dd"),y=g(S),v=h("dt"),v.textContent="To Hit",w=h("dd"),w.textContent=`${t[2]}`,x=h("dt"),x.textContent="Moves Per Attack",C=h("dd"),k=g(I),R&&R.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,l),d(l,s),d(o,a),O.m(a,null),d(a,c),d(o,u),d(u,y),d(o,v),d(o,w),d(o,x),d(o,C),d(C,k),R&&R.m(o,null),E=!0},p(t,e){(!E||1&e)&&T!==(T=(t[0].bashing??0)+"")&&b(s,T),(!E||1&e)&&S!==(S=(t[0].cutting??0)+"")&&b(y,S),(!E||1&e)&&I!==(I=t[3](t[0])+"")&&b(k,I),t[1].length&&R.p(t,e)},i(t){E||(W(R),E=!0)},o(t){z(R),E=!1},d(t){t&&p(e),O.d(),R&&R.d()}}}function ei(t){let e;return{c(){e=g("Cut")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ni(t){let e;return{c(){e=g("Pierce")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ri(e){let n,r,o,i,l,s,a,c=it(e[15].description)+"";return o=new Nt({props:{type:"technique",id:e[15].id}}),{c(){n=h("li"),r=h("strong"),J(o.$$.fragment),i=g(": "),l=g(c),s=_()},m(t,e){f(t,n,e),d(n,r),K(o,r,null),d(n,i),d(n,l),d(n,s),a=!0},p:t,i(t){a||(W(o.$$.fragment,t),a=!0)},o(t){z(o.$$.fragment,t),a=!1},d(t){t&&p(n),X(o)}}}function oi(t){let e,n,r=(t[0].bashing||t[0].cutting)&&ti(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[n]){t[0].bashing||t[0].cutting?r?(r.p(t,n),1&n&&W(r,1)):(r=ti(t),r.c(),W(r,1),r.m(e.parentNode,e)):r&&(H(),z(r,1,1,(()=>{r=null})),G())},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function ii(t,e,n){var r,o,i,l;let s=I("data"),{item:a}=e,c=(null!==(r=a.techniques)&&void 0!==r?r:[]).map((t=>s.byId("technique",t)));const u={bad:0,none:1,solid:2,weapon:3},d={hand:0,short:1,long:2},f={point:0,line:1,any:2,every:3},p={clumsy:0,uneven:1,neutral:2,good:3},m="object"==typeof a.to_hit?(({grip:t="weapon",length:e="hand",surface:n="any",balance:r="neutral"})=>-7+u[t]+d[e]+f[n]+p[r])(a.to_hit):null!==(o=a.to_hit)&&void 0!==o?o:0;const h=(null!==(i=a.flags)&&void 0!==i?i:[]).includes("SPEAR")||(null!==(l=a.flags)&&void 0!==l?l:[]).includes("STAB");return t.$$set=t=>{"item"in t&&n(0,a=t.item)},[a,c,m,function(t){return Math.floor(65+(Math.floor(ut(t.volume)/62.5)+Math.floor(dt(t.weight)/60)))},h]}class li extends tt{constructor(t){super(),Q(this,t,ii,oi,i,{item:0})}}function si(t,e,n){const r=t.slice();return r[6]=e[n],r}function ai(t,e,n){const r=t.slice();return r[9]=e[n].id,r[10]=e[n].count,r[12]=n,r}function ci(t,e,n){const r=t.slice();return r[13]=e[n],r}function ui(t,e,n){const r=t.slice();return r[16]=e[n],r[12]=n,r}function di(t,e,n){const r=t.slice();return r[18]=e[n],r}function fi(t,e,n){const r=t.slice();return r[21]=e[n],r[12]=n,r}function pi(e){let n,r,o,i,l,s,a,c,u,d,m,h=(e[21].amount??1)+"",y=1===(e[21].amount??1)?"":"s",v=e[21].level+"",$=0!==e[12]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return s=new Nt({props:{type:"tool_quality",id:e[21].id}}),{c(){$&&$.c(),n=_(),r=g(h),o=g(" tool"),i=g(y),l=g("\n            with "),J(s.$$.fragment),a=g(" of "),c=g(v),u=g("\n            or more"),d=g("")},m(t,e){$&&$.m(t,e),f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,l,e),K(s,t,e),f(t,a,e),f(t,c,e),f(t,u,e),f(t,d,e),m=!0},p:t,i(t){m||(W(s.$$.fragment,t),m=!0)},o(t){z(s.$$.fragment,t),m=!1},d(t){$&&$.d(t),t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(l),X(s,t),t&&p(a),t&&p(c),t&&p(u),t&&p(d)}}}function mi(t){let e,n,r,o=t[18],i=[];for(let e=0;e<o.length;e+=1)i[e]=pi(fi(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=g(".")},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(4&r){let s;for(o=t[18],s=0;s<o.length;s+=1){const l=fi(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=pi(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function hi(e){let n,r;return n=new Nt({props:{type:"item",id:e[16].id}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function gi(e){let n,r,o=st(e[0].byId("item",e[16].id))+"";return{c(){n=h("a"),r=g(o),$(n,"href","#/furniture/"+e[0].craftingPseudoItem(e[16].id))},m(t,e){f(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function _i(e){let n,r,o,i,l=e[16].count+"",s=1!==e[16].count&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("("),r=g(l),o=g(" charge"),s&&s.c(),i=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),s&&s.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),s&&s.d(t),t&&p(i)}}}function yi(t){let e,n,r,o,i,l,s=0!==t[12]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();const a=[gi,hi],c=[];n=function(t,e){return t[0].craftingPseudoItem(t[16].id)?0:1}(t),r=c[n]=a[n](t);let u=t[16].count>0&&_i(t);return{c(){s&&s.c(),e=_(),r.c(),o=_(),u&&u.c(),i=y()},m(t,r){s&&s.m(t,r),f(t,e,r),c[n].m(t,r),f(t,o,r),u&&u.m(t,r),f(t,i,r),l=!0},p(t,e){r.p(t,e),t[16].count>0&&u.p(t,e)},i(t){l||(W(r),l=!0)},o(t){z(r),l=!1},d(t){s&&s.d(t),t&&p(e),c[n].d(t),t&&p(o),u&&u.d(t),t&&p(i)}}}function vi(t){let e,n,r,o=t[13],i=[];for(let e=0;e<o.length;e+=1)i[e]=yi(ui(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=_()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(3&r){let s;for(o=t[13],s=0;s<o.length;s+=1){const l=ui(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=yi(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function $i(e){let n,r,o,i=0!==e[12]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return r=new Nt({props:{type:"item",id:e[9],count:e[10]}}),{c(){i&&i.c(),n=_(),J(r.$$.fragment)},m(t,e){i&&i.m(t,e),f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){i&&i.d(t),t&&p(n),X(r,t)}}}function bi(t){let e,n,r,o=t[6].map(t[5]),i=[];for(let e=0;e<o.length;e+=1)i[e]=$i(ai(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=_()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(9&r){let s;for(o=t[6].map(t[5]),s=0;s<o.length;s+=1){const l=ai(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=$i(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function wi(t){let e,n,r,o=((t[2]??[]).length||t[1].length)&&function(t){let e,n,r,o,i,l,s=t[2]??[],a=[];for(let e=0;e<s.length;e+=1)a[e]=mi(di(t,s,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));let u=t[1],g=[];for(let e=0;e<u.length;e+=1)g[e]=vi(ci(t,u,e));const y=t=>z(g[t],1,1,(()=>{g[t]=null}));return{c(){e=h("dt"),e.textContent="Tools Required",n=_(),r=h("dd"),o=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();i=_();for(let t=0;t<g.length;t+=1)g[t].c()},m(t,s){f(t,e,s),f(t,n,s),f(t,r,s),d(r,o);for(let t=0;t<a.length;t+=1)a[t].m(o,null);d(o,i);for(let t=0;t<g.length;t+=1)g[t].m(o,null);l=!0},p(t,e){if(4&e){let n;for(s=t[2]??[],n=0;n<s.length;n+=1){const r=di(t,s,n);a[n]?(a[n].p(r,e),W(a[n],1)):(a[n]=mi(r),a[n].c(),W(a[n],1),a[n].m(o,i))}for(H(),n=s.length;n<a.length;n+=1)c(n);G()}if(3&e){let n;for(u=t[1],n=0;n<u.length;n+=1){const r=ci(t,u,n);g[n]?(g[n].p(r,e),W(g[n],1)):(g[n]=vi(r),g[n].c(),W(g[n],1),g[n].m(o,null))}for(H(),n=u.length;n<g.length;n+=1)y(n);G()}},i(t){if(!l){for(let t=0;t<s.length;t+=1)W(a[t]);for(let t=0;t<u.length;t+=1)W(g[t]);l=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)z(g[t]);l=!1},d(t){t&&p(e),t&&p(n),t&&p(r),m(a,t),m(g,t)}}}(t),i=t[3].length&&function(t){let e,n,r,o,i,l=t[3],s=[];for(let e=0;e<l.length;e+=1)s[e]=bi(si(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Components",n=_(),r=h("dd"),o=h("ul");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),f(t,n,l),f(t,r,l),d(r,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(9&e){let n;for(l=t[3],n=0;n<l.length;n+=1){const r=si(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=bi(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),t&&p(r),m(s,t)}}}(t);return{c(){o&&o.c(),e=_(),i&&i.c(),n=y()},m(t,l){o&&o.m(t,l),f(t,e,l),i&&i.m(t,l),f(t,n,l),r=!0},p(t,[e]){((t[2]??[]).length||t[1].length)&&o.p(t,e),t[3].length&&i.p(t,e)},i(t){r||(W(o),W(i),r=!0)},o(t){z(o),z(i),r=!1},d(t){o&&o.d(t),t&&p(e),i&&i.d(t),t&&p(n)}}}function xi(t,e,n){let{requirement:r}=e;const o=I("data");let{tools:i,qualities:l,components:s}=o.normalizeRequirements(r);return t.$$set=t=>{"requirement"in t&&n(4,r=t.requirement)},[o,i,l,s,r,t=>({...t,item:o.byId("item",t.id)})]}class Ci extends tt{constructor(t){super(),Q(this,t,xi,wi,i,{requirement:4})}}function ki(t,e,n){const r=t.slice();return r[8]=e[n][0],r[9]=void 0!==e[n][1]?e[n][1]:0,r}function Ei(t,e,n){const r=t.slice();return r[12]=e[n][0],r[9]=e[n][1],r}function Ti(t,e,n){const r=t.slice();return r[12]=e[n][0],r[9]=e[n][1],r}function Si(t,e,n){const r=t.slice();return r[17]=e[n],r}function Ii(t,e,n){const r=t.slice();return r[20]=e[n],r}function Oi(t,e,n){const r=t.slice();return r[12]=e[n][0],r[9]=e[n][1],r[24]=n,r}function Ri(t){let e;return{c(){e=g("Craft")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ai(t){let e;return{c(){e=g("Byproduct")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Mi(t){let e,n,r,o;return r=new Nt({props:{id:t[0].result,type:"item"}}),{c(){e=h("dt"),e.textContent="Result",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].result),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function Ni(e){let n;return{c(){n=g("none")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Bi(t){let e,n,r,o,i,l=(t[0].difficulty??0)+"";return e=new Nt({props:{type:"skill",id:t[0].skill_used}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,n){const o={};1&n&&(o.id=t[0].skill_used),e.$set(o),(!i||1&n)&&l!==(l=(t[0].difficulty??0)+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function Di(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function qi(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Li(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function ji(e){let n,r,o,i,l,s,a=e[9]+"";n=new Nt({props:{type:"skill",id:e[12]}});let c=function(t,e){return t[24]===t[2].length-2?Li:t[24]!==t[2].length-1?qi:void 0}(e),u=c&&c(e);return{c(){J(n.$$.fragment),r=g(" ("),o=g(a),i=g(")"),u&&u.c(),l=y()},m(t,e){K(n,t,e),f(t,r,e),f(t,o,e),f(t,i,e),u&&u.m(t,e),f(t,l,e),s=!0},p:t,i(t){s||(W(n.$$.fragment,t),s=!0)},o(t){z(n.$$.fragment,t),s=!1},d(t){X(n,t),t&&p(r),t&&p(o),t&&p(i),u&&u.d(t),t&&p(l)}}}function Pi(e){let n,r,o,i,l;r=new Nt({props:{type:"proficiency",id:e[20].proficiency}});let s=(1!==e[20].time_multiplier||1!==e[20].fail_multiplier||1!==e[20].learning_time_multiplier)&&function(e){let n,r,o,i=[[e[20].time_multiplier,"time"],[e[20].fail_multiplier,"fail"],[e[20].learning_time_multiplier,"learning speed"]].filter(nl).map(rl).join(", ")+"";return{c(){n=g("("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=h("li"),J(r.$$.fragment),o=_(),s&&s.c(),i=_()},m(t,e){f(t,n,e),K(r,n,null),d(n,o),s&&s.m(n,null),d(n,i),l=!0},p(t,e){1===t[20].time_multiplier&&1===t[20].fail_multiplier&&1===t[20].learning_time_multiplier||s.p(t,e)},i(t){l||(W(r.$$.fragment,t),l=!0)},o(t){z(r.$$.fragment,t),l=!1},d(t){t&&p(n),X(r),s&&s.d()}}}function Fi(e){let n;return{c(){n=h("em"),n.textContent="none"},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Ui(t){let e,n,r,o,i,l=t[0].batch_time_factors[0]+"",s=t[0].batch_time_factors[1]+"",a=1===t[0].batch_time_factors[1]?"":"s";return{c(){e=g(l),n=g("% at >"),r=g(s),o=g(" unit"),i=g(a)},m(t,l){f(t,e,l),f(t,n,l),f(t,r,l),f(t,o,l),f(t,i,l)},p(t,n){1&n&&l!==(l=t[0].batch_time_factors[0]+"")&&b(e,l),1&n&&s!==(s=t[0].batch_time_factors[1]+"")&&b(r,s),1&n&&a!==(a=1===t[0].batch_time_factors[1]?"":"s")&&b(i,a)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o),t&&p(i)}}}function Hi(t){let e,n,r,o=t[0].charges+"";return{c(){e=h("dt"),e.textContent="Recipe Makes",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].charges+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Gi(t){let e,n,r,o,i,l=t[0].byproducts,s=[];for(let e=0;e<l.length;e+=1)s[e]=Wi(Si(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Byproducts",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=t[0].byproducts,n=0;n<l.length;n+=1){const o=Si(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Wi(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Wi(t){let e,n,r;return n=new Nt({props:{type:"item",id:t[17][0],count:t[17][1]??1}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[17][0]),1&e&&(r.count=t[17][1]??1),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function zi(e){let n;return{c(){n=g("no")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Yi(t){let e,n,r,o,i;const l=[Ji,Vi],s=[];function a(t,e){return 1&e&&(n=!!Array.isArray(t[0].autolearn)),n?0:1}return r=a(t,-1),o=s[r]=l[r](t),{c(){e=h("ul"),o.c(),$(e,"class","comma-separated")},m(t,n){f(t,e,n),s[r].m(e,null),i=!0},p(t,n){let i=r;r=a(t,n),r===i?s[r].p(t,n):(H(),z(s[i],1,1,(()=>{s[i]=null})),G(),o=s[r],o?o.p(t,n):(o=s[r]=l[r](t),o.c()),W(o,1),o.m(e,null))},i(t){i||(W(o),i=!0)},o(t){z(o),i=!1},d(t){t&&p(e),s[r].d()}}}function Vi(t){let e,n,r,o,i=t[0].skill_used&&Ki(t),l=t[2].length&&function(t){let e,n,r=t[2],o=[];for(let e=0;e<r.length;e+=1)o[e]=Xi(Ei(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(4&n){let l;for(r=t[2],l=0;l<r.length;l+=1){const i=Ei(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=Xi(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}(t),s=!t[0].skill_used&&!t[2].length&&Zi();return{c(){i&&i.c(),e=_(),l&&l.c(),n=_(),s&&s.c(),r=y()},m(t,a){i&&i.m(t,a),f(t,e,a),l&&l.m(t,a),f(t,n,a),s&&s.m(t,a),f(t,r,a),o=!0},p(t,n){t[0].skill_used?i?(i.p(t,n),1&n&&W(i,1)):(i=Ki(t),i.c(),W(i,1),i.m(e.parentNode,e)):i&&(H(),z(i,1,1,(()=>{i=null})),G()),t[2].length&&l.p(t,n),t[0].skill_used||t[2].length?s&&(s.d(1),s=null):s||(s=Zi(),s.c(),s.m(r.parentNode,r))},i(t){o||(W(i),W(l),o=!0)},o(t){z(i),z(l),o=!1},d(t){i&&i.d(t),t&&p(e),l&&l.d(t),t&&p(n),s&&s.d(t),t&&p(r)}}}function Ji(t){let e,n,r=t[0].autolearn,o=[];for(let e=0;e<r.length;e+=1)o[e]=Qi(Ti(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(1&n){let l;for(r=t[0].autolearn,l=0;l<r.length;l+=1){const i=Ti(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=Qi(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function Ki(t){let e,n,r,o,i,l,s=(t[0].difficulty??0)+"";return n=new Nt({props:{type:"skill",id:t[0].skill_used}}),{c(){e=h("li"),J(n.$$.fragment),r=g(" ("),o=g(s),i=g(")")},m(t,s){f(t,e,s),K(n,e,null),d(e,r),d(e,o),d(e,i),l=!0},p(t,e){const r={};1&e&&(r.id=t[0].skill_used),n.$set(r),(!l||1&e)&&s!==(s=(t[0].difficulty??0)+"")&&b(o,s)},i(t){l||(W(n.$$.fragment,t),l=!0)},o(t){z(n.$$.fragment,t),l=!1},d(t){t&&p(e),X(n)}}}function Xi(e){let n,r,o,i,l,s,a=e[9]+"";return r=new Nt({props:{type:"skill",id:e[12]}}),{c(){n=h("li"),J(r.$$.fragment),o=g(" ("),i=g(a),l=g(")")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),d(n,i),d(n,l),s=!0},p:t,i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){z(r.$$.fragment,t),s=!1},d(t){t&&p(n),X(r)}}}function Zi(t){let e;return{c(){e=h("li"),e.textContent="At birth"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Qi(t){let e,n,r,o,i,l,s=t[9]+"";return n=new Nt({props:{type:"skill",id:t[12]}}),{c(){e=h("li"),J(n.$$.fragment),r=g(" ("),o=g(s),i=g(")")},m(t,s){f(t,e,s),K(n,e,null),d(e,r),d(e,o),d(e,i),l=!0},p(t,e){const r={};1&e&&(r.id=t[12]),n.$set(r),(!l||1&e)&&s!==(s=t[9]+"")&&b(o,s)},i(t){l||(W(n.$$.fragment,t),l=!0)},o(t){z(n.$$.fragment,t),l=!1},d(t){t&&p(e),X(n)}}}function tl(e){let n,r,o,i,l,s,a,c=e[9]+"";return o=new Nt({props:{id:e[8],type:"item"}}),{c(){n=h("li"),r=h("span"),J(o.$$.fragment),i=g(" ("),l=g(c),s=g(")"),x(r,"white-space","nowrap")},m(t,e){f(t,n,e),d(n,r),K(o,r,null),d(r,i),d(r,l),d(r,s),a=!0},p:t,i(t){a||(W(o.$$.fragment,t),a=!0)},o(t){z(o.$$.fragment,t),a=!1},d(t){t&&p(n),X(o)}}}function el(t){let e,n,r,o,i,l,s,a,c,u,v,w,x,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,Y,V=(t[0].time??"0 m")+"",Z=(t[0].activity_level??"MODERATE_EXERCISE")+"",Q=JSON.stringify(t[0],null,2)+"";function tt(t,e){return t[1]?Ai:Ri}let et=tt(t),nt=et(t),rt=t[1]&&Mi(t);const ot=[Bi,Ni],it=[];function lt(t,e){return t[0].skill_used?0:1}s=lt(t),a=it[s]=ot[s](t);let st=t[2].length&&function(t){let e,n,r,o,i=t[2],l=[];for(let e=0;e<i.length;e+=1)l[e]=ji(Oi(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));let a=null;return i.length||(a=Di()),{c(){e=h("dt"),e.textContent="Other Skills",n=h("dd");for(let t=0;t<l.length;t+=1)l[t].c();a&&a.c(),r=_()},m(t,i){f(t,e,i),f(t,n,i);for(let t=0;t<l.length;t+=1)l[t].m(n,null);a&&a.m(n,null),d(n,r),o=!0},p(t,e){if(4&e){let o;for(i=t[2],o=0;o<i.length;o+=1){const s=Oi(t,i,o);l[o]?(l[o].p(s,e),W(l[o],1)):(l[o]=ji(s),l[o].c(),W(l[o],1),l[o].m(n,r))}for(H(),o=i.length;o<l.length;o+=1)s(o);G(),i.length?a&&(a.d(1),a=null):a||(a=Di(),a.c(),a.m(n,r))}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t),a&&a.d()}}}(t),at=t[4].length&&function(t){let e,n,r,o,i,l=t[4],s=[];for(let e=0;e<l.length;e+=1)s[e]=Pi(Ii(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Proficiencies",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(16&e){let n;for(l=t[4],n=0;n<l.length;n+=1){const o=Ii(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Pi(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t);function ct(t,e){return t[0].batch_time_factors?Ui:Fi}let ut=ct(t),dt=ut(t),ft=t[0].charges&&Hi(t);R=new Ci({props:{requirement:t[0]}});let pt=t[0].byproducts?.length&&Gi(t);const mt=[Yi,zi],ht=[];function gt(t,e){return t[0].autolearn?0:1}N=gt(t),B=ht[N]=mt[N](t);let _t=t[3].length&&function(t){let e,n,r,o,i=t[3],l=[];for(let e=0;e<i.length;e+=1)l[e]=tl(ki(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Written In",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(8&e){let n;for(i=t[3],n=0;n<i.length;n+=1){const o=ki(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=tl(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(t);return{c(){e=h("section"),n=h("h1"),nt.c(),r=_(),o=h("dl"),rt&&rt.c(),i=h("dt"),i.textContent="Primary Skill",l=h("dd"),a.c(),c=_(),st&&st.c(),u=y(),at&&at.c(),v=h("dt"),v.textContent="Time to Complete",w=h("dd"),x=g(V),C=h("dt"),C.textContent="Activity Level",k=h("dd"),E=g(Z),T=h("dt"),T.textContent="Batch Time Savings",S=h("dd"),dt.c(),I=_(),ft&&ft.c(),O=y(),J(R.$$.fragment),pt&&pt.c(),A=h("dt"),A.textContent="Autolearn\n    ",M=h("dd"),B.c(),D=_(),_t&&_t.c(),q=_(),L=h("details"),j=h("summary"),j.textContent="Recipe JSON",P=_(),F=h("pre"),U=g(Q),$(A,"title","Learned at these skill levels, otherwise only learnable from a book"),$(e,"class","recipe")},m(t,a){f(t,e,a),d(e,n),nt.m(n,null),d(e,r),d(e,o),rt&&rt.m(o,null),d(o,i),d(o,l),it[s].m(l,null),d(l,c),st&&st.m(o,null),d(o,u),at&&at.m(o,null),d(o,v),d(o,w),d(w,x),d(o,C),d(o,k),d(k,E),d(o,T),d(o,S),dt.m(S,null),d(S,I),ft&&ft.m(o,null),d(o,O),K(R,o,null),pt&&pt.m(o,null),d(o,A),d(o,M),ht[N].m(M,null),d(M,D),_t&&_t.m(o,null),d(e,q),d(e,L),d(L,j),d(L,P),d(L,F),d(F,U),Y=!0},p(t,[e]){et!==(et=tt(t))&&(nt.d(1),nt=et(t),nt&&(nt.c(),nt.m(n,null))),t[1]?rt?(rt.p(t,e),2&e&&W(rt,1)):(rt=Mi(t),rt.c(),W(rt,1),rt.m(o,i)):rt&&(H(),z(rt,1,1,(()=>{rt=null})),G());let r=s;s=lt(t),s===r?it[s].p(t,e):(H(),z(it[r],1,1,(()=>{it[r]=null})),G(),a=it[s],a?a.p(t,e):(a=it[s]=ot[s](t),a.c()),W(a,1),a.m(l,c)),t[2].length&&st.p(t,e),t[4].length&&at.p(t,e),(!Y||1&e)&&V!==(V=(t[0].time??"0 m")+"")&&b(x,V),(!Y||1&e)&&Z!==(Z=(t[0].activity_level??"MODERATE_EXERCISE")+"")&&b(E,Z),ut===(ut=ct(t))&&dt?dt.p(t,e):(dt.d(1),dt=ut(t),dt&&(dt.c(),dt.m(S,I))),t[0].charges?ft?ft.p(t,e):(ft=Hi(t),ft.c(),ft.m(o,O)):ft&&(ft.d(1),ft=null);const u={};1&e&&(u.requirement=t[0]),R.$set(u),t[0].byproducts?.length?pt?(pt.p(t,e),1&e&&W(pt,1)):(pt=Gi(t),pt.c(),W(pt,1),pt.m(o,A)):pt&&(H(),z(pt,1,1,(()=>{pt=null})),G());let d=N;N=gt(t),N===d?ht[N].p(t,e):(H(),z(ht[d],1,1,(()=>{ht[d]=null})),G(),B=ht[N],B?B.p(t,e):(B=ht[N]=mt[N](t),B.c()),W(B,1),B.m(M,D)),t[3].length&&_t.p(t,e),(!Y||1&e)&&Q!==(Q=JSON.stringify(t[0],null,2)+"")&&b(U,Q)},i(t){Y||(W(rt),W(a),W(st),W(at),W(R.$$.fragment,t),W(pt),W(B),W(_t),Y=!0)},o(t){z(rt),z(a),z(st),z(at),z(R.$$.fragment,t),z(pt),z(B),z(_t),Y=!1},d(t){t&&p(e),nt.d(),rt&&rt.d(),it[s].d(),st&&st.d(),at&&at.d(),dt.d(),ft&&ft.d(),X(R),pt&&pt.d(),ht[N].d(),_t&&_t.d()}}}const nl=t=>1!==t[0],rl=([t,e])=>`${t}Ã— ${e}`;function ol(t,e,n){var r,o;let{recipe:i}=e,{showResult:l=!1}=e;const s=I("data");let a=void 0===(c=i.skills_required)||0===c.length?[]:Array.isArray(c[0])?c:[c];var c;const u=Array.isArray(i.book_learn)?[...i.book_learn]:[...Object.entries(null!==(r=i.book_learn)&&void 0!==r?r:{})].map((([t,e])=>[t,e.skill_level]));u.sort(((t,e)=>{var n,r;return(null!==(n=t[1])&&void 0!==n?n:0)-(null!==(r=e[1])&&void 0!==r?r:0)}));const d=(null!==(o=i.proficiencies)&&void 0!==o?o:[]).map((t=>{const e=s.byId("proficiency",t.proficiency);return{fail_multiplier:e.default_fail_multiplier,time_multiplier:e.default_time_multiplier,learning_time_multiplier:1,...t}}));return t.$$set=t=>{"recipe"in t&&n(0,i=t.recipe),"showResult"in t&&n(1,l=t.showResult)},[i,l,a,u,d]}class il extends tt{constructor(t){super(),Q(this,t,ol,el,i,{recipe:0,showResult:1})}}function ll(t,e,n){const r=t.slice();return r[3]=e[n],r}function sl(t){let e,n,r=[],o=new Map,i=t[1];const l=t=>t[3];for(let e=0;e<i.length;e+=1){let n=ll(t,i,e),s=l(n);o.set(s,r[e]=al(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=y()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);f(t,e,o),n=!0},p(t,n){3&n&&(i=t[1],H(),r=function(t,e,n,r,o,i,l,s,a,c,u,d){let f=t.length,p=i.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const g=[],_=new Map,y=new Map;for(m=p;m--;){const t=d(o,i,m),s=n(t);let a=l.get(s);a?r&&a.p(t,e):(a=c(s,t),a.c()),_.set(s,g[m]=a),s in h&&y.set(s,Math.abs(m-h[s]))}const v=new Set,$=new Set;function b(t){W(t,1),t.m(s,u),l.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],r=e.key,o=n.key;e===n?(u=e.first,f--,p--):_.has(o)?!l.has(r)||v.has(r)?b(e):$.has(o)?f--:y.get(r)>y.get(o)?($.add(r),b(e)):(v.add(o),f--):(a(n,l),f--)}for(;f--;){const e=t[f];_.has(e.key)||a(e,l)}for(;p;)b(g[p-1]);return g}(r,n,l,1,t,i,o,e.parentNode,V,al,e,ll),G())},i(t){if(!n){for(let t=0;t<i.length;t+=1)W(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)z(r[t]);n=!1},d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&p(e)}}}function al(t,e){let n,r,o;return r=new il({props:{recipe:e[3],showResult:e[3].result!==e[0]}}),{key:t,first:null,c(){n=y(),J(r.$$.fragment),this.first=n},m(t,e){f(t,n,e),K(r,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.showResult=e[3].result!==e[0]),r.$set(o)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r,t)}}}function cl(t){let e,n,r=t[1].length&&sl(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function ul(t,e,n){let{item_id:r}=e,o=I("data").byType("recipe").filter((t=>{var e;return(t.result===r||(null!==(e=t.byproducts)&&void 0!==e?e:[]).some((t=>t[0]===r)))&&!t.obsolete})).sort(((t,e)=>(t.result===r?0:1)-(e.result===r?0:1)));return t.$$set=t=>{"item_id"in t&&n(0,r=t.item_id)},[r,o]}class dl extends tt{constructor(t){super(),Q(this,t,ul,cl,i,{item_id:0})}}function fl(t){let e,n,r,o;return e=new Qt({props:{item:t[1]}}),r=new Nt({props:{type:"item",id:t[1].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};2&n&&(o.item=t[1]),e.$set(o);const i={};2&n&&(i.id=t[1].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function pl(t){let e,n,r=t[0].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[0],$$slots:{default:[fl,({item:t})=>({1:t}),({item:t})=>t?2:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Salvage",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};34&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function ml(t,e,n){let{item_id:r}=e,o=I("data");const i=o.byId("item",r);const l=o.byType("material").filter((t=>t.salvaged_into===r)).flatMap((t=>{return e=t,o.byType("item").filter((t=>{var n;const r="string"==typeof t.material?[t.material]:null!==(n=t.material)&&void 0!==n?n:[];return 1===r.length&&r[0]===e.id}));var e})).filter((t=>{var e;return!(null!==(e=t.flags)&&void 0!==e?e:[]).includes("NO_SALVAGE")})).filter((t=>dt(t.weight)>=dt(i.weight))).sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item_id"in t&&n(2,r=t.item_id)},[l,i,r]}class hl extends tt{constructor(t){super(),Q(this,t,ml,pl,i,{item_id:2})}}function gl(t,e){let n=[null!=t?t:1].flat();1===n.length&&(n=[n[0],n[0]]);let r=0,o=0;for(let t=n[0];t<=n[1];++t)r+=1-Math.pow(1-e,t),++o;return r/o}function _l(t){var e,n;if(1===t.length&&1===(null!==(e=t[0].chance)&&void 0!==e?e:1))return t[0].loot;const r=new Map;for(const{loot:e,chance:o=1}of t)for(const[t,i]of e.entries()){const e=1-(1-(null!==(n=r.get(t))&&void 0!==n?n:0))*(1-i*o);r.set(t,e)}return r}function yl(t,e,n){var r;const o={...t.object,rows:(null!==(r=t.object.rows)&&void 0!==r?r:[]).slice(24*n,24*(n+1)).map((t=>t.slice(24*e,24*(e+1))))},i=t=>Array.isArray(t)?t[0]:t;return o.place_items&&(o.place_items=o.place_items.filter((t=>i(t.x)>=e&&i(t.y)>=n&&i(t.x)<e+24&&i(t.y)<n+24))),o.place_item&&(o.place_item=o.place_item.filter((t=>i(t.x)>=e&&i(t.y)>=n&&i(t.x)<e+24&&i(t.y)<n+24))),o.add&&(o.add=o.add.filter((t=>i(t.x)>=e&&i(t.y)>=n&&i(t.x)<e+24&&i(t.y)<n+24))),o.place_loot&&(o.place_loot=o.place_loot.filter((t=>i(t.x)>=e&&i(t.y)>=n&&i(t.x)<e+24&&i(t.y)<n+24))),o.place_nested&&(o.place_nested=o.place_nested.filter((t=>i(t.x)>=e&&i(t.y)>=n&&i(t.x)<e+24&&i(t.y)<n+24))),{...t,object:o}}const vl=new WeakMap;function $l(t,e){var n;if("mutable"===e.subtype)return;const r=[...null!==(n=e.overmaps)&&void 0!==n?n:[]];let o=1/0,i=1/0,l=-1/0,s=-1/0;const a=new Map;for(const e of r){const n=e.overmap.replace(/_(north|south|east|west)$/,"");if(!t.byId("overmap_terrain",n))continue;const[r,c,u]=e.point;0===u&&(r<o&&(o=r),c<i&&(i=c),r>l&&(l=r),c>s&&(s=c),a.set(`${r}|${c}`,e))}if(o===1/0||i===1/0)return;const c=[s-i,l-o];for(let t=i;t<=s;t++)for(let e=o;e<=l;e++){const n=a.get(`${e}|${t}`);if(n){const t=u(n.overmap.replace(/_(north|south|east|west)$/,""));c.push(t)}else c.push("no_om")}return c.join("\0");function u(e){const n=t.byId("overmap_terrain",e);return n?`${n.sym}${n.color}${n.name}`:"appearance_unk"}}const bl=new Set(["Necropolis","Isherwood Farms","lab_mutagen_6_level","Lab_SECURITY_1x1x6","Lab_CARGO_Surface","hub_01"]),wl=new WeakMap;function xl(t){if(wl.has(t))return wl.get(t);const e=function(t){var e,n;if(vl.has(t))return vl.get(t);const r=new Map,o=(t,e)=>{r.has(t)||r.set(t,[]),r.get(t).push(e)},i=t.byType("mapgen").filter((t=>null!=t.om_terrain));for(const t of i)if("string"==typeof t.om_terrain)o(t.om_terrain,t);else if("string"==typeof t.om_terrain[0])for(const e of t.om_terrain)o(e,t);else for(let e=0;e<t.om_terrain.length;e++)for(let n=0;n<t.om_terrain[e].length;n++)o(t.om_terrain[e][n],yl(t,n,e));const l=t.byType("overmap_special"),s=new Map;for(const o of l){if("mutable"===o.subtype)continue;const i=[];for(const l of null!==(e=o.overmaps)&&void 0!==e?e:[]){const e=l.overmap.replace(/_(north|east|west|south)$/,""),o=Cl((null!==(n=r.get(e))&&void 0!==n?n:[]).map((e=>{var n;return{weight:null!==(n=e.weight)&&void 0!==n?n:1e3,loot:Il(t,e)}})));i.push(o)}s.set(o.id,kl(i))}return vl.set(t,s),s}(t),n=new Map;for(const[r,o]of e.entries()){if(bl.has(r))continue;const e=$l(t,t.byId("overmap_special",r));if(!e)continue;n.has(e)||n.set(e,{loot:void 0,ids:[]});const i=n.get(e);i.loot?i.loot=Cl([{loot:i.loot,weight:1},{loot:o,weight:1}]):i.loot=o,i.ids.push(r)}return wl.set(t,n),n}function Cl(t){var e;const n=t.map((t=>t.weight)).reduce(((t,e)=>t+e),0),r=new Map;for(const{loot:o,weight:i}of t){const t=(null!=i?i:1e3)/n;for(const[n,i]of o.entries())r.set(n,(null!==(e=r.get(n))&&void 0!==e?e:0)+i*t)}return r}function kl(t){var e;const n=new Map;for(const r of t)for(const[t,o]of r.entries()){const r=null!==(e=n.get(t))&&void 0!==e?e:0;n.set(t,1-(1-o)*(1-r))}return n}let El=0;function Tl(t,e){if(El+=1,El>4)return new Map;const n=Cl((null!=e?e:[]).map((t=>"string"==typeof t?[t,100]:t)).map((([e,n])=>{var r;return{loot:Cl((null!==(r=t.nestedMapgensById(e))&&void 0!==r?r:[]).map((e=>{var n;return{loot:Il(t,e),weight:null!==(n=e.weight)&&void 0!==n?n:1e3}}))),weight:n}})));return El-=1,n}const Sl=new WeakMap;function Il(t,e){var n,r,o,i,l,s,a;if(Sl.has(e))return Sl.get(e);const c=Ml(t,e.object),u=_l([...(null!==(n=e.object.place_items)&&void 0!==n?n:[]).map((({item:e,chance:n=100,repeat:r})=>({loot:Ol(t,e),chance:gl(r,n/100)}))),...[...null!==(r=e.object.place_item)&&void 0!==r?r:[],...null!==(o=e.object.add)&&void 0!==o?o:[]].map((({item:t,chance:e=100,repeat:n})=>({loot:new Map([[t,gl(n,e/100)]])}))),...(null!==(i=e.object.place_loot)&&void 0!==i?i:[]).map((({item:e,group:n,chance:r=100,repeat:o})=>({loot:e?new Map([[e,1]]):Ol(t,n),chance:gl(o,r/100)}))),...(null!==(l=e.object.place_nested)&&void 0!==l?l:[]).map((e=>{var n;const r=Tl(t,e.chunks),o=null!==(n=Array.isArray(e.repeat)?e.repeat[0]:e.repeat)&&void 0!==n?n:1,i=new Map;for(const[t,e]of r.entries())i.set(t,1-Math.pow(1-e,o));return{loot:i}}))]),d=new Map;for(const t of null!==(s=e.object.rows)&&void 0!==s?s:[])for(const e of t)c.has(e)&&d.set(e,(null!==(a=d.get(e))&&void 0!==a?a:0)+1);const f=[];for(const[t,e]of d.entries()){const n=c.get(t),r=new Map;for(const[t,o]of n.entries())r.set(t,1-Math.pow(1-o,e));f.push({loot:r})}f.push({loot:u});const p=_l(f);return Sl.set(e,p),p}function Ol(t,e){const n="string"==typeof e?t.byId("item_group",e):Array.isArray(e)?{subtype:"collection",entries:e}:e,r=t.flattenItemGroup(n);return new Map(r.map((({id:t,prob:e})=>[t,e])))}function Rl(t,e){return new Map(Object.entries(null!=t?t:{}).map((([t,n])=>[t,_l([n].flat().flatMap((t=>[...e(t)])))])))}const Al=new WeakMap;function Ml(t,e){var n;if(Al.has(e))return Al.get(e);const r=Rl(e.sealed_item,(function*({item:e,items:n,chance:r=100}){var o,i;n&&(yield{loot:Ol(t,n.item),chance:gl(n.repeat,r/100*((null!==(o=n.chance)&&void 0!==o?o:100)/100))}),e&&(yield{loot:new Map([[e.item,1]]),chance:gl(e.repeat,r/100*((null!==(i=e.chance)&&void 0!==i?i:100)/100))})})),o=function(t){return[t].map((t=>t.flatMap((t=>[...t])))).map((t=>[...Bn(t)])).map((t=>t.map((([t,e])=>[t,_l(e.map((t=>({loot:t}))))])))).map((t=>new Map(t)))[0]}([Rl(e.item,(function*({item:t,chance:e=100,repeat:n}){yield{loot:new Map([[t,1]]),chance:gl(n,e/100)}})),Rl(e.items,(function*({item:e,chance:n=100,repeat:r}){yield{loot:Ol(t,e),chance:gl(r,n/100)}})),r,Rl(e.nested,(function*({chunks:e}){yield{loot:Tl(t,e),chance:1}})),...(null!==(n=e.palettes)&&void 0!==n?n:[]).flatMap((e=>"string"!=typeof e?[]:[t.byId("palette",e)])).map((e=>Ml(t,e)))]);return Al.set(e,o),o}function Nl(t,e,n){const r=t.slice();return r[12]=e[n],r}function Bl(t,e,n){const r=t.slice();return r[15]=e[n],r}function Dl(e){let n,r,o=(e[15].sym??"Â ")+"";return{c(){n=h("span"),r=g(o),$(n,"class","c_"+e[15].color),$(n,"title",e[15].name)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function ql(t){let e,n,r=t[12],o=[];for(let e=0;e<r.length;e+=1)o[e]=Dl(Bl(t,r,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=_(),n=h("br")},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),f(t,n,r)},p(t,n){if(1&n){let i;for(r=t[12],i=0;i<r.length;i+=1){const l=Bl(t,r,i);o[i]?o[i].p(l,n):(o[i]=Dl(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(t){m(o,t),t&&p(e),t&&p(n)}}}function Ll(e){let n,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=ql(Nl(e,r,t));return{c(){n=h("div");for(let t=0;t<o.length;t+=1)o[t].c();x(n,"font-family","Unifont, monospace"),x(n,"line-height","1"),x(n,"display","inline-block"),x(n,"white-space","pre")},m(t,e){f(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(1&e){let i;for(r=t[0],i=0;i<r.length;i+=1){const l=Nl(t,r,i);o[i]?o[i].p(l,e):(o[i]=ql(l),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:t,o:t,d(t){t&&p(n),m(o,t)}}}function jl(t){return t.every((t=>" "===t.sym))}function Pl(t,e,n){var r;const o=I("data");let{overmapSpecial:i}=e;const l=[...null!==(r=i.overmaps)&&void 0!==r?r:[]];let s=1/0,a=1/0,c=-1/0,u=-1/0;const d=new Map;for(const t of l){const[e,n,r]=t.point;0===r&&(e<s&&(s=e),n<a&&(a=n),e>c&&(c=e),n>u&&(u=n),d.set(`${e}|${n}`,t))}const f=[];for(let t=a;t<=u;t++){const e=[];for(let n=s;n<=c;n++){const r=d.get(`${n}|${t}`);if(r){const[,t,n]=/^(.+?)(?:_(north|south|east|west))?$/.exec(r.overmap),o=m(t,n||"north");e.push(o)}else e.push({color:"black",sym:" ",name:""})}f.push(e)}for(;f.length;){if(!jl(f[0]))break;f.shift()}for(;f.length;){if(!jl(f[f.length-1]))break;f.pop()}function p(t,e){const n="north"===e?0:"east"===e?1:"south"===e?2:"west"===e?3:0;if(0===n)return t;const r=o.byType("rotatable_symbol").find((e=>e.tuple.some((e=>e===t))));return r?r.tuple[(r.tuple.indexOf(t)+n)%r.tuple.length]:t}function m(t,e="north"){const n=o.byId("overmap_terrain",t);return n?{color:n.color,sym:p(n.sym,e),name:it(n.name)}:{color:"black",sym:" ",name:""}}return t.$$set=t=>{"overmapSpecial"in t&&n(1,i=t.overmapSpecial)},[f,i]}class Fl extends tt{constructor(t){super(),Q(this,t,Pl,Ll,i,{overmapSpecial:1})}}function Ul(t,e,n){const r=t.slice();return r[7]=e[n],r}function Hl(t){let e,n,r,o,i,l,s,a,c,u,m,y,v,w=t[2](t[7].overmap_special)+"",C=Nn(t[7].chance)+"";return r=new Fl({props:{overmapSpecial:t[7].overmap_special}}),{c(){e=h("tr"),n=h("td"),J(r.$$.fragment),o=_(),i=h("td"),l=h("span"),s=g(w),c=g("\n              ("),u=g(C),m=g(")"),y=_(),x(n,"text-align","center"),$(l,"title",a=t[7].ids.join(", ")),x(i,"vertical-align","middle")},m(t,a){f(t,e,a),d(e,n),K(r,n,null),d(e,o),d(e,i),d(i,l),d(l,s),d(i,c),d(i,u),d(i,m),d(e,y),v=!0},p(t,e){const n={};1&e&&(n.overmapSpecial=t[7].overmap_special),r.$set(n),(!v||1&e)&&w!==(w=t[2](t[7].overmap_special)+"")&&b(s,w),(!v||1&e&&a!==(a=t[7].ids.join(", ")))&&$(l,"title",a),(!v||1&e)&&C!==(C=Nn(t[7].chance)+"")&&b(u,C)},i(t){v||(W(r.$$.fragment,t),v=!0)},o(t){z(r.$$.fragment,t),v=!1},d(t){t&&p(e),X(r)}}}function Gl(e){let n,r,o;return{c(){n=h("button"),n.textContent=`See all ${Number(e[1].length).toLocaleString()}...`,$(n,"class","disclosure")},m(t,i){f(t,n,i),r||(o=v(n,"click",e[4]),r=!0)},p:t,d(t){t&&p(n),r=!1,o()}}}function Wl(t){let e,n,r=t[1].length&&function(t){let e,n,r,o,i,l,s,a=t[1].slice(0,t[0]),c=[];for(let e=0;e<a.length;e+=1)c[e]=Hl(Ul(t,a,e));const u=t=>z(c[t],1,1,(()=>{c[t]=null}));let g=t[1].length>t[0]&&Gl(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Loot",r=_(),o=h("table"),i=h("tbody");for(let t=0;t<c.length;t+=1)c[t].c();l=_(),g&&g.c(),$(o,"class","alternating")},m(t,a){f(t,e,a),d(e,n),d(e,r),d(e,o),d(o,i);for(let t=0;t<c.length;t+=1)c[t].m(i,null);d(e,l),g&&g.m(e,null),s=!0},p(t,n){if(7&n){let e;for(a=t[1].slice(0,t[0]),e=0;e<a.length;e+=1){const r=Ul(t,a,e);c[e]?(c[e].p(r,n),W(c[e],1)):(c[e]=Hl(r),c[e].c(),W(c[e],1),c[e].m(i,null))}for(H(),e=a.length;e<c.length;e+=1)u(e);G()}t[1].length>t[0]?g?g.p(t,n):(g=Gl(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(t){if(!s){for(let t=0;t<a.length;t+=1)W(c[t]);s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)z(c[t]);s=!1},d(t){t&&p(e),m(c,t),g&&g.d()}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[1].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function zl(t,e,n){let{item_id:r}=e;const o=I("data"),i=xl(o),l=[];for(const{loot:t,ids:e}of i.values())if(t.has(r)){const n=t.get(r),i=o.byId("overmap_special",e[0]);l.push({overmap_special:i,ids:e,chance:n})}l.sort(((t,e)=>e.chance-t.chance));let s=l.length<=14?14:10;return t.$$set=t=>{"item_id"in t&&n(3,r=t.item_id)},[s,l,function(t){var e;if("mutable"===t.subtype)return t.id;const n=(null!==(e=t.overmaps)&&void 0!==e?e:[]).filter((t=>0===t.point[2]));let r=1/0,i=1/0,l=-1/0,s=-1/0;const a=new Map;for(const t of n){const[e,n]=t.point;o.byId("overmap_terrain",t.overmap.replace(/_(north|south|east|west)$/,""))&&(e<r&&(r=e),n<i&&(i=n),e>l&&(l=e),n>s&&(s=n),a.set(`${e}|${n}`,t))}const c=r+Math.floor((l-r)/2),u=i+Math.floor((s-i)/2),d=a.get(`${c}|${u}`);if(d){const t=o.byId("overmap_terrain",d.overmap.replace(/_(north|south|east|west)$/,""));if(t)return st(t)}return t.id},r,t=>{t.preventDefault(),n(0,s=1/0)}]}class Yl extends tt{constructor(t){super(),Q(this,t,zl,Wl,i,{item_id:3})}}function Vl(t){let e,n,r,o,i,l=Nn(t[4])+"";return e=new Nt({props:{id:t[3].id,type:"vehicle"}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,n){const o={};8&n&&(o.id=t[3].id),e.$set(o),(!i||16&n)&&l!==(l=Nn(t[4])+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function Jl(t){let e,n,r=t[0].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[0],$$slots:{default:[Vl,({item:{vehicle:t,prob:e}})=>({3:t,4:e}),({item:t})=>(t?8:0)|(t?16:0)]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="In Vehicle",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};56&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[e]){t[0].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Kl(t,e,n){let{item_id:r}=e;const o=I("data"),i=o.byType("vehicle").flatMap((t=>{const e=bt(t),n=o.flattenItemGroup(e).find((t=>t.id===r));return n?[{vehicle:t,prob:n.prob,count:n.count}]:[]}));return i.sort(((t,e)=>e.prob-t.prob)),t.$$set=t=>{"item_id"in t&&n(1,r=t.item_id)},[i,r]}class Xl extends tt{constructor(t){super(),Q(this,t,Kl,Jl,i,{item_id:1})}}function Zl(t){let e,n,r,o,i,l,s,a,c=t[0].charges_per_use&&Ql(t),u=t[0].power_draw&&ts(t),m=t[0].turns_per_charge&&es(t),g=t[0].sub&&ns(t);return{c(){e=h("section"),n=h("h1"),n.textContent="Tool",r=_(),o=h("dl"),c&&c.c(),i=y(),u&&u.c(),l=y(),m&&m.c(),s=y(),g&&g.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),c&&c.m(o,null),d(o,i),u&&u.m(o,null),d(o,l),m&&m.m(o,null),d(o,s),g&&g.m(o,null),a=!0},p(t,e){t[0].charges_per_use?c?c.p(t,e):(c=Ql(t),c.c(),c.m(o,i)):c&&(c.d(1),c=null),t[0].power_draw?u?u.p(t,e):(u=ts(t),u.c(),u.m(o,l)):u&&(u.d(1),u=null),t[0].turns_per_charge?m?m.p(t,e):(m=es(t),m.c(),m.m(o,s)):m&&(m.d(1),m=null),t[0].sub?g?(g.p(t,e),1&e&&W(g,1)):(g=ns(t),g.c(),W(g,1),g.m(o,null)):g&&(H(),z(g,1,1,(()=>{g=null})),G())},i(t){a||(W(g),a=!0)},o(t){z(g),a=!1},d(t){t&&p(e),c&&c.d(),u&&u.d(),m&&m.d(),g&&g.d()}}}function Ql(t){let e,n,r,o=t[0].charges_per_use+"";return{c(){e=h("dt"),e.textContent="Charges Per Use",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].charges_per_use+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function ts(t){let e,n,r,o,i=(t[0].power_draw/1e3).toFixed(1)+"";return{c(){e=h("dt"),e.textContent="Power Draw",n=h("dd"),r=g(i),o=g(" W")},m(t,i){f(t,e,i),f(t,n,i),d(n,r),d(n,o)},p(t,e){1&e&&i!==(i=(t[0].power_draw/1e3).toFixed(1)+"")&&b(r,i)},d(t){t&&p(e),t&&p(n)}}}function es(t){let e,n,r,o=t[0].turns_per_charge+"";return{c(){e=h("dt"),e.textContent="Turns Per Charge",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].turns_per_charge+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function ns(t){let e,n,r,o;return r=new Nt({props:{type:"item",id:t[0].sub}}),{c(){e=h("dt"),e.textContent="Substitute",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].sub),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function rs(t){let e,n,r=(t[0].charges_per_use||t[0].sub||t[0].power_draw||t[0].turns_per_charge)&&Zl(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,[n]){t[0].charges_per_use||t[0].sub||t[0].power_draw||t[0].turns_per_charge?r?(r.p(t,n),1&n&&W(r,1)):(r=Zl(t),r.c(),W(r,1),r.m(e.parentNode,e)):r&&(H(),z(r,1,1,(()=>{r=null})),G())},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function os(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class is extends tt{constructor(t){super(),Q(this,t,os,rs,i,{item:0})}}function ls(e){let n,r,o,i,l,s,a,c,u,m,y,v,$=(e[0].diameter??0)+"",w=(e[0].width??0)+"";return{c(){n=h("section"),r=h("h1"),r.textContent="Wheel",o=_(),i=h("dl"),l=h("dt"),l.textContent="Diameter",s=h("dd"),a=g($),c=g('"'),u=h("dt"),u.textContent="Width",m=h("dd"),y=g(w),v=g('"')},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(i,l),d(i,s),d(s,a),d(s,c),d(i,u),d(i,m),d(m,y),d(m,v)},p(t,[e]){1&e&&$!==($=(t[0].diameter??0)+"")&&b(a,$),1&e&&w!==(w=(t[0].width??0)+"")&&b(y,w)},i:t,o:t,d(t){t&&p(n)}}}function ss(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class as extends tt{constructor(t){super(),Q(this,t,ss,ls,i,{item:0})}}function cs(t,e,n){const r=t.slice();return r[24]=e[n],r}function us(t,e,n){const r=t.slice();return r[0]=e[n],r}function ds(t,e,n){const r=t.slice();return r[29]=e[n],r}function fs(t,e,n){const r=t.slice();return r[32]=e[n][0],r[33]=e[n][1],r}function ps(t,e,n){const r=t.slice();return r[32]=e[n],r}function ms(t,e,n){const r=t.slice();return r[38]=e[n],r}function hs(t,e,n){const r=t.slice();return r[32]=e[n].id,r[33]=e[n].count,r}function gs(t,e,n){const r=t.slice();return r[43]=e[n],r}function _s(t,e,n){const r=t.slice();return r[46]=e[n].quality,r[47]=e[n].level,r}function ys(t,e,n){const r=t.slice();return r[46]=e[n].quality,r[47]=e[n].level,r}function vs(t,e,n){const r=t.slice();return r[52]=e[n],r}function $s(t,e,n){const r=t.slice();return r[55]=e[n],r}function bs(t,e,n){const r=t.slice();return r[58]=e[n],r}function ws(t,e,n){const r=t.slice();return r[61]=e[n].type,r[32]=e[n].id,r}function xs(t,e,n){const r=t.slice();return r[64]=e[n].id,r[65]=e[n].max_charges,r}function Cs(t,e,n){const r=t.slice();return r[68]=e[n],r}function ks(e){let n,r,o,i;r=new Nt({props:{type:"material",id:e[68].type}});let l=e[5].length>1&&function(e){let n,r,o,i,l=((e[68].portion??1)/e[6]*100).toFixed(0)+"";return{c(){n=g(" "),r=g("("),o=g(l),i=g("%)")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),t&&p(i)}}}(e);return{c(){n=h("li"),J(r.$$.fragment),l&&l.c(),o=_()},m(t,e){f(t,n,e),K(r,n,null),l&&l.m(n,null),d(n,o),i=!0},p(t,e){t[5].length>1&&l.p(t,e)},i(t){i||(W(r.$$.fragment,t),i=!0)},o(t){z(r.$$.fragment,t),i=!1},d(t){t&&p(n),X(r),l&&l.d()}}}function Es(t){let e,n,r,o,i,l,s,a,c,u=t[65]+"",m="GUN"===t[0].type?"round":"charge",y=1===t[65]?"":"s";return s=new Nt({props:{type:"ammunition_type",id:t[64]}}),{c(){e=h("li"),n=g(u),r=_(),o=g(m),i=g(y),l=g(" of\n                  "),J(s.$$.fragment),a=_()},m(t,u){f(t,e,u),d(e,n),d(e,r),d(e,o),d(e,i),d(e,l),K(s,e,null),d(e,a),c=!0},p(t,e){(!c||1&e[0])&&m!==(m="GUN"===t[0].type?"round":"charge")&&b(o,m)},i(t){c||(W(s.$$.fragment,t),c=!0)},o(t){z(s.$$.fragment,t),c=!1},d(t){t&&p(e),X(s)}}}function Ts(e){let n,r,o;return r=new Nt({props:{type:e[61],id:e[32]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Ss(t){let e,n,r,o,i,l=t[0].weapon_category,s=[];for(let e=0;e<l.length;e+=1)s[e]=Is(bs(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Category",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e[0]){let n;for(l=t[0].weapon_category,n=0;n<l.length;n+=1){const o=bs(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Is(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Is(t){let e,n,r;return n=new Nt({props:{type:"weapon_category",id:t[58]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e[0]&&(r.id=t[58]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Os(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Rs(e){let n,r,o;return r=new Nt({props:{type:"json_flag",id:e[55].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function As(e){let n,r,o;return r=new Nt({props:{type:"fault",id:e[52].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Ms(e){let n,r,o,i,l,s,a,c,u=e[47]+"";return s=new Nt({props:{type:"tool_quality",id:e[46].id}}),{c(){n=h("li"),r=g("Has level "),o=h("strong"),i=g(u),l=_(),J(s.$$.fragment),a=g(" quality.")},m(t,e){f(t,n,e),d(n,r),d(n,o),d(o,i),d(o,l),K(s,o,null),d(n,a),c=!0},p:t,i(t){c||(W(s.$$.fragment,t),c=!0)},o(t){z(s.$$.fragment,t),c=!1},d(t){t&&p(n),X(s)}}}function Ns(e){let n,r,o,i,l,s,a,c,u=e[47]+"";return s=new Nt({props:{type:"tool_quality",id:e[46].id}}),{c(){n=h("li"),r=g("Has level "),o=h("strong"),i=g(u),l=_(),J(s.$$.fragment),a=g(" quality\n                  (when charged).\n                ")},m(t,e){f(t,n,e),d(n,r),d(n,o),d(o,i),d(o,l),K(s,o,null),d(n,a),c=!0},p:t,i(t){c||(W(s.$$.fragment,t),c=!0)},o(t){z(s.$$.fragment,t),c=!1},d(t){t&&p(n),X(s)}}}function Bs(e){let n,r,o;return r=new Nt({props:{type:"vehicle_part",id:e[43].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Ds(e){let n,r,o;return r=new Nt({props:{id:e[32],count:e[33],type:"item"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function qs(e){let n,r,o=st(e[1].byId("item_action",e[38].type))+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Ls(t){let e,n;return e=new Xr({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function js(t){let e,n,r,o;const i=[Fs,Ps],l=[];return e=function(t,e){return t[1].build_number?.startsWith("0.F")?0:1}(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,e){n.p(t,e)},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function Ps(t){let e,n;return e=new rr({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Fs(t){let e,n;return e=new Lr({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Us(t){let e,n;return e=new is({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Hs(t){let e,n,r,o,i,l,s,a,c=t[0].displacement+"";return{c(){e=h("section"),n=h("h1"),n.textContent="Engine",r=_(),o=h("dl"),i=h("dt"),i.textContent="Displacement",l=h("dd"),s=g(c),a=g(" cc")},m(t,c){f(t,e,c),d(e,n),d(e,r),d(e,o),d(o,i),d(o,l),d(l,s),d(l,a)},p(t,e){1&e[0]&&c!==(c=t[0].displacement+"")&&b(s,c)},d(t){t&&p(e)}}}function Gs(t){let e,n;return e=new io({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Ws(t){let e,n;return e=new as({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function zs(t){let e,n,r,o,i,l,s,a,c,u,y,v,w=t[0].seed_data.grow+"",x=[t[0].seed_data.fruit].concat(t[0].seed_data.byproducts??[]),C=[];for(let e=0;e<x.length;e+=1)C[e]=Ys(ps(t,x,e));const k=t=>z(C[t],1,1,(()=>{C[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Grows Into",r=_(),o=h("dl"),i=h("dt"),i.textContent="Harvest Results",l=h("dd"),s=h("ul");for(let t=0;t<C.length;t+=1)C[t].c();a=_(),c=h("dt"),c.textContent="Growing Time",u=h("dd"),y=g(w),$(s,"class","comma-separated")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,l),d(l,s);for(let t=0;t<C.length;t+=1)C[t].m(s,null);d(l,a),d(o,c),d(o,u),d(u,y),v=!0},p(t,e){if(1&e[0]){let n;for(x=[t[0].seed_data.fruit].concat(t[0].seed_data.byproducts??[]),n=0;n<x.length;n+=1){const r=ps(t,x,n);C[n]?(C[n].p(r,e),W(C[n],1)):(C[n]=Ys(r),C[n].c(),W(C[n],1),C[n].m(s,null))}for(H(),n=x.length;n<C.length;n+=1)k(n);G()}(!v||1&e[0])&&w!==(w=t[0].seed_data.grow+"")&&b(y,w)},i(t){if(!v){for(let t=0;t<x.length;t+=1)W(C[t]);v=!0}},o(t){C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)z(C[t]);v=!1},d(t){t&&p(e),m(C,t)}}}function Ys(t){let e,n,r;return n=new Nt({props:{type:"item",id:t[32]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e[0]&&(r.id=t[32]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Vs(t){let e,n,r,o,i,l;n=new li({props:{item:t[0]}});const s=[Ks,Js],a=[];function c(t,e){return"GUN"===t[0].type?0:"AMMO"===t[0].type?1:-1}return~(o=c(t))&&(i=a[o]=s[o](t)),{c(){e=h("div"),J(n.$$.fragment),r=_(),i&&i.c(),$(e,"class","side-by-side")},m(t,i){f(t,e,i),K(n,e,null),d(e,r),~o&&a[o].m(e,null),l=!0},p(t,r){const l={};1&r[0]&&(l.item=t[0]),n.$set(l);let u=o;o=c(t),o===u?~o&&a[o].p(t,r):(i&&(H(),z(a[u],1,1,(()=>{a[u]=null})),G()),~o?(i=a[o],i?i.p(t,r):(i=a[o]=s[o](t),i.c()),W(i,1),i.m(e,null)):i=null)},i(t){l||(W(n.$$.fragment,t),W(i),l=!0)},o(t){z(n.$$.fragment,t),z(i),l=!1},d(t){t&&p(e),X(n),~o&&a[o].d()}}}function Js(t){let e,n;return e=new Mn({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Ks(t){let e,n;return e=new Vo({props:{item:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Xs(e){let n,r,o,i,l,s,a,c,u=e[33]+"",m=1===e[33]?"":"s";return s=new Nt({props:{id:e[32],type:"ammunition_type"}}),{c(){n=h("li"),r=g(u),o=g(" round"),i=g(m),l=g(" of "),J(s.$$.fragment),a=_()},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(n,l),K(s,n,null),d(n,a),c=!0},p:t,i(t){c||(W(s.$$.fragment,t),c=!0)},o(t){z(s.$$.fragment,t),c=!1},d(t){t&&p(n),X(s)}}}function Zs(e){let n,r,o;return r=new Nt({props:{type:"json_flag",id:e[29]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Qs(e){let n,r,o;return r=new Nt({props:{type:"item",id:e[0]}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function ta(e){let n,r,o,i,l,s,a,c,u,v,b,w,x=e[24].moves+"",C=null!=e[24].max_contains_volume&&function(e){let n,r,o,i=e[24].max_contains_volume+"";return{c(){n=h("dt"),n.textContent="Volume Capacity",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),k=null!=e[24].max_contains_weight&&function(e){let n,r,o,i=e[24].max_contains_weight+"";return{c(){n=h("dt"),n.textContent="Weight Capacity",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),E=e[24].ammo_restriction&&function(t){let e,n,r,o,i,l=[...Object.entries(t[24].ammo_restriction)],s=[];for(let e=0;e<l.length;e+=1)s[e]=Xs(fs(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Ammo Restriction",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(512&e[0]){let n;for(l=[...Object.entries(t[24].ammo_restriction)],n=0;n<l.length;n+=1){const o=fs(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Xs(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),T=e[24].max_item_length&&function(e){let n,r,o,i=e[24].max_item_length+"";return{c(){n=h("dt"),n.textContent="Max Item Length",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),S="0 ml"!==e[24].min_item_volume&&function(e){let n,r,o,i=e[24].min_item_volume+"";return{c(){n=h("dt"),n.textContent="Min Item Volume",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),I=e[24].holster&&function(t){let e,n;return{c(){e=h("dt"),e.textContent="Max Items",n=h("dd"),n.textContent="1"},m(t,r){f(t,e,r),f(t,n,r)},d(t){t&&p(e),t&&p(n)}}}(),O=1!==(e[24].sealed_data?.spoil_multiplier??1)&&function(e){let n,r,o,i=e[24].sealed_data.spoil_multiplier+"";return{c(){n=h("dt"),n.textContent="Spoil Multiplier",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),R=e[24].flag_restriction&&function(t){let e,n,r,o,i,l=t[24].flag_restriction,s=[];for(let e=0;e<l.length;e+=1)s[e]=Zs(ds(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Flag Restriction",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(512&e[0]){let n;for(l=t[24].flag_restriction,n=0;n<l.length;n+=1){const o=ds(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Zs(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),A=e[24].item_restriction&&function(t){let e,n,r,o,i,l=t[24].item_restriction,s=[];for(let e=0;e<l.length;e+=1)s[e]=Qs(us(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Item Restriction",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(512&e[0]){let n;for(l=t[24].item_restriction,n=0;n<l.length;n+=1){const o=us(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Qs(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e);return{c(){n=h("dl"),C&&C.c(),r=y(),k&&k.c(),o=y(),E&&E.c(),i=y(),T&&T.c(),l=y(),S&&S.c(),s=h("dt"),s.textContent="Moves to Remove Item",a=h("dd"),c=g(x),I&&I.c(),u=y(),O&&O.c(),v=y(),R&&R.c(),b=y(),A&&A.c()},m(t,e){f(t,n,e),C&&C.m(n,null),d(n,r),k&&k.m(n,null),d(n,o),E&&E.m(n,null),d(n,i),T&&T.m(n,null),d(n,l),S&&S.m(n,null),d(n,s),d(n,a),d(a,c),I&&I.m(n,null),d(n,u),O&&O.m(n,null),d(n,v),R&&R.m(n,null),d(n,b),A&&A.m(n,null),w=!0},p(t,e){null!=t[24].max_contains_volume&&C.p(t,e),null!=t[24].max_contains_weight&&k.p(t,e),t[24].ammo_restriction&&E.p(t,e),t[24].max_item_length&&T.p(t,e),"0 ml"!==t[24].min_item_volume&&S.p(t,e),1!==(t[24].sealed_data?.spoil_multiplier??1)&&O.p(t,e),t[24].flag_restriction&&R.p(t,e),t[24].item_restriction&&A.p(t,e)},i(t){w||(W(E),W(R),W(A),w=!0)},o(t){z(E),z(R),z(A),w=!1},d(t){t&&p(n),C&&C.d(),k&&k.d(),E&&E.d(),T&&T.d(),S&&S.d(),I&&I.d(),O&&O.d(),R&&R.d(),A&&A.d()}}}function ea(e){let n,r,o,i,l,s,a,c,u,v,w,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,Y,V,Z,Q,tt,et,nt,rt,ot,lt,at,ct,ut,dt,mt,ht,gt,_t,yt,vt,$t,bt,wt,xt,Ct,kt,Et,Tt,St,It,Ot,Rt,At,Mt,Nt,Bt,Dt,qt,Lt,jt,Pt,Ft,Ut,Ht,Gt=st(e[0])+"",Wt=ft(e[0].volume)+"",zt=pt(e[0].weight)+"",Yt=e[2](e[0])+"",Vt=it(e[0].description)+"",Jt=e[9].filter(na).length;r=new Qt({props:{item:e[0]}});let Kt=e[5].length&&function(t){let e,n,r,o,i,l=t[5],s=[];for(let e=0;e<l.length;e+=1)s[e]=ks(Cs(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Material",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(96&e[0]){let n;for(l=t[5],n=0;n<l.length;n+=1){const o=Cs(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=ks(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),Xt=e[12].length&&function(t){let e,n,r,o,i,l=t[12].map(t[17]),s=[];for(let e=0;e<l.length;e+=1)s[e]=Es(xs(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Ammo",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","no-bullets")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(6145&e[0]){let n;for(l=t[12].map(t[17]),n=0;n<l.length;n+=1){const o=xs(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Es(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),Zt=e[10].length&&function(t){let e,n,r,o,i,l=t[10],s=[];for(let e=0;e<l.length;e+=1)s[e]=Ts(ws(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Compatible Magazines",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1024&e[0]){let n;for(l=t[10],n=0;n<l.length;n+=1){const o=ws(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Ts(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),te=e[0].weapon_category?.length&&Ss(e),ee=e[7],ne=[];for(let t=0;t<ee.length;t+=1)ne[t]=Rs($s(e,ee,t));const re=t=>z(ne[t],1,1,(()=>{ne[t]=null}));let oe=null;ee.length||(oe=Os());let ie=e[8].length&&function(t){let e,n,r,o,i,l=t[8],s=[];for(let e=0;e<l.length;e+=1)s[e]=As(vs(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Possible Faults",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(256&e[0]){let n;for(l=t[8],n=0;n<l.length;n+=1){const o=vs(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=As(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),le=(e[3].length||e[4].length)&&function(t){let e,n,r,o,i,l,s=t[3],a=[];for(let e=0;e<s.length;e+=1)a[e]=Ms(ys(t,s,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));let u=t[4],g=[];for(let e=0;e<u.length;e+=1)g[e]=Ns(_s(t,u,e));const y=t=>z(g[t],1,1,(()=>{g[t]=null}));return{c(){e=h("dt"),e.textContent="Qualities",n=h("dd"),r=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();o=_();for(let t=0;t<g.length;t+=1)g[t].c();i=_(),$(r,"class","no-bullets")},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);d(r,o);for(let t=0;t<g.length;t+=1)g[t].m(r,null);d(n,i),l=!0},p(t,e){if(8&e[0]){let n;for(s=t[3],n=0;n<s.length;n+=1){const i=ys(t,s,n);a[n]?(a[n].p(i,e),W(a[n],1)):(a[n]=Ms(i),a[n].c(),W(a[n],1),a[n].m(r,o))}for(H(),n=s.length;n<a.length;n+=1)c(n);G()}if(16&e[0]){let n;for(u=t[4],n=0;n<u.length;n+=1){const o=_s(t,u,n);g[n]?(g[n].p(o,e),W(g[n],1)):(g[n]=Ns(o),g[n].c(),W(g[n],1),g[n].m(r,null))}for(H(),n=u.length;n<g.length;n+=1)y(n);G()}},i(t){if(!l){for(let t=0;t<s.length;t+=1)W(a[t]);for(let t=0;t<u.length;t+=1)W(g[t]);l=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)z(g[t]);l=!1},d(t){t&&p(e),t&&p(n),m(a,t),m(g,t)}}}(e),se=e[14].length&&function(t){let e,n,r,o,i,l=t[14],s=[];for(let e=0;e<l.length;e+=1)s[e]=Bs(gs(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Vehicle Parts",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(16384&e[0]){let n;for(l=t[14],n=0;n<l.length;n+=1){const o=gs(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Bs(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),ae=e[13]&&function(t){let e,n,r,o,i,l=t[13].components,s=[];for(let e=0;e<l.length;e+=1)s[e]=Ds(hs(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Disassembles Into",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(8192&e[0]){let n;for(l=t[13].components,n=0;n<l.length;n+=1){const o=hs(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Ds(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),ce=e[15].length&&function(t){let e,n,r,o=t[15],i=[];for(let e=0;e<o.length;e+=1)i[e]=qs(ms(t,o,e));return{c(){e=h("dt"),e.textContent="Usage",n=h("dd"),r=h("ul");for(let t=0;t<i.length;t+=1)i[t].c();$(r,"class","comma-separated")},m(t,o){f(t,e,o),f(t,n,o),d(n,r);for(let t=0;t<i.length;t+=1)i[t].m(r,null)},p(t,e){if(32770&e[0]){let n;for(o=t[15],n=0;n<o.length;n+=1){const l=ms(t,o,n);i[n]?i[n].p(l,e):(i[n]=qs(l),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&p(e),t&&p(n),m(i,t)}}}(e),ue=e[16]&&function(e){let n,r;return n=new Tn({props:{picture:e[16]}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}(e),de="BOOK"===e[0].type&&Ls(e),fe=("ARMOR"===e[0].type||"TOOL_ARMOR"===e[0].type)&&js(e),pe=("TOOL"===e[0].type||"TOOL_ARMOR"===e[0].type)&&Us(e),me="ENGINE"===e[0].type&&e[0].displacement&&Hs(e),he="COMESTIBLE"===e[0].type&&Gs(e),ge="WHEEL"===e[0].type&&Ws(e),_e=e[0].seed_data&&zs(e),ye=(e[0].bashing||e[0].cutting||"GUN"===e[0].type||"AMMO"===e[0].type)&&Vs(e),ve=Jt&&function(t){let e,n,r,o,i=t[9].filter(ra),l=[];for(let e=0;e<i.length;e+=1)l[e]=ta(cs(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Pockets",r=_();for(let t=0;t<l.length;t+=1)l[t].c()},m(t,i){f(t,e,i),d(e,n),d(e,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);o=!0},p(t,n){if(512&n[0]){let r;for(i=t[9].filter(ra),r=0;r<i.length;r+=1){const o=cs(t,i,r);l[r]?(l[r].p(o,n),W(l[r],1)):(l[r]=ta(o),l[r].c(),W(l[r],1),l[r].m(e,null))}for(H(),r=i.length;r<l.length;r+=1)s(r);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),m(l,t)}}}(e);return ht=new po({props:{item_id:e[0].id}}),$t=new dl({props:{item_id:e[0].id}}),wt=new Ao({props:{item_id:e[0].id}}),Ct=new Lo({props:{item_id:e[0].id}}),Et=new Uo({props:{item_id:e[0].id}}),St=new Zo({props:{item_id:e[0].id}}),Ot=new Eo({props:{item_id:e[0].id}}),At=new hl({props:{item_id:e[0].id}}),Nt=new yo({props:{item_id:e[0].id}}),Dt=new wo({props:{item_id:e[0].id}}),Lt=new Ur({props:{item_id:e[0].id}}),Pt=new Yl({props:{item_id:e[0].id}}),Ut=new Xl({props:{item_id:e[0].id}}),{c(){n=h("h1"),J(r.$$.fragment),o=_(),i=g(Gt),l=_(),s=h("section"),a=h("h1"),a.textContent="General",c=_(),u=h("div"),v=h("div"),w=h("dl"),Kt&&Kt.c(),C=h("dt"),C.textContent="Volume",k=h("dd"),E=g(Wt),T=h("dt"),T.textContent="Weight",S=h("dd"),I=g(zt),O=h("dt"),O.textContent="Length",R=h("dd"),A=g(Yt),Xt&&Xt.c(),M=y(),Zt&&Zt.c(),N=y(),te&&te.c(),B=h("dt"),B.textContent="Flags",D=h("dd"),q=h("ul");for(let t=0;t<ne.length;t+=1)ne[t].c();oe&&oe.c(),L=_(),ie&&ie.c(),j=y(),le&&le.c(),P=y(),se&&se.c(),F=y(),ae&&ae.c(),U=y(),ce&&ce.c(),Y=_(),V=h("p"),Z=g(Vt),Q=_(),tt=h("div"),ue&&ue.c(),et=_(),de&&de.c(),nt=_(),fe&&fe.c(),rt=_(),pe&&pe.c(),ot=_(),me&&me.c(),lt=_(),he&&he.c(),at=_(),ge&&ge.c(),ct=_(),_e&&_e.c(),ut=_(),ye&&ye.c(),dt=_(),ve&&ve.c(),mt=_(),J(ht.$$.fragment),gt=_(),_t=h("div"),yt=h("h2"),yt.textContent="Obtaining",vt=_(),J($t.$$.fragment),bt=_(),J(wt.$$.fragment),xt=_(),J(Ct.$$.fragment),kt=_(),J(Et.$$.fragment),Tt=_(),J(St.$$.fragment),It=_(),J(Ot.$$.fragment),Rt=_(),J(At.$$.fragment),Mt=_(),J(Nt.$$.fragment),Bt=_(),J(Dt.$$.fragment),qt=_(),J(Lt.$$.fragment),jt=_(),J(Pt.$$.fragment),Ft=_(),J(Ut.$$.fragment),$(q,"class","comma-separated"),x(V,"color","var(--cata-color-gray)"),x(V,"margin-bottom","0"),$(u,"class","side-by-side no-margin"),$(yt,"class","svelte-18ijh8q"),$(_t,"class","hide-header-if-no-sections svelte-18ijh8q")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),d(n,i),f(t,l,e),f(t,s,e),d(s,a),d(s,c),d(s,u),d(u,v),d(v,w),Kt&&Kt.m(w,null),d(w,C),d(w,k),d(k,E),d(w,T),d(w,S),d(S,I),d(w,O),d(w,R),d(R,A),Xt&&Xt.m(w,null),d(w,M),Zt&&Zt.m(w,null),d(w,N),te&&te.m(w,null),d(w,B),d(w,D),d(D,q);for(let t=0;t<ne.length;t+=1)ne[t].m(q,null);oe&&oe.m(q,null),d(D,L),ie&&ie.m(w,null),d(w,j),le&&le.m(w,null),d(w,P),se&&se.m(w,null),d(w,F),ae&&ae.m(w,null),d(w,U),ce&&ce.m(w,null),d(v,Y),d(v,V),d(V,Z),d(u,Q),d(u,tt),ue&&ue.m(tt,null),f(t,et,e),de&&de.m(t,e),f(t,nt,e),fe&&fe.m(t,e),f(t,rt,e),pe&&pe.m(t,e),f(t,ot,e),me&&me.m(t,e),f(t,lt,e),he&&he.m(t,e),f(t,at,e),ge&&ge.m(t,e),f(t,ct,e),_e&&_e.m(t,e),f(t,ut,e),ye&&ye.m(t,e),f(t,dt,e),ve&&ve.m(t,e),f(t,mt,e),K(ht,t,e),f(t,gt,e),f(t,_t,e),d(_t,yt),d(_t,vt),K($t,_t,null),d(_t,bt),K(wt,_t,null),d(_t,xt),K(Ct,_t,null),d(_t,kt),K(Et,_t,null),d(_t,Tt),K(St,_t,null),d(_t,It),K(Ot,_t,null),d(_t,Rt),K(At,_t,null),d(_t,Mt),K(Nt,_t,null),d(_t,Bt),K(Dt,_t,null),d(_t,qt),K(Lt,_t,null),d(_t,jt),K(Pt,_t,null),d(_t,Ft),K(Ut,_t,null),Ht=!0},p(t,e){const n={};if(1&e[0]&&(n.item=t[0]),r.$set(n),(!Ht||1&e[0])&&Gt!==(Gt=st(t[0])+"")&&b(i,Gt),t[5].length&&Kt.p(t,e),(!Ht||1&e[0])&&Wt!==(Wt=ft(t[0].volume)+"")&&b(E,Wt),(!Ht||1&e[0])&&zt!==(zt=pt(t[0].weight)+"")&&b(I,zt),(!Ht||1&e[0])&&Yt!==(Yt=t[2](t[0])+"")&&b(A,Yt),t[12].length&&Xt.p(t,e),t[10].length&&Zt.p(t,e),t[0].weapon_category?.length?te?(te.p(t,e),1&e[0]&&W(te,1)):(te=Ss(t),te.c(),W(te,1),te.m(w,B)):te&&(H(),z(te,1,1,(()=>{te=null})),G()),128&e[0]){let n;for(ee=t[7],n=0;n<ee.length;n+=1){const r=$s(t,ee,n);ne[n]?(ne[n].p(r,e),W(ne[n],1)):(ne[n]=Rs(r),ne[n].c(),W(ne[n],1),ne[n].m(q,null))}for(H(),n=ee.length;n<ne.length;n+=1)re(n);G(),ee.length?oe&&(oe.d(1),oe=null):oe||(oe=Os(),oe.c(),oe.m(q,null))}t[8].length&&ie.p(t,e),(t[3].length||t[4].length)&&le.p(t,e),t[14].length&&se.p(t,e),t[13]&&ae.p(t,e),t[15].length&&ce.p(t,e),(!Ht||1&e[0])&&Vt!==(Vt=it(t[0].description)+"")&&b(Z,Vt),t[16]&&ue.p(t,e),"BOOK"===t[0].type?de?(de.p(t,e),1&e[0]&&W(de,1)):(de=Ls(t),de.c(),W(de,1),de.m(nt.parentNode,nt)):de&&(H(),z(de,1,1,(()=>{de=null})),G()),"ARMOR"===t[0].type||"TOOL_ARMOR"===t[0].type?fe?(fe.p(t,e),1&e[0]&&W(fe,1)):(fe=js(t),fe.c(),W(fe,1),fe.m(rt.parentNode,rt)):fe&&(H(),z(fe,1,1,(()=>{fe=null})),G()),"TOOL"===t[0].type||"TOOL_ARMOR"===t[0].type?pe?(pe.p(t,e),1&e[0]&&W(pe,1)):(pe=Us(t),pe.c(),W(pe,1),pe.m(ot.parentNode,ot)):pe&&(H(),z(pe,1,1,(()=>{pe=null})),G()),"ENGINE"===t[0].type&&t[0].displacement?me?me.p(t,e):(me=Hs(t),me.c(),me.m(lt.parentNode,lt)):me&&(me.d(1),me=null),"COMESTIBLE"===t[0].type?he?(he.p(t,e),1&e[0]&&W(he,1)):(he=Gs(t),he.c(),W(he,1),he.m(at.parentNode,at)):he&&(H(),z(he,1,1,(()=>{he=null})),G()),"WHEEL"===t[0].type?ge?(ge.p(t,e),1&e[0]&&W(ge,1)):(ge=Ws(t),ge.c(),W(ge,1),ge.m(ct.parentNode,ct)):ge&&(H(),z(ge,1,1,(()=>{ge=null})),G()),t[0].seed_data?_e?(_e.p(t,e),1&e[0]&&W(_e,1)):(_e=zs(t),_e.c(),W(_e,1),_e.m(ut.parentNode,ut)):_e&&(H(),z(_e,1,1,(()=>{_e=null})),G()),t[0].bashing||t[0].cutting||"GUN"===t[0].type||"AMMO"===t[0].type?ye?(ye.p(t,e),1&e[0]&&W(ye,1)):(ye=Vs(t),ye.c(),W(ye,1),ye.m(dt.parentNode,dt)):ye&&(H(),z(ye,1,1,(()=>{ye=null})),G()),Jt&&ve.p(t,e);const o={};1&e[0]&&(o.item_id=t[0].id),ht.$set(o);const l={};1&e[0]&&(l.item_id=t[0].id),$t.$set(l);const s={};1&e[0]&&(s.item_id=t[0].id),wt.$set(s);const a={};1&e[0]&&(a.item_id=t[0].id),Ct.$set(a);const c={};1&e[0]&&(c.item_id=t[0].id),Et.$set(c);const u={};1&e[0]&&(u.item_id=t[0].id),St.$set(u);const d={};1&e[0]&&(d.item_id=t[0].id),Ot.$set(d);const f={};1&e[0]&&(f.item_id=t[0].id),At.$set(f);const p={};1&e[0]&&(p.item_id=t[0].id),Nt.$set(p);const m={};1&e[0]&&(m.item_id=t[0].id),Dt.$set(m);const h={};1&e[0]&&(h.item_id=t[0].id),Lt.$set(h);const g={};1&e[0]&&(g.item_id=t[0].id),Pt.$set(g);const _={};1&e[0]&&(_.item_id=t[0].id),Ut.$set(_)},i(t){if(!Ht){W(r.$$.fragment,t),W(Kt),W(Xt),W(Zt),W(te);for(let t=0;t<ee.length;t+=1)W(ne[t]);W(ie),W(le),W(se),W(ae),W(ue),W(de),W(fe),W(pe),W(he),W(ge),W(_e),W(ye),W(ve),W(ht.$$.fragment,t),W($t.$$.fragment,t),W(wt.$$.fragment,t),W(Ct.$$.fragment,t),W(Et.$$.fragment,t),W(St.$$.fragment,t),W(Ot.$$.fragment,t),W(At.$$.fragment,t),W(Nt.$$.fragment,t),W(Dt.$$.fragment,t),W(Lt.$$.fragment,t),W(Pt.$$.fragment,t),W(Ut.$$.fragment,t),Ht=!0}},o(t){z(r.$$.fragment,t),z(Kt),z(Xt),z(Zt),z(te),ne=ne.filter(Boolean);for(let t=0;t<ne.length;t+=1)z(ne[t]);z(ie),z(le),z(se),z(ae),z(ue),z(de),z(fe),z(pe),z(he),z(ge),z(_e),z(ye),z(ve),z(ht.$$.fragment,t),z($t.$$.fragment,t),z(wt.$$.fragment,t),z(Ct.$$.fragment,t),z(Et.$$.fragment,t),z(St.$$.fragment,t),z(Ot.$$.fragment,t),z(At.$$.fragment,t),z(Nt.$$.fragment,t),z(Dt.$$.fragment,t),z(Lt.$$.fragment,t),z(Pt.$$.fragment,t),z(Ut.$$.fragment,t),Ht=!1},d(t){t&&p(n),X(r),t&&p(l),t&&p(s),Kt&&Kt.d(),Xt&&Xt.d(),Zt&&Zt.d(),te&&te.d(),m(ne,t),oe&&oe.d(),ie&&ie.d(),le&&le.d(),se&&se.d(),ae&&ae.d(),ce&&ce.d(),ue&&ue.d(),t&&p(et),de&&de.d(t),t&&p(nt),fe&&fe.d(t),t&&p(rt),pe&&pe.d(t),t&&p(ot),me&&me.d(t),t&&p(lt),he&&he.d(t),t&&p(at),ge&&ge.d(t),t&&p(ct),_e&&_e.d(t),t&&p(ut),ye&&ye.d(t),t&&p(dt),ve&&ve.d(t),t&&p(mt),X(ht,t),t&&p(gt),t&&p(_t),X($t),X(wt),X(Ct),X(Et),X(St),X(Ot),X(At),X(Nt),X(Dt),X(Lt),X(Pt),X(Ut)}}}const na=t=>"CONTAINER"===t.pocket_type,ra=t=>"CONTAINER"===t.pocket_type;function oa(t,e,n){var r,o,i,l,s;let{item:a}=e,c=I("data");let u=(null!==(r=a.qualities)&&void 0!==r?r:[]).map((([t,e])=>({quality:c.byId("tool_quality",t),level:e}))),d=(null!==(o=a.charged_qualities)&&void 0!==o?o:[]).map((([t,e])=>({quality:c.byId("tool_quality",t),level:e})));const f=null==a.material?[]:"string"==typeof a.material?[{type:a.material,portion:1}]:"string"==typeof a.material[0]?a.material.map((t=>({type:t,portion:1}))):a.material;const p=f.reduce(((t,e)=>{var n;return t+(null!==(n=e.portion)&&void 0!==n?n:1)}),0);let m=(null!==(i=a.flags)&&void 0!==i?i:[]).map((t=>{var e;return null!==(e=c.byId("json_flag",t))&&void 0!==e?e:{id:t}})),h=(null!==(l=a.faults)&&void 0!==l?l:[]).map((t=>c.byId("fault",t)));const g={pocket_type:"CONTAINER",min_item_volume:"0 ml",moves:100,fire_protection:!1,watertight:!1,airtight:!1,open_container:!1,rigid:!1,holster:!1};let _=(null!==(s=a.pocket_data)&&void 0!==s?s:[]).map((t=>({...g,...t}))),y=_.filter((t=>"MAGAZINE_WELL"===t.pocket_type)).flatMap((t=>{var e,n;return null!==(n=null===(e=t.item_restriction)||void 0===e?void 0:e.map((t=>({type:"item",id:t}))))&&void 0!==n?n:t.flag_restriction.map((t=>({type:"json_flag",id:t})))}));function v(t){var e;let n=0;for(const r of _)"MAGAZINE"===r.pocket_type&&r.ammo_restriction&&(n+=null!==(e=r.ammo_restriction[t])&&void 0!==e?e:0);return n}let $=_.flatMap((t=>{var e;return"MAGAZINE"===t.pocket_type?Object.keys(null!==(e=t.ammo_restriction)&&void 0!==e?e:{}):[]}));const b=(()=>{const t=c.uncraftRecipe(a.id);if(!t)return;return{components:(t.using?Array.isArray(t.using)?t.using:[[t.using,1]]:[]).map((([t,e])=>[c.byId("requirement",t),e])).concat([[t,1]]).flatMap((([t,e])=>{var n;return c.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))})).map((t=>t[0]))}})(),w=c.byType("vehicle_part").filter((t=>t.id&&t.item===a.id)),x=(C=a.use_action,"string"==typeof C?[{type:C}]:Array.isArray(C)?C.map((t=>"string"==typeof t?{type:t}:Array.isArray(t)?{type:t[0]}:t)):C?[C]:[]).map((t=>"repair_item"===t.type?{type:t.item_action_type}:t));var C;const k=a.ascii_picture&&c.byId("ascii_art",a.ascii_picture);return t.$$set=t=>{"item"in t&&n(0,a=t.item)},[a,c,function(t){return t.longest_side?t.longest_side:`${Math.round(Math.cbrt(ut(t.volume)))} cm`},u,d,f,p,m,h,_,y,v,$,b,w,x,k,t=>({id:t,max_charges:v(t)})]}class ia extends tt{constructor(t){super(),Q(this,t,oa,ea,i,{item:0},[-1,-1,-1])}}function la(e){let n,r,o=JSON.stringify(e[0],null,2)+"";return{c(){n=h("pre"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p(t,[e]){1&e&&o!==(o=JSON.stringify(t[0],null,2)+"")&&b(r,o)},i:t,o:t,d(t){t&&p(n)}}}function sa(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class aa extends tt{constructor(t){super(),Q(this,t,sa,la,i,{item:0})}}function ca(t){let e,n,r,o;return r=new Nt({props:{type:"item",id:t[0].repaired_with}}),{c(){e=h("dt"),e.textContent="Repaired With",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].repaired_with),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function ua(t){let e,n,r,o;return r=new Nt({props:{type:"item",id:t[0].salvaged_into}}),{c(){e=h("dt"),e.textContent="Salvaged Into",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].salvaged_into),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function da(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{id:t[0].id,type:"item"}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function fa(t){let e,n,r,o,i,l,s,a,c,u,m,v,w,x,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,Y,V,Z,Q,tt,et,nt,rt,ot,it,lt,at,ct,ut,dt,ft,pt,mt,ht,gt=st(t[0])+"",_t=t[0].density+"",yt=(t[0].specific_heat_liquid??4.186)+"",vt=(t[0].specific_heat_solid??2.108)+"",$t=(t[0].latent_heat??334)+"",bt=(t[0].bash_resist??0)+"",wt=(t[0].cut_resist??0)+"",xt=(t[0].bullet_resist??0)+"",Ct=(t[0].acid_resist??0)+"",kt=(t[0].chip_resist??0)+"",Et=0===t[0].elec_resist||1===t[0].elec_resist||t[0].conductive?"yes":"no",Tt=t[0].edible?"yes":"no",St=t[0].rotting?"yes":"no",It=t[0].repaired_with&&ca(t),Ot=t[0].salvaged_into&&ua(t),Rt=t[1].length&&function(t){let e,n,r,o,i,l,s,a=st(t[0])+"";return l=new xe({props:{items:t[1],$$slots:{default:[da,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),r=g("Items Made From "),o=g(a),i=_(),J(l.$$.fragment)},m(t,a){f(t,e,a),d(e,n),d(n,r),d(n,o),d(e,i),K(l,e,null),s=!0},p(t,e){(!s||1&e)&&a!==(a=st(t[0])+"")&&b(o,a);const n={};9&e&&(n.$$scope={dirty:e,ctx:t}),l.$set(n)},i(t){s||(W(l.$$.fragment,t),s=!0)},o(t){z(l.$$.fragment,t),s=!1},d(t){t&&p(e),X(l)}}}(t);return{c(){e=h("h1"),n=g("Material: "),r=g(gt),o=_(),i=h("section"),l=h("h1"),l.textContent="Properties",s=_(),a=h("dl"),c=h("dt"),c.textContent="Density",u=h("dd"),m=g(_t),v=h("dt"),v.textContent="Specific Heat",w=h("dd"),x=g(yt),C=g(" (liquid) / "),k=g(vt),E=g(" (solid)\n    "),T=h("dt"),T.textContent="Latent Heat",S=h("dd"),I=g($t),O=h("dt"),O.textContent="Resistance",R=h("dd"),A=h("dl"),M=h("dt"),M.textContent="Bash",N=h("dd"),B=g(bt),D=h("dt"),D.textContent="Cut",q=h("dd"),L=g(wt),j=h("dt"),j.textContent="Ballistic",P=h("dd"),F=g(xt),U=h("dt"),U.textContent="Acid",Y=h("dd"),V=g(Ct),Z=h("dt"),Z.textContent="Chip",Q=h("dd"),tt=g(kt),et=h("dt"),et.textContent="Conductive",nt=h("dd"),rt=g(Et),ot=_(),It&&It.c(),it=y(),Ot&&Ot.c(),lt=h("dt"),lt.textContent="Edible",at=h("dd"),ct=g(Tt),ut=h("dt"),ut.textContent="Rots",dt=h("dd"),ft=g(St),pt=_(),Rt&&Rt.c(),mt=y(),$(c,"title","Relative to 'powder', which is 1"),$(Z,"title","Resistance to physical damage of the item itself"),$(ut,"title","Corpses made of this material will go bad")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(i,s),d(i,a),d(a,c),d(a,u),d(u,m),d(a,v),d(a,w),d(w,x),d(w,C),d(w,k),d(w,E),d(a,T),d(a,S),d(S,I),d(a,O),d(a,R),d(R,A),d(A,M),d(A,N),d(N,B),d(A,D),d(A,q),d(q,L),d(A,j),d(A,P),d(P,F),d(A,U),d(A,Y),d(Y,V),d(A,Z),d(A,Q),d(Q,tt),d(A,et),d(A,nt),d(nt,rt),d(R,ot),It&&It.m(a,null),d(a,it),Ot&&Ot.m(a,null),d(a,lt),d(a,at),d(at,ct),d(a,ut),d(a,dt),d(dt,ft),f(t,pt,p),Rt&&Rt.m(t,p),f(t,mt,p),ht=!0},p(t,[e]){(!ht||1&e)&&gt!==(gt=st(t[0])+"")&&b(r,gt),(!ht||1&e)&&_t!==(_t=t[0].density+"")&&b(m,_t),(!ht||1&e)&&yt!==(yt=(t[0].specific_heat_liquid??4.186)+"")&&b(x,yt),(!ht||1&e)&&vt!==(vt=(t[0].specific_heat_solid??2.108)+"")&&b(k,vt),(!ht||1&e)&&$t!==($t=(t[0].latent_heat??334)+"")&&b(I,$t),(!ht||1&e)&&bt!==(bt=(t[0].bash_resist??0)+"")&&b(B,bt),(!ht||1&e)&&wt!==(wt=(t[0].cut_resist??0)+"")&&b(L,wt),(!ht||1&e)&&xt!==(xt=(t[0].bullet_resist??0)+"")&&b(F,xt),(!ht||1&e)&&Ct!==(Ct=(t[0].acid_resist??0)+"")&&b(V,Ct),(!ht||1&e)&&kt!==(kt=(t[0].chip_resist??0)+"")&&b(tt,kt),(!ht||1&e)&&Et!==(Et=0===t[0].elec_resist||1===t[0].elec_resist||t[0].conductive?"yes":"no")&&b(rt,Et),t[0].repaired_with?It?(It.p(t,e),1&e&&W(It,1)):(It=ca(t),It.c(),W(It,1),It.m(a,it)):It&&(H(),z(It,1,1,(()=>{It=null})),G()),t[0].salvaged_into?Ot?(Ot.p(t,e),1&e&&W(Ot,1)):(Ot=ua(t),Ot.c(),W(Ot,1),Ot.m(a,lt)):Ot&&(H(),z(Ot,1,1,(()=>{Ot=null})),G()),(!ht||1&e)&&Tt!==(Tt=t[0].edible?"yes":"no")&&b(ct,Tt),(!ht||1&e)&&St!==(St=t[0].rotting?"yes":"no")&&b(ft,St),t[1].length&&Rt.p(t,e)},i(t){ht||(W(It),W(Ot),W(Rt),ht=!0)},o(t){z(It),z(Ot),z(Rt),ht=!1},d(t){t&&p(e),t&&p(o),t&&p(i),It&&It.d(),Ot&&Ot.d(),t&&p(pt),Rt&&Rt.d(t),t&&p(mt)}}}function pa(t,e,n){const r=I("data");let{item:o}=e,i=r.byType("item").filter((t=>{const e=null==t.material?[]:"string"==typeof t.material?[t.material]:"string"==typeof t.material[0]?t.material:t.material.map((t=>t.type));return t.id&&e.some((t=>t===o.id))})).sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,i]}class ma extends tt{constructor(t){super(),Q(this,t,pa,fa,i,{item:0})}}function ha(t,e,n){const r=t.slice();return r[6]=e[n],r}function ga(t){let e;return{c(){e=g("(default)")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function _a(t){let e,n,r,o,i;n=new Nt({props:{type:"item",id:t[6].id}});let l=t[6].id===t[0].default&&ga();return{c(){e=h("li"),J(n.$$.fragment),r=_(),l&&l.c(),o=_()},m(t,s){f(t,e,s),K(n,e,null),d(e,r),l&&l.m(e,null),d(e,o),i=!0},p(t,n){t[6].id===t[0].default?l||(l=ga(),l.c(),l.m(e,o)):l&&(l.d(1),l=null)},i(t){i||(W(n.$$.fragment,t),i=!0)},o(t){z(n.$$.fragment,t),i=!1},d(t){t&&p(e),X(n),l&&l.d()}}}function ya(e){let n;return{c(){n=h("p"),n.innerHTML='<em style="color: var(--cata-color-gray)">No items use this ammo.</em>'},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function va(t){let e,n;return e=new xe({props:{items:t[2],$$slots:{default:[$a,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};513&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function $a(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function ba(t){let e,n,r,o,i,l,s,a,c,u,y,v,$,w,x,C=st(t[0])+"",k=t[1],E=[];for(let e=0;e<k.length;e+=1)E[e]=_a(ha(t,k,e));const T=t=>z(E[t],1,1,(()=>{E[t]=null})),S=[va,ya],I=[];return $=function(t,e){return t[2].length>0?0:1}(t),w=I[$]=S[$](t),{c(){e=h("h1"),n=g("Ammunition Type: "),r=g(C),o=_(),i=h("section"),l=h("h1"),l.textContent="Compatible Variants",s=_(),a=h("ul");for(let t=0;t<E.length;t+=1)E[t].c();c=_(),u=h("section"),y=h("h1"),y.textContent="Used By",v=_(),w.c()},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(i,s),d(i,a);for(let t=0;t<E.length;t+=1)E[t].m(a,null);f(t,c,p),f(t,u,p),d(u,y),d(u,v),I[$].m(u,null),x=!0},p(t,[e]){if((!x||1&e)&&C!==(C=st(t[0])+"")&&b(r,C),3&e){let n;for(k=t[1],n=0;n<k.length;n+=1){const r=ha(t,k,n);E[n]?(E[n].p(r,e),W(E[n],1)):(E[n]=_a(r),E[n].c(),W(E[n],1),E[n].m(a,null))}for(H(),n=k.length;n<E.length;n+=1)T(n);G()}w.p(t,e)},i(t){if(!x){for(let t=0;t<k.length;t+=1)W(E[t]);W(w),x=!0}},o(t){E=E.filter(Boolean);for(let t=0;t<E.length;t+=1)z(E[t]);z(w),x=!1},d(t){t&&p(e),t&&p(o),t&&p(i),m(E,t),t&&p(c),t&&p(u),I[$].d()}}}function wa(t,e,n){let{item:r}=e;const o=I("data"),i=o.byType("item").flatMap((t=>"AMMO"===t.type&&t.id&&t.ammo_type===r.id?[t]:[]));i.sort(((t,e)=>st(t).localeCompare(st(e))));const l={pocket_type:"CONTAINER",min_item_volume:"0 ml",moves:100,fire_protection:!1,watertight:!1,airtight:!1,open_container:!1,rigid:!1,holster:!1},s=o.byType("item").filter((t=>((t,e)=>{var n;return(null!==(n=t.pocket_data)&&void 0!==n?n:[]).map((t=>({...l,...t}))).flatMap((t=>{var e;return"MAGAZINE"===t.pocket_type?Object.keys(null!==(e=t.ammo_restriction)&&void 0!==e?e:{}):[]})).some((t=>t===e.id))})(t,r)));return s.sort(((t,e)=>st(t).localeCompare(st(e)))),t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,i,s]}class xa extends tt{constructor(t){super(),Q(this,t,wa,ba,i,{item:0})}}function Ca(t,e,n){const r=t.slice();return r[11]=e[n],r}function ka(t,e,n){const r=t.slice();return r[11]=e[n],r}function Ea(t,e,n){const r=t.slice();return r[11]=e[n],r}function Ta(t,e,n){const r=t.slice();return r[11]=e[n][0],r[18]=e[n][1],r}function Sa(t,e,n){const r=t.slice();return r[21]=e[n],r}function Ia(t){let e,n,r,o,i=t[0].usages,l=[];for(let e=0;e<i.length;e+=1)l[e]=Ra(Ta(t,i,e));return{c(){e=h("section"),n=h("h1"),n.textContent="Usages",r=_(),o=h("dl");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,i){f(t,e,i),d(e,n),d(e,r),d(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null)},p(t,e){if(1&e){let n;for(i=t[0].usages,n=0;n<i.length;n+=1){const r=Ta(t,i,n);l[n]?l[n].p(r,e):(l[n]=Ra(r),l[n].c(),l[n].m(o,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),m(l,t)}}}function Oa(t){let e,n,r=t[21]+"";return{c(){e=h("li"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=t[21]+"")&&b(n,r)},d(t){t&&p(e)}}}function Ra(t){let e,n,r,o,i,l,s=t[11]+"",a=t[18],c=[];for(let e=0;e<a.length;e+=1)c[e]=Oa(Sa(t,a,e));return{c(){e=h("dt"),n=g("At Level "),r=g(s),o=h("dd"),i=h("ul");for(let t=0;t<c.length;t+=1)c[t].c();l=_(),x(e,"font-variant","tabular-nums"),$(i,"class","comma-separated")},m(t,s){f(t,e,s),d(e,n),d(e,r),f(t,o,s),d(o,i);for(let t=0;t<c.length;t+=1)c[t].m(i,null);d(o,l)},p(t,e){if(1&e&&s!==(s=t[11]+"")&&b(r,s),1&e){let n;for(a=t[18],n=0;n<a.length;n+=1){const r=Sa(t,a,n);c[n]?c[n].p(r,e):(c[n]=Oa(r),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},d(t){t&&p(e),t&&p(o),m(c,t)}}}function Aa(t){let e,n;return e=new Nt({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Ma(t){let e,n,r,o,i,l,s,a=t[11]+"";return i=new xe({props:{items:t[1].get(t[11]).sort(t[4]),limit:20,$$slots:{default:[Aa,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("dt"),n=g("Level "),r=g(a),o=h("dd"),J(i.$$.fragment),l=_(),x(e,"font-variant","tabular-nums")},m(t,a){f(t,e,a),d(e,n),d(e,r),f(t,o,a),K(i,o,null),d(o,l),s=!0},p(t,e){const n={};16777217&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){s||(W(i.$$.fragment,t),s=!0)},o(t){z(i.$$.fragment,t),s=!1},d(t){t&&p(e),t&&p(o),X(i)}}}function Na(t){let e,n;return e=new Nt({props:{type:"vehicle_part",id:t[0].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Ba(t){let e,n,r,o,i,l,s,a=t[11]+"";return i=new xe({props:{items:t[2].get(t[11]).sort(t[5]),limit:20,$$slots:{default:[Na,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("dt"),n=g("Level "),r=g(a),o=h("dd"),J(i.$$.fragment),l=_(),x(e,"font-variant","tabular-nums")},m(t,a){f(t,e,a),d(e,n),d(e,r),f(t,o,a),K(i,o,null),d(o,l),s=!0},p(t,e){const n={};16777217&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){s||(W(i.$$.fragment,t),s=!0)},o(t){z(i.$$.fragment,t),s=!1},d(t){t&&p(e),t&&p(o),X(i)}}}function Da(t){let e,n;return e=new Nt({props:{type:"item",id:t[0]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function qa(t){let e,n,r,o,i,l,s,a=t[11]+"";return i=new xe({props:{items:t[3].get(t[11]),limit:20,$$slots:{default:[Da,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("dt"),n=g("Level "),r=g(a),o=h("dd"),J(i.$$.fragment),l=_(),x(e,"font-variant","tabular-nums")},m(t,a){f(t,e,a),d(e,n),d(e,r),f(t,o,a),K(i,o,null),d(o,l),s=!0},p(t,e){const n={};16777217&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){s||(W(i.$$.fragment,t),s=!0)},o(t){z(i.$$.fragment,t),s=!1},d(t){t&&p(e),t&&p(o),X(i)}}}function La(t){let e,n,r,o,i,l,s,a,c,u,v,$,w,x=st(t[0])+"",C=t[0].usages&&Ia(t),k=[...t[1].keys()].sort(ja),E=[];for(let e=0;e<k.length;e+=1)E[e]=Ma(Ea(t,k,e));const T=t=>z(E[t],1,1,(()=>{E[t]=null}));let S=t[2].size>0&&function(t){let e,n,r,o,i,l=[...t[2].keys()].sort(Pa),s=[];for(let e=0;e<l.length;e+=1)s[e]=Ba(ka(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Vehicle Parts",r=_(),o=h("dl");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(5&e){let n;for(l=[...t[2].keys()].sort(Pa),n=0;n<l.length;n+=1){const r=ka(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=Ba(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),m(s,t)}}}(t),I=t[3].size>0&&function(t){let e,n,r,o,i,l=[...t[3].keys()].sort(Fa),s=[];for(let e=0;e<l.length;e+=1)s[e]=qa(Ca(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Recipes",r=_(),o=h("dl");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(9&e){let n;for(l=[...t[3].keys()].sort(Fa),n=0;n<l.length;n+=1){const r=Ca(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=qa(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),m(s,t)}}}(t);return{c(){e=h("h1"),n=g("Quality: "),r=g(x),o=_(),C&&C.c(),i=_(),l=h("section"),s=h("h1"),s.textContent="Tools",a=_(),c=h("dl");for(let t=0;t<E.length;t+=1)E[t].c();u=_(),S&&S.c(),v=_(),I&&I.c(),$=y()},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),C&&C.m(t,p),f(t,i,p),f(t,l,p),d(l,s),d(l,a),d(l,c);for(let t=0;t<E.length;t+=1)E[t].m(c,null);f(t,u,p),S&&S.m(t,p),f(t,v,p),I&&I.m(t,p),f(t,$,p),w=!0},p(t,[e]){if((!w||1&e)&&x!==(x=st(t[0])+"")&&b(r,x),t[0].usages?C?C.p(t,e):(C=Ia(t),C.c(),C.m(i.parentNode,i)):C&&(C.d(1),C=null),3&e){let n;for(k=[...t[1].keys()].sort(ja),n=0;n<k.length;n+=1){const r=Ea(t,k,n);E[n]?(E[n].p(r,e),W(E[n],1)):(E[n]=Ma(r),E[n].c(),W(E[n],1),E[n].m(c,null))}for(H(),n=k.length;n<E.length;n+=1)T(n);G()}t[2].size>0&&S.p(t,e),t[3].size>0&&I.p(t,e)},i(t){if(!w){for(let t=0;t<k.length;t+=1)W(E[t]);W(S),W(I),w=!0}},o(t){E=E.filter(Boolean);for(let t=0;t<E.length;t+=1)z(E[t]);z(S),z(I),w=!1},d(t){t&&p(e),t&&p(o),C&&C.d(t),t&&p(i),t&&p(l),m(E,t),t&&p(u),S&&S.d(t),t&&p(v),I&&I.d(t),t&&p($)}}}const ja=(t,e)=>t-e,Pa=(t,e)=>t-e,Fa=(t,e)=>t-e;function Ua(t,e,n){var r,o,i;let{item:l}=e,s=I("data"),a=new Map;for(const t of s.byType("item")){if(!t.id)continue;const e=(null!==(r=t.qualities)&&void 0!==r?r:[]).concat(null!==(o=t.charged_qualities)&&void 0!==o?o:[]).find((([t,e])=>t===l.id));if(e){const[,n]=e;a.has(n)||a.set(n,[]),a.get(n).push(t)}}const c=new Map;for(const t of s.byType("vehicle_part")){if(!t.id)continue;const e=(null!==(i=t.qualities)&&void 0!==i?i:[]).find((([t,e])=>t===l.id));if(e){const[,n]=e;c.has(n)||c.set(n,[]),c.get(n).push(t)}}const u=new Map;for(const t of s.byType("recipe")){if(t.construction_blueprint)continue;const{qualities:e}=s.normalizeRequirements(t);for(const n of e)for(const{id:e,level:r}of n)e===l.id&&(u.has(r)||u.set(r,new Set),u.get(r).add(t.result))}const d=new Map;for(const[t,e]of u)d.set(t,[...e].sort(((t,e)=>st(s.byId("item",t)).localeCompare(st(s.byId("item",e))))));return t.$$set=t=>{"item"in t&&n(0,l=t.item)},[l,a,c,d,(t,e)=>st(t).localeCompare(st(e)),(t,e)=>st(t).localeCompare(st(e))]}class Ha extends tt{constructor(t){super(),Q(this,t,Ua,La,i,{item:0})}}function Ga(t,e,n){const r=t.slice();return r[11]=e[n].id,r[12]=e[n].count,r}function Wa(t,e,n){const r=t.slice();return r[15]=e[n],r}function za(t,e,n){const r=t.slice();return r[11]=e[n].id,r[12]=e[n].count,r[19]=n,r}function Ya(t,e,n){const r=t.slice();return r[20]=e[n],r}function Va(t,e,n){const r=t.slice();return r[23]=e[n],r[19]=n,r}function Ja(t,e,n){const r=t.slice();return r[25]=e[n],r}function Ka(t,e,n){const r=t.slice();return r[28]=e[n],r[19]=n,r}function Xa(t,e,n){const r=t.slice();return r[11]=e[n][0],r[30]=e[n][1],r[19]=n,r}function Za(t){let e,n,r=st(t[2].byId("construction_group",t[0].group))+"";return{c(){e=h("h1"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e[0]&&r!==(r=st(t[2].byId("construction_group",t[0].group))+"")&&b(n,r)},d(t){t&&p(e)}}}function Qa(t){let e,n,r,o;const i=[ec,tc],l=[];function s(t,e){return t[0].skill?0:1}return e=s(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,o){let a=e;e=s(t),e===a?l[e].p(t,o):(H(),z(l[a],1,1,(()=>{l[a]=null})),G(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function tc(e){let n;return{c(){n=h("em"),n.textContent="none"},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function ec(t){let e,n,r,o,i,l=(t[0].difficulty??0)+"";return e=new Nt({props:{type:"skill",id:t[0].skill}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,n){const o={};1&n[0]&&(o.id=t[0].skill),e.$set(o),(!i||1&n[0])&&l!==(l=(t[0].difficulty??0)+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function nc(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function rc(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function oc(t){let e,n,r,o,i,l,s=t[30]+"";function a(t,e){return t[19]===t[0].required_skills.length-2?rc:t[19]!==t[0].required_skills.length-1?nc:void 0}e=new Nt({props:{type:"skill",id:t[11]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g(")"),u&&u.c(),i=y()},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),u&&u.m(t,s),f(t,i,s),l=!0},p(t,n){const o={};1&n[0]&&(o.id=t[11]),e.$set(o),(!l||1&n[0])&&s!==(s=t[30]+"")&&b(r,s),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function ic(t){let e,n,r,o,i,l,s;return r=new Qt({props:{item:t[2].byId(t[0].pre_terrain.startsWith("f_")?"furniture":"terrain",t[0].pre_terrain)}}),i=new Nt({props:{type:t[0].pre_terrain.startsWith("f_")?"furniture":"terrain",id:t[0].pre_terrain}}),{c(){e=h("dt"),e.textContent="Requires",n=h("dd"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=_()},m(t,a){f(t,e,a),f(t,n,a),K(r,n,null),d(n,o),K(i,n,null),d(n,l),s=!0},p(t,e){const n={};1&e[0]&&(n.item=t[2].byId(t[0].pre_terrain.startsWith("f_")?"furniture":"terrain",t[0].pre_terrain)),r.$set(n);const o={};1&e[0]&&(o.type=t[0].pre_terrain.startsWith("f_")?"furniture":"terrain"),1&e[0]&&(o.id=t[0].pre_terrain),i.$set(o)},i(t){s||(W(r.$$.fragment,t),W(i.$$.fragment,t),s=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),s=!1},d(t){t&&p(e),t&&p(n),X(r),X(i)}}}function lc(e){let n,r,o,i,l,s,a,c,u,d,m,h=(e[28].amount??1)+"",y=1===(e[28].amount??1)?"":"s",v=e[28].level+"",$=0!==e[19]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return s=new Nt({props:{type:"tool_quality",id:e[28].id}}),{c(){$&&$.c(),n=_(),r=g(h),o=g(" tool"),i=g(y),l=g("\n                with "),J(s.$$.fragment),a=g(" of "),c=g(v),u=g("\n                or more"),d=g("")},m(t,e){$&&$.m(t,e),f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,l,e),K(s,t,e),f(t,a,e),f(t,c,e),f(t,u,e),f(t,d,e),m=!0},p:t,i(t){m||(W(s.$$.fragment,t),m=!0)},o(t){z(s.$$.fragment,t),m=!1},d(t){$&&$.d(t),t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(l),X(s,t),t&&p(a),t&&p(c),t&&p(u),t&&p(d)}}}function sc(t){let e,n,r,o=t[25],i=[];for(let e=0;e<o.length;e+=1)i[e]=lc(Ka(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=g(".")},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(32&r[0]){let s;for(o=t[25],s=0;s<o.length;s+=1){const l=Ka(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=lc(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function ac(e){let n,r;return n=new Nt({props:{type:"item",id:e[23].id}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function cc(e){let n,r,o=st(e[2].byId("item",e[23].id))+"";return{c(){n=h("a"),r=g(o),$(n,"href","#/furniture/"+e[2].craftingPseudoItem(e[23].id))},m(t,e){f(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function uc(e){let n,r,o,i,l=e[23].count+"",s=1!==e[23].count&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("("),r=g(l),o=g(" charge"),s&&s.c(),i=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),s&&s.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),s&&s.d(t),t&&p(i)}}}function dc(t){let e,n,r,o,i,l,s=0!==t[19]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();const a=[cc,ac],c=[];n=function(t,e){return t[2].craftingPseudoItem(t[23].id)?0:1}(t),r=c[n]=a[n](t);let u=t[23].count>0&&uc(t);return{c(){s&&s.c(),e=_(),r.c(),o=_(),u&&u.c(),i=y()},m(t,r){s&&s.m(t,r),f(t,e,r),c[n].m(t,r),f(t,o,r),u&&u.m(t,r),f(t,i,r),l=!0},p(t,e){r.p(t,e),t[23].count>0&&u.p(t,e)},i(t){l||(W(r),l=!0)},o(t){z(r),l=!1},d(t){s&&s.d(t),t&&p(e),c[n].d(t),t&&p(o),u&&u.d(t),t&&p(i)}}}function fc(t){let e,n,r,o=t[20],i=[];for(let e=0;e<o.length;e+=1)i[e]=dc(Va(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=_()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(12&r[0]){let s;for(o=t[20],s=0;s<o.length;s+=1){const l=Va(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=dc(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function pc(e){let n,r,o,i=0!==e[19]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return r=new Nt({props:{id:e[11],count:e[12],type:"item"}}),{c(){i&&i.c(),n=_(),J(r.$$.fragment)},m(t,e){i&&i.m(t,e),f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){i&&i.d(t),t&&p(n),X(r,t)}}}function mc(t){let e,n,r,o=t[15].map(t[7]),i=[];for(let e=0;e<o.length;e+=1)i[e]=pc(za(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=_()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(20&r[0]){let s;for(o=t[15].map(t[7]),s=0;s<o.length;s+=1){const l=za(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=pc(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function hc(e){let n,r,o,i,l,s;return r=new Qt({props:{item:e[2].byId("item",e[11])}}),i=new Nt({props:{type:"item",id:e[11],count:e[12]}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=_()},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,l),s=!0},p:t,i(t){s||(W(r.$$.fragment,t),W(i.$$.fragment,t),s=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),s=!1},d(t){t&&p(n),X(r),X(i)}}}function gc(t){let e,n,r=t[0].pre_note+"";return{c(){e=h("p"),n=g(r),x(e,"color","var(--cata-color-gray)")},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e[0]&&r!==(r=t[0].pre_note+"")&&b(n,r)},d(t){t&&p(e)}}}function _c(t){let e,n,r,o,i,l,s,a,c,u,v,w,x,C,k,E,T,S,I,O,R,A=("number"==typeof t[0].time?`${t[0].time} m`:t[0].time??"0 m")+"",M=JSON.stringify(t[0],null,2)+"",N=t[1]&&Za(t),B=t[0].required_skills??[],D=[];for(let e=0;e<B.length;e+=1)D[e]=oc(Xa(t,B,e));const q=t=>z(D[t],1,1,(()=>{D[t]=null}));let L=null;B.length||(L=Qa(t));let j=t[0].pre_terrain&&ic(t),P=(t[5].length||t[3].length)&&function(t){let e,n,r,o,i,l,s=t[5]??[],a=[];for(let e=0;e<s.length;e+=1)a[e]=sc(Ja(t,s,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));let u=t[3],g=[];for(let e=0;e<u.length;e+=1)g[e]=fc(Ya(t,u,e));const y=t=>z(g[t],1,1,(()=>{g[t]=null}));return{c(){e=h("dt"),e.textContent="Tools Required",n=h("dd"),r=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();o=_();for(let t=0;t<g.length;t+=1)g[t].c();i=_()},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);d(r,o);for(let t=0;t<g.length;t+=1)g[t].m(r,null);d(n,i),l=!0},p(t,e){if(32&e[0]){let n;for(s=t[5]??[],n=0;n<s.length;n+=1){const i=Ja(t,s,n);a[n]?(a[n].p(i,e),W(a[n],1)):(a[n]=sc(i),a[n].c(),W(a[n],1),a[n].m(r,o))}for(H(),n=s.length;n<a.length;n+=1)c(n);G()}if(12&e[0]){let n;for(u=t[3],n=0;n<u.length;n+=1){const o=Ya(t,u,n);g[n]?(g[n].p(o,e),W(g[n],1)):(g[n]=fc(o),g[n].c(),W(g[n],1),g[n].m(r,null))}for(H(),n=u.length;n<g.length;n+=1)y(n);G()}},i(t){if(!l){for(let t=0;t<s.length;t+=1)W(a[t]);for(let t=0;t<u.length;t+=1)W(g[t]);l=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)z(g[t]);l=!1},d(t){t&&p(e),t&&p(n),m(a,t),m(g,t)}}}(t),F=t[4].length&&function(t){let e,n,r,o,i,l=t[4],s=[];for(let e=0;e<l.length;e+=1)s[e]=mc(Wa(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Components",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(20&e[0]){let n;for(l=t[4],n=0;n<l.length;n+=1){const o=Wa(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=mc(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),U=t[6].length&&function(t){let e,n,r,o,i=t[6],l=[];for(let e=0;e<i.length;e+=1)l[e]=hc(Ga(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Byproducts",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(68&e[0]){let n;for(i=t[6],n=0;n<i.length;n+=1){const o=Ga(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=hc(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(t),Y=t[0].pre_note&&gc(t);return{c(){e=h("section"),N&&N.c(),n=_(),r=h("dl"),o=h("dt"),o.textContent="Required Skills",i=h("dd");for(let t=0;t<D.length;t+=1)D[t].c();L&&L.c(),l=_(),s=h("dt"),s.textContent="Time",a=h("dd"),c=g(A),u=_(),j&&j.c(),v=y(),P&&P.c(),w=y(),F&&F.c(),x=y(),U&&U.c(),C=_(),Y&&Y.c(),k=_(),E=h("details"),T=h("summary"),T.textContent="Construction JSON",S=_(),I=h("pre"),O=g(M)},m(t,p){f(t,e,p),N&&N.m(e,null),d(e,n),d(e,r),d(r,o),d(r,i);for(let t=0;t<D.length;t+=1)D[t].m(i,null);L&&L.m(i,null),d(i,l),d(r,s),d(r,a),d(a,c),d(a,u),j&&j.m(r,null),d(r,v),P&&P.m(r,null),d(r,w),F&&F.m(r,null),d(r,x),U&&U.m(r,null),d(e,C),Y&&Y.m(e,null),d(e,k),d(e,E),d(E,T),d(E,S),d(E,I),d(I,O),R=!0},p(t,o){if(t[1]?N?N.p(t,o):(N=Za(t),N.c(),N.m(e,n)):N&&(N.d(1),N=null),1&o[0]){let e;for(B=t[0].required_skills??[],e=0;e<B.length;e+=1){const n=Xa(t,B,e);D[e]?(D[e].p(n,o),W(D[e],1)):(D[e]=oc(n),D[e].c(),W(D[e],1),D[e].m(i,l))}for(H(),e=B.length;e<D.length;e+=1)q(e);G(),!B.length&&L?L.p(t,o):B.length?L&&(H(),z(L,1,1,(()=>{L=null})),G()):(L=Qa(t),L.c(),W(L,1),L.m(i,l))}(!R||1&o[0])&&A!==(A=("number"==typeof t[0].time?`${t[0].time} m`:t[0].time??"0 m")+"")&&b(c,A),t[0].pre_terrain?j?(j.p(t,o),1&o[0]&&W(j,1)):(j=ic(t),j.c(),W(j,1),j.m(r,v)):j&&(H(),z(j,1,1,(()=>{j=null})),G()),(t[5].length||t[3].length)&&P.p(t,o),t[4].length&&F.p(t,o),t[6].length&&U.p(t,o),t[0].pre_note?Y?Y.p(t,o):(Y=gc(t),Y.c(),Y.m(e,k)):Y&&(Y.d(1),Y=null),(!R||1&o[0])&&M!==(M=JSON.stringify(t[0],null,2)+"")&&b(O,M)},i(t){if(!R){for(let t=0;t<B.length;t+=1)W(D[t]);W(j),W(P),W(F),W(U),R=!0}},o(t){D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)z(D[t]);z(j),z(P),z(F),z(U),R=!1},d(t){t&&p(e),N&&N.d(),m(D,t),L&&L.d(),j&&j.d(),P&&P.d(),F&&F.d(),U&&U.d(),Y&&Y.d()}}}function yc(t,e,n){var r;const o=I("data");let{construction:i}=e,{includeTitle:l=!1}=e;const s=("string"==typeof i.using?[[i.using,1]]:null!==(r=i.using)&&void 0!==r?r:[]).map((([t,e])=>[o.byId("requirement",t),e])).concat([[i,1]]),a=s.flatMap((([t,e])=>{var n;return o.flattenRequirement(null!==(n=t.tools)&&void 0!==n?n:[],(t=>t.tools),{expandSubstitutes:!0}).map((t=>t.map((t=>({...t,count:t.count*e})))))})),c=s.flatMap((([t,e])=>{var n;return o.flattenRequirement(null!==(n=t.components)&&void 0!==n?n:[],(t=>t.components)).map((t=>t.map((t=>({...t,count:t.count*e})))))})),u=s.flatMap((([t,e])=>{var n;return(null!==(n=t.qualities)&&void 0!==n?n:[]).map((t=>Array.isArray(t)?t:[t]))})),d=o.flattenItemGroup(o.normalizeItemGroup(i.byproducts,"collection"));return t.$$set=t=>{"construction"in t&&n(0,i=t.construction),"includeTitle"in t&&n(1,l=t.includeTitle)},[i,l,o,a,c,u,d,t=>({...t,item:o.byId("item",t.id)})]}class vc extends tt{constructor(t){super(),Q(this,t,yc,_c,i,{construction:0,includeTitle:1},[-1,-1])}}function $c(t,e,n){const r=t.slice();return r[11]=e[n],r}function bc(t,e,n){const r=t.slice();return r[14]=e[n],r}function wc(t,e,n){const r=t.slice();return r[17]=e[n],r}function xc(t,e,n){const r=t.slice();return r[20]=e[n],r}function Cc(t,e,n){const r=t.slice();return r[23]=e[n],r}function kc(t,e,n){const r=t.slice();return r[26]=e[n].id,r[27]=e[n].prob,r}function Ec(t,e,n){const r=t.slice();return r[30]=e[n][0],r[31]=e[n][1],r}function Tc(t,e,n){const r=t.slice();return r[26]=e[n].id,r[27]=e[n].prob,r[34]=e[n].count,r}function Sc(t){let e,n,r=50*t[0].move_cost_mod+"";return{c(){e=g("+"),n=g(r)},m(t,r){f(t,e,r),f(t,n,r)},p(t,e){1&e[0]&&r!==(r=50*t[0].move_cost_mod+"")&&b(n,r)},d(t){t&&p(e),t&&p(n)}}}function Ic(e){let n;return{c(){n=h("em"),n.textContent="impassable"},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Oc(t){let e,n,r,o;return r=new Nt({props:{type:"item",id:t[0].crafting_pseudo_item}}),{c(){e=h("dt"),e.textContent="Provides",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e[0]&&(n.id=t[0].crafting_pseudo_item),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function Rc(e){let n,r,o,i,l,s=e[34][0]+"",a=e[34][1]+"";return{c(){n=g("Â ("),r=g(s),o=g("â€“"),i=g(a),l=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,l,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(l)}}}function Ac(e){let n,r=1!==e[34][0]&&function(e){let n,r,o,i=e[34][0]+"";return{c(){n=g("Â ("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){r&&r.c(),n=y()},m(t,e){r&&r.m(t,e),f(t,n,e)},p(t,e){1!==t[34][0]&&r.p(t,e)},d(t){r&&r.d(t),t&&p(n)}}}function Mc(e){let n,r,o,i,l,s;o=new Nt({props:{type:"item",id:e[26]}});let a=function(t,e){return t[34][0]===t[34][1]?Ac:Rc}(e)(e),c=1!==e[27]&&function(e){let n,r,o,i=function(t){const e=(100*t).toFixed(2);return"0.00"===e?"< 0.01%":e+"%"}(e[27])+"";return{c(){n=g("Â ("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=h("li"),r=h("span"),J(o.$$.fragment),i=g(""),a.c(),l=g(""),c&&c.c(),x(r,"white-space","nowrap")},m(t,e){f(t,n,e),d(n,r),K(o,r,null),d(r,i),a.m(r,null),d(r,l),c&&c.m(r,null),s=!0},p(t,e){a.p(t,e),1!==t[27]&&c.p(t,e)},i(t){s||(W(o.$$.fragment,t),s=!0)},o(t){z(o.$$.fragment,t),s=!1},d(t){t&&p(n),X(o),a.d(),c&&c.d()}}}function Nc(t){let e,n,r=t[31].length&&function(t){let e,n,r,o,i,l,s=t[30]+"",a=t[31],c=[];for(let e=0;e<a.length;e+=1)c[e]=Mc(Tc(t,a,e));const u=t=>z(c[t],1,1,(()=>{c[t]=null}));return{c(){e=h("dt"),n=g(s),r=h("dd"),o=h("ul");for(let t=0;t<c.length;t+=1)c[t].c();i=_(),$(o,"class","comma-separated")},m(t,s){f(t,e,s),d(e,n),f(t,r,s),d(r,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null);d(r,i),l=!0},p(t,e){if(8&e[0]){let n;for(a=t[31],n=0;n<a.length;n+=1){const r=Tc(t,a,n);c[n]?(c[n].p(r,e),W(c[n],1)):(c[n]=Mc(r),c[n].c(),W(c[n],1),c[n].m(o,null))}for(H(),n=a.length;n<c.length;n+=1)u(n);G()}},i(t){if(!l){for(let t=0;t<a.length;t+=1)W(c[t]);l=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)z(c[t]);l=!1},d(t){t&&p(e),t&&p(r),m(c,t)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,e){t[31].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Bc(e){let n,r,o,i,l;return r=new Qt({props:{item:e[1].byId("item",e[23].drop)}}),i=new Nt({props:{type:"item",id:e[23].drop}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),l=!0},p:t,i(t){l||(W(r.$$.fragment,t),W(i.$$.fragment,t),l=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),l=!1},d(t){t&&p(n),X(r),X(i)}}}function Dc(t){let e,n,r=t[1].flattenItemGroup(t[1].byId("item_group",t[23].drop)),o=[];for(let e=0;e<r.length;e+=1)o[e]=qc(kc(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(18&n[0]){let l;for(r=t[1].flattenItemGroup(t[1].byId("item_group",t[23].drop)),l=0;l<r.length;l+=1){const i=kc(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=qc(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function qc(e){let n,r,o,i,l,s,a,c,u=(100*e[27]).toFixed(2)+"";return r=new Qt({props:{item:e[1].byId("item",e[26])}}),i=new Nt({props:{type:"item",id:e[26]}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=g(" ("),s=g(u),a=g("%)")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,l),d(n,s),d(n,a),c=!0},p:t,i(t){c||(W(r.$$.fragment,t),W(i.$$.fragment,t),c=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),c=!1},d(t){t&&p(n),X(r),X(i)}}}function Lc(t){let e,n,r,o;const i=[Dc,Bc],l=[];return e=function(t,e){return"bionic_group"===t[23].type?0:1}(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,e){n.p(t,e)},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function jc(t){let e,n,r=t[20].entries,o=[];for(let e=0;e<r.length;e+=1)o[e]=Lc(Cc(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){e=h("ul");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){f(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){if(18&n[0]){let l;for(r=t[20].entries,l=0;l<r.length;l+=1){const i=Cc(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=Lc(i),o[l].c(),W(o[l],1),o[l].m(e,null))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){t&&p(e),m(o,t)}}}function Pc(t){let e,n,r,o,i,l=t[17]+"",s=[t[1].byId("harvest",t[4].get(t[17]))],a=[];for(let e=0;e<1;e+=1)a[e]=jc(xc(t,s,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));return{c(){e=h("dt"),n=g(l),r=h("dd");for(let t=0;t<1;t+=1)a[t].c();o=_(),x(e,"text-transform","capitalize")},m(t,l){f(t,e,l),d(e,n),f(t,r,l);for(let t=0;t<1;t+=1)a[t].m(r,null);d(r,o),i=!0},p(t,e){if(18&e[0]){let n;for(s=[t[1].byId("harvest",t[4].get(t[17]))],n=0;n<1;n+=1){const i=xc(t,s,n);a[n]?(a[n].p(i,e),W(a[n],1)):(a[n]=jc(i),a[n].c(),W(a[n],1),a[n].m(r,o))}for(H(),n=1;n<1;n+=1)c(n);G()}},i(t){if(!i){for(let t=0;t<1;t+=1)W(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<1;t+=1)z(a[t]);i=!1},d(t){t&&p(e),t&&p(r),m(a,t)}}}function Fc(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Uc(t){let e,n,r;return n=new Nt({props:{type:"json_flag",id:t[14]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e[0]&&(r.id=t[14]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Hc(e){let n,r;return n=new vc({props:{construction:e[11],includeTitle:!0}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function Gc(t){let e,n,r,o,i,l,s,a,c,u,v,w,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,Y,V,Z=st(t[0])+"",Q=(t[0].required_str>=0?t[0].required_str:"not movable")+"",tt=(t[0].coverage??0)+"",et=(t[0].comfort??0)+"",nt=t[0].description+"";function rt(t,e){return t[0].move_cost_mod<0?Ic:Sc}n=new Qt({props:{item:t[0]}});let ot=rt(t),it=ot(t),lt=t[0].crafting_pseudo_item&&Oc(t),at=t[3],ct=[];for(let e=0;e<at.length;e+=1)ct[e]=Nc(Ec(t,at,e));const ut=t=>z(ct[t],1,1,(()=>{ct[t]=null}));let dt=t[4].size&&function(t){let e,n,r,o,i,l=["winter","spring","summer","autumn"].filter(t[5]),s=[];for(let e=0;e<l.length;e+=1)s[e]=Pc(wc(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Harvest",n=h("dd"),r=h("dl");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(18&e[0]){let n;for(l=["winter","spring","summer","autumn"].filter(t[5]),n=0;n<l.length;n+=1){const o=wc(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Pc(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),ft=t[0].flags??[],pt=[];for(let e=0;e<ft.length;e+=1)pt[e]=Uc(bc(t,ft,e));const mt=t=>z(pt[t],1,1,(()=>{pt[t]=null}));let ht=null;ft.length||(ht=Fc());let gt=t[2].length&&function(t){let e,n,r,o,i=t[2],l=[];for(let e=0;e<i.length;e+=1)l[e]=Hc($c(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("h2"),e.textContent="Construction",n=_();for(let t=0;t<l.length;t+=1)l[t].c();r=y()},m(t,i){f(t,e,i),f(t,n,i);for(let e=0;e<l.length;e+=1)l[e].m(t,i);f(t,r,i),o=!0},p(t,e){if(4&e[0]){let n;for(i=t[2],n=0;n<i.length;n+=1){const o=$c(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=Hc(o),l[n].c(),W(l[n],1),l[n].m(r.parentNode,r))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t),t&&p(r)}}}(t);return{c(){e=h("h1"),J(n.$$.fragment),r=_(),o=g(Z),i=_(),l=h("section"),s=h("h1"),s.textContent="General",a=_(),c=h("dl"),u=h("dt"),u.textContent="Move Cost Modifier",v=h("dd"),it.c(),w=_(),C=h("dt"),C.textContent="Strength Required to Drag",k=h("dd"),E=g(Q),T=h("dt"),T.textContent="Coverage",S=h("dd"),I=g(tt),O=g("%"),R=h("dt"),R.textContent="Comfort",A=h("dd"),M=g(et),lt&&lt.c(),N=y();for(let t=0;t<ct.length;t+=1)ct[t].c();B=y(),dt&&dt.c(),D=h("dt"),D.textContent="Flags",q=h("dd"),L=h("ul");for(let t=0;t<pt.length;t+=1)pt[t].c();ht&&ht.c(),j=_(),P=h("p"),F=g(nt),U=_(),gt&&gt.c(),Y=y(),$(L,"class","comma-separated"),x(P,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),K(n,e,null),d(e,r),d(e,o),f(t,i,p),f(t,l,p),d(l,s),d(l,a),d(l,c),d(c,u),d(c,v),it.m(v,null),d(v,w),d(c,C),d(c,k),d(k,E),d(c,T),d(c,S),d(S,I),d(S,O),d(c,R),d(c,A),d(A,M),lt&&lt.m(c,null),d(c,N);for(let t=0;t<ct.length;t+=1)ct[t].m(c,null);d(c,B),dt&&dt.m(c,null),d(c,D),d(c,q),d(q,L);for(let t=0;t<pt.length;t+=1)pt[t].m(L,null);ht&&ht.m(L,null),d(l,j),d(l,P),d(P,F),f(t,U,p),gt&&gt.m(t,p),f(t,Y,p),V=!0},p(t,e){const r={};if(1&e[0]&&(r.item=t[0]),n.$set(r),(!V||1&e[0])&&Z!==(Z=st(t[0])+"")&&b(o,Z),ot===(ot=rt(t))&&it?it.p(t,e):(it.d(1),it=ot(t),it&&(it.c(),it.m(v,w))),(!V||1&e[0])&&Q!==(Q=(t[0].required_str>=0?t[0].required_str:"not movable")+"")&&b(E,Q),(!V||1&e[0])&&tt!==(tt=(t[0].coverage??0)+"")&&b(I,tt),(!V||1&e[0])&&et!==(et=(t[0].comfort??0)+"")&&b(M,et),t[0].crafting_pseudo_item?lt?(lt.p(t,e),1&e[0]&&W(lt,1)):(lt=Oc(t),lt.c(),W(lt,1),lt.m(c,N)):lt&&(H(),z(lt,1,1,(()=>{lt=null})),G()),8&e[0]){let n;for(at=t[3],n=0;n<at.length;n+=1){const r=Ec(t,at,n);ct[n]?(ct[n].p(r,e),W(ct[n],1)):(ct[n]=Nc(r),ct[n].c(),W(ct[n],1),ct[n].m(c,B))}for(H(),n=at.length;n<ct.length;n+=1)ut(n);G()}if(t[4].size&&dt.p(t,e),1&e[0]){let n;for(ft=t[0].flags??[],n=0;n<ft.length;n+=1){const r=bc(t,ft,n);pt[n]?(pt[n].p(r,e),W(pt[n],1)):(pt[n]=Uc(r),pt[n].c(),W(pt[n],1),pt[n].m(L,null))}for(H(),n=ft.length;n<pt.length;n+=1)mt(n);G(),ft.length?ht&&(ht.d(1),ht=null):ht||(ht=Fc(),ht.c(),ht.m(L,null))}(!V||1&e[0])&&nt!==(nt=t[0].description+"")&&b(F,nt),t[2].length&&gt.p(t,e)},i(t){if(!V){W(n.$$.fragment,t),W(lt);for(let t=0;t<at.length;t+=1)W(ct[t]);W(dt);for(let t=0;t<ft.length;t+=1)W(pt[t]);W(gt),V=!0}},o(t){z(n.$$.fragment,t),z(lt),ct=ct.filter(Boolean);for(let t=0;t<ct.length;t+=1)z(ct[t]);z(dt),pt=pt.filter(Boolean);for(let t=0;t<pt.length;t+=1)z(pt[t]);z(gt),V=!1},d(t){t&&p(e),X(n),t&&p(i),t&&p(l),it.d(),lt&&lt.d(),m(ct,t),dt&&dt.d(),m(pt,t),ht&&ht.d(),t&&p(U),gt&&gt.d(t),t&&p(Y)}}}function Wc(t,e,n){var r,o,i;const l=I("data");let{item:s}=e;const a=(null===(r=s.deconstruct)||void 0===r?void 0:r.items)?l.flattenItemGroup({subtype:"collection",entries:"string"==typeof s.deconstruct.items?[{group:s.deconstruct.items}]:s.deconstruct.items}):[],c=(null===(o=s.bash)||void 0===o?void 0:o.items)?l.flattenItemGroup({subtype:"collection",entries:"string"==typeof s.bash.items?[{group:s.bash.items}]:s.bash.items}):[],u=l.byType("construction").filter((t=>t.post_terrain===s.id)),d=[["Deconstruct",a],["Bash",c]],f=new Map;for(const{seasons:t,id:e}of null!==(i=s.harvest_by_season)&&void 0!==i?i:[])for(const n of t)f.set(n,e);return t.$$set=t=>{"item"in t&&n(0,s=t.item)},[s,l,u,d,f,t=>f.has(t)]}class zc extends tt{constructor(t){super(),Q(this,t,Wc,Gc,i,{item:0},[-1,-1])}}function Yc(t,e,n){const r=t.slice();return r[8]=e[n],r}function Vc(t,e,n){const r=t.slice();return r[11]=e[n],r}function Jc(e){let n,r,o;return r=new Nt({props:{id:e[11].id,type:"item"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Kc(t){let e,n,r,o,i,l,s,a=t[8]+"",c=t[2].get(t[8]).sort(tu),u=[];for(let e=0;e<c.length;e+=1)u[e]=Jc(Vc(t,c,e));const y=t=>z(u[t],1,1,(()=>{u[t]=null}));return{c(){e=h("dt"),n=g("Level "),r=g(a),o=h("dd"),i=h("ul");for(let t=0;t<u.length;t+=1)u[t].c();l=_(),x(e,"font-variant","tabular-nums")},m(t,a){f(t,e,a),d(e,n),d(e,r),f(t,o,a),d(o,i);for(let t=0;t<u.length;t+=1)u[t].m(i,null);d(o,l),s=!0},p(t,e){if(4&e){let n;for(c=t[2].get(t[8]).sort(tu),n=0;n<c.length;n+=1){const r=Vc(t,c,n);u[n]?(u[n].p(r,e),W(u[n],1)):(u[n]=Jc(r),u[n].c(),W(u[n],1),u[n].m(i,null))}for(H(),n=c.length;n<u.length;n+=1)y(n);G()}},i(t){if(!s){for(let t=0;t<c.length;t+=1)W(u[t]);s=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)z(u[t]);s=!1},d(t){t&&p(e),t&&p(o),m(u,t)}}}function Xc(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function Zc(t){let e,n,r,o,i,l,s,a,c,u,v,$=st(t[0])+"",w=t[0].description+"",C=t[1].length&&function(t){let e,n,r,o,i,l=[...t[2].keys()].sort(Qc),s=[];for(let e=0;e<l.length;e+=1)s[e]=Kc(Yc(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Books",r=_(),o=h("dl");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(4&e){let n;for(l=[...t[2].keys()].sort(Qc),n=0;n<l.length;n+=1){const r=Yc(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=Kc(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),m(s,t)}}}(t),k=t[3].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[3],$$slots:{default:[Xc,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Used By",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};16385&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){e=h("h1"),n=g("Skill: "),r=g($),o=_(),i=h("section"),l=h("p"),s=g(w),a=_(),C&&C.c(),c=_(),k&&k.c(),u=y(),x(l,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(l,s),f(t,a,p),C&&C.m(t,p),f(t,c,p),k&&k.m(t,p),f(t,u,p),v=!0},p(t,[e]){(!v||1&e)&&$!==($=st(t[0])+"")&&b(r,$),(!v||1&e)&&w!==(w=t[0].description+"")&&b(s,w),t[1].length&&C.p(t,e),t[3].length&&k.p(t,e)},i(t){v||(W(C),W(k),v=!0)},o(t){z(C),z(k),v=!1},d(t){t&&p(e),t&&p(o),t&&p(i),t&&p(a),C&&C.d(t),t&&p(c),k&&k.d(t),t&&p(u)}}}const Qc=(t,e)=>t-e,tu=(t,e)=>(t.required_level??0)-(e.required_level??0);function eu(t,e,n){var r,o,i;let{item:l}=e;const s=I("data"),a=s.byType("item").filter((t=>t.id&&"BOOK"===t.type&&t.skill===l.id)).sort(((t,e)=>st(t).localeCompare(st(e)))),c=new Map;for(const t of a)c.has(null!==(r=t.max_level)&&void 0!==r?r:0)||c.set(null!==(o=t.max_level)&&void 0!==o?o:0,[]),c.get(null!==(i=t.max_level)&&void 0!==i?i:0).push(t);const u=s.byType("item").filter((t=>t.id&&"GUN"===t.type&&t.skill===l.id));return u.sort(((t,e)=>st(t).localeCompare(st(e)))),t.$$set=t=>{"item"in t&&n(0,l=t.item)},[l,a,c,u]}class nu extends tt{constructor(t){super(),Q(this,t,eu,Zc,i,{item:0})}}function ru(t,e,n){const r=t.slice();return r[3]=e[n],r}function ou(t){let e,n,r,o,i=t[0].required_proficiencies,l=[];for(let e=0;e<i.length;e+=1)l[e]=iu(ru(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Required Proficiencies",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(1&e){let n;for(i=t[0].required_proficiencies,n=0;n<i.length;n+=1){const o=ru(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=iu(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}function iu(t){let e,n,r;return n=new Nt({props:{id:t[3],type:"proficiency"}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[3]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function lu(t){let e,n,r,o;return e=new Qt({props:{item:t[1].byId("item",t[0])}}),r=new Nt({props:{type:"item",id:t[0]}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[1].byId("item",t[0])),e.$set(o);const i={};1&n&&(i.id=t[0]),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function su(t){let e,n,r,o,i,l,s,a,c,u,m,v,$,w,C,k,E,T,S,I,O,R,A,M=st(t[0])+"",N=(t[0].can_learn?t[0].time_to_learn:"not learnable")+"",B=(t[0].default_time_multiplier??2)+"",D=(t[0].default_fail_multiplier??2)+"",q=t[0].description+"",L=t[0].required_proficiencies&&ou(t),j=t[2].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[2],$$slots:{default:[lu,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Recipes",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};65&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){e=h("h1"),n=g("Proficiency: "),r=g(M),o=_(),i=h("section"),l=h("dl"),s=h("dt"),s.textContent="Time to Learn",a=h("dd"),c=g(N),u=h("dt"),u.textContent="Default Time Multiplier",m=h("dd"),v=g(B),$=g("Ã—"),w=h("dt"),w.textContent="Default Fail Multiplier",C=h("dd"),k=g(D),E=g("Ã—"),L&&L.c(),T=_(),S=h("p"),I=g(q),O=_(),j&&j.c(),R=y(),x(S,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(l,s),d(l,a),d(a,c),d(l,u),d(l,m),d(m,v),d(m,$),d(l,w),d(l,C),d(C,k),d(C,E),L&&L.m(l,null),d(i,T),d(i,S),d(S,I),f(t,O,p),j&&j.m(t,p),f(t,R,p),A=!0},p(t,[e]){(!A||1&e)&&M!==(M=st(t[0])+"")&&b(r,M),(!A||1&e)&&N!==(N=(t[0].can_learn?t[0].time_to_learn:"not learnable")+"")&&b(c,N),(!A||1&e)&&B!==(B=(t[0].default_time_multiplier??2)+"")&&b(v,B),(!A||1&e)&&D!==(D=(t[0].default_fail_multiplier??2)+"")&&b(k,D),t[0].required_proficiencies?L?(L.p(t,e),1&e&&W(L,1)):(L=ou(t),L.c(),W(L,1),L.m(l,null)):L&&(H(),z(L,1,1,(()=>{L=null})),G()),(!A||1&e)&&q!==(q=t[0].description+"")&&b(I,q),t[2].length&&j.p(t,e)},i(t){A||(W(L),W(j),A=!0)},o(t){z(L),z(j),A=!1},d(t){t&&p(e),t&&p(o),t&&p(i),L&&L.d(),t&&p(O),j&&j.d(t),t&&p(R)}}}function au(t,e,n){let{item:r}=e;const o=I("data"),i=[...new Set(o.byType("recipe").filter((t=>{var e;return(null!==(e=t.proficiencies)&&void 0!==e?e:[]).some((t=>t.proficiency===r.id))})).map((t=>t.result)))].sort(((t,e)=>st(o.byId("item",t)).localeCompare(st(o.byId("item",e)))));return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o,i]}class cu extends tt{constructor(t){super(),Q(this,t,au,su,i,{item:0})}}function uu(t,e,n){const r=t.slice();return r[13]=e[n].color,r[14]=e[n].string,r}function du(t){let e,n,r=t[5],o=[];for(let e=0;e<r.length;e+=1)o[e]=fu(uu(t,r,e));return{c(){e=h("section"),n=h("p");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){f(t,e,r),d(e,n);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,e){if(96&e){let i;for(r=t[5],i=0;i<r.length;i+=1){const l=uu(t,r,i);o[i]?o[i].p(l,e):(o[i]=fu(l),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(t){t&&p(e),m(o,t)}}}function fu(e){let n,r,o=e[14]+"";return{c(){n=h("span"),r=g(o),x(n,"color","var(--cata-color-"+e[6](e[13])+")")},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function pu(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function mu(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"vehicle_part",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function hu(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"terrain",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function gu(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"furniture",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function _u(t){let e,n,r,o,i,l,s,a,c,u,m=t[0].id+"",v=t[0].info&&du(t),$=t[1].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[1].sort(t[7]),$$slots:{default:[pu,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Items",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};131073&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),w=t[2].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[2].sort(t[8]),$$slots:{default:[mu,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Vehicle Parts",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};131073&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),x=t[4].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[4].sort(t[9]),$$slots:{default:[hu,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Terrain",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};131073&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),C=t[3].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[3].sort(t[10]),$$slots:{default:[gu,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Furniture",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};131073&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){e=h("h1"),n=g("Flag: "),r=g(m),o=_(),v&&v.c(),i=_(),$&&$.c(),l=_(),w&&w.c(),s=_(),x&&x.c(),a=_(),C&&C.c(),c=y()},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),v&&v.m(t,p),f(t,i,p),$&&$.m(t,p),f(t,l,p),w&&w.m(t,p),f(t,s,p),x&&x.m(t,p),f(t,a,p),C&&C.m(t,p),f(t,c,p),u=!0},p(t,[e]){(!u||1&e)&&m!==(m=t[0].id+"")&&b(r,m),t[0].info?v?v.p(t,e):(v=du(t),v.c(),v.m(i.parentNode,i)):v&&(v.d(1),v=null),t[1].length&&$.p(t,e),t[2].length&&w.p(t,e),t[4].length&&x.p(t,e),t[3].length&&C.p(t,e)},i(t){u||(W($),W(w),W(x),W(C),u=!0)},o(t){z($),z(w),z(x),z(C),u=!1},d(t){t&&p(e),t&&p(o),v&&v.d(t),t&&p(i),$&&$.d(t),t&&p(l),w&&w.d(t),t&&p(s),x&&x.d(t),t&&p(a),C&&C.d(t),t&&p(c)}}}function yu(t,e,n){var r;let{item:o}=e,i=I("data");const l=i.byType("item").filter((t=>{var e;return t.id&&(null===(e=t.flags)||void 0===e?void 0:e.includes(o.id))})),s=i.byType("vehicle_part").filter((t=>{var e;return t.id&&(null===(e=t.flags)||void 0===e?void 0:e.includes(o.id))})),a=i.byType("furniture").filter((t=>{var e;return t.id&&(null===(e=t.flags)||void 0===e?void 0:e.includes(o.id))})),c=i.byType("terrain").filter((t=>{var e;return t.id&&(null===(e=t.flags)||void 0===e?void 0:e.includes(o.id))})),u=function(t){let e=["gray"];const n=[];let r=t;for(;;){const t=r.match(/<\/?(info|good|bad|color|color_[^>]+)>/);if(!t)break;t.index>0&&n.push({string:r.substring(0,t.index),color:e[0]}),"/"===t[0][1]&&e.length>1?e.shift():e.unshift(t[1]),r=r.substring(t.index+t[0].length)}return r.length&&n.push({string:r,color:e[0]}),n}(null!==(r=o.info)&&void 0!==r?r:"");return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,l,s,a,c,u,t=>{if("info"===t)return"cyan";if("good"===t)return"green";if("bad"===t)return"red";const e=/^color_(.+)$/.exec(t);return e?e[1]:"gray"},(t,e)=>st(t).localeCompare(st(e)),(t,e)=>st(t).localeCompare(st(e)),(t,e)=>st(t).localeCompare(st(e)),(t,e)=>st(t).localeCompare(st(e))]}class vu extends tt{constructor(t){super(),Q(this,t,yu,_u,i,{item:0})}}function $u(t,e,n){const r=t.slice();return r[6]=e[n].tools,r[7]=e[n].components,r[8]=e[n].qualities,r[9]=e[n].mending_method,r}function bu(t,e,n){const r=t.slice();return r[12]=e[n],r}function wu(t,e,n){const r=t.slice();return r[15]=e[n].id,r[16]=e[n].count,r[18]=n,r}function xu(t,e,n){const r=t.slice();return r[19]=e[n],r}function Cu(t,e,n){const r=t.slice();return r[22]=e[n],r[18]=n,r}function ku(t,e,n){const r=t.slice();return r[24]=e[n],r}function Eu(t,e,n){const r=t.slice();return r[27]=e[n],r[18]=n,r}function Tu(t,e,n){const r=t.slice();return r[15]=e[n].id,r[29]=e[n].level,r[18]=n,r}function Su(t,e,n){const r=t.slice();return r[31]=e[n],r}function Iu(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Ou(t){let e,n,r,o,i=t[31]+"";return{c(){e=h("li"),n=h("abbr"),r=g(i),$(n,"title",o=t[3][t[31]])},m(t,o){f(t,e,o),d(e,n),d(n,r)},p(t,e){1&e[0]&&i!==(i=t[31]+"")&&b(r,i),1&e[0]&&o!==(o=t[3][t[31]])&&$(n,"title",o)},d(t){t&&p(e)}}}function Ru(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Au(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Mu(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Nu(e){let n,r,o,i,l,s,a=e[29]+"";n=new Nt({props:{type:"skill",id:e[15]}});let c=function(t,e){return t[18]===t[9].skills.length-2?Mu:t[18]!==t[9].skills.length-1?Au:void 0}(e),u=c&&c(e);return{c(){J(n.$$.fragment),r=g(" ("),o=g(a),i=g(")"),u&&u.c(),l=y()},m(t,e){K(n,t,e),f(t,r,e),f(t,o,e),f(t,i,e),u&&u.m(t,e),f(t,l,e),s=!0},p:t,i(t){s||(W(n.$$.fragment,t),s=!0)},o(t){z(n.$$.fragment,t),s=!1},d(t){X(n,t),t&&p(r),t&&p(o),t&&p(i),u&&u.d(t),t&&p(l)}}}function Bu(e){let n,r,o,i,l,s,a,c,u,d,m,h=(e[27].amount??1)+"",y=1===(e[27].amount??1)?"":"s",v=e[27].level+"",$=0!==e[18]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return s=new Nt({props:{type:"tool_quality",id:e[27].id}}),{c(){$&&$.c(),n=_(),r=g(h),o=g(" tool"),i=g(y),l=g("\n                  with "),J(s.$$.fragment),a=g(" of "),c=g(v),u=g("\n                  or more"),d=g("")},m(t,e){$&&$.m(t,e),f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,l,e),K(s,t,e),f(t,a,e),f(t,c,e),f(t,u,e),f(t,d,e),m=!0},p:t,i(t){m||(W(s.$$.fragment,t),m=!0)},o(t){z(s.$$.fragment,t),m=!1},d(t){$&&$.d(t),t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(l),X(s,t),t&&p(a),t&&p(c),t&&p(u),t&&p(d)}}}function Du(t){let e,n,r,o=t[24],i=[];for(let e=0;e<o.length;e+=1)i[e]=Bu(Eu(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=g(".")},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(4&r[0]){let s;for(o=t[24],s=0;s<o.length;s+=1){const l=Eu(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=Bu(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function qu(e){let n,r;return n=new Nt({props:{type:"item",id:e[22].id}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function Lu(e){let n,r,o=st(e[1].byId("item",e[22].id))+"";return{c(){n=h("a"),r=g(o),$(n,"href","#/furniture/"+e[1].craftingPseudoItem(e[22].id))},m(t,e){f(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function ju(e){let n,r,o,i,l=e[22].count+"",s=1!==e[22].count&&function(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){n=g("("),r=g(l),o=g(" charge"),s&&s.c(),i=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),s&&s.m(t,e),f(t,i,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),s&&s.d(t),t&&p(i)}}}function Pu(t){let e,n,r,o,i,l,s=0!==t[18]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();const a=[Lu,qu],c=[];n=function(t,e){return t[1].craftingPseudoItem(t[22].id)?0:1}(t),r=c[n]=a[n](t);let u=t[22].count>0&&ju(t);return{c(){s&&s.c(),e=_(),r.c(),o=_(),u&&u.c(),i=y()},m(t,r){s&&s.m(t,r),f(t,e,r),c[n].m(t,r),f(t,o,r),u&&u.m(t,r),f(t,i,r),l=!0},p(t,e){r.p(t,e),t[22].count>0&&u.p(t,e)},i(t){l||(W(r),l=!0)},o(t){z(r),l=!1},d(t){s&&s.d(t),t&&p(e),c[n].d(t),t&&p(o),u&&u.d(t),t&&p(i)}}}function Fu(t){let e,n,r,o=t[19],i=[];for(let e=0;e<o.length;e+=1)i[e]=Pu(Cu(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=_()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(6&r[0]){let s;for(o=t[19],s=0;s<o.length;s+=1){const l=Cu(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=Pu(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function Uu(e){let n,r,o,i=0!==e[18]&&function(t){let e;return{c(){e=g(" OR ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return r=new Nt({props:{id:e[15],count:e[16],type:"item"}}),{c(){i&&i.c(),n=_(),J(r.$$.fragment)},m(t,e){i&&i.m(t,e),f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){i&&i.d(t),t&&p(n),X(r,t)}}}function Hu(t){let e,n,r,o=t[12].map(t[4]),i=[];for(let e=0;e<o.length;e+=1)i[e]=Uu(wu(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li");for(let t=0;t<i.length;t+=1)i[t].c();n=_()},m(t,o){f(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);d(e,n),r=!0},p(t,r){if(6&r[0]){let s;for(o=t[12].map(t[4]),s=0;s<o.length;s+=1){const l=wu(t,o,s);i[s]?(i[s].p(l,r),W(i[s],1)):(i[s]=Uu(l),i[s].c(),W(i[s],1),i[s].m(e,n))}for(H(),s=o.length;s<i.length;s+=1)l(s);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function Gu(e){let n,r,o,i,l,s,a,c,u,v,$,b,w,x,C,k=st(e[9])+"",E=e[9].time+"",T=e[9].skills,S=[];for(let t=0;t<T.length;t+=1)S[t]=Nu(Tu(e,T,t));const I=t=>z(S[t],1,1,(()=>{S[t]=null}));let O=null;T.length||(O=Ru());let R=(e[8].length||e[6].length)&&function(t){let e,n,r,o,i,l,s=t[8]??[],a=[];for(let e=0;e<s.length;e+=1)a[e]=Du(ku(t,s,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));let u=t[6],g=[];for(let e=0;e<u.length;e+=1)g[e]=Fu(xu(t,u,e));const y=t=>z(g[t],1,1,(()=>{g[t]=null}));return{c(){e=h("dt"),e.textContent="Tools Required",n=h("dd"),r=h("ul");for(let t=0;t<a.length;t+=1)a[t].c();o=_();for(let t=0;t<g.length;t+=1)g[t].c();i=_()},m(t,s){f(t,e,s),f(t,n,s),d(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);d(r,o);for(let t=0;t<g.length;t+=1)g[t].m(r,null);d(n,i),l=!0},p(t,e){if(4&e[0]){let n;for(s=t[8]??[],n=0;n<s.length;n+=1){const i=ku(t,s,n);a[n]?(a[n].p(i,e),W(a[n],1)):(a[n]=Du(i),a[n].c(),W(a[n],1),a[n].m(r,o))}for(H(),n=s.length;n<a.length;n+=1)c(n);G()}if(6&e[0]){let n;for(u=t[6],n=0;n<u.length;n+=1){const o=xu(t,u,n);g[n]?(g[n].p(o,e),W(g[n],1)):(g[n]=Fu(o),g[n].c(),W(g[n],1),g[n].m(r,null))}for(H(),n=u.length;n<g.length;n+=1)y(n);G()}},i(t){if(!l){for(let t=0;t<s.length;t+=1)W(a[t]);for(let t=0;t<u.length;t+=1)W(g[t]);l=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)z(g[t]);l=!1},d(t){t&&p(e),t&&p(n),m(a,t),m(g,t)}}}(e),A=e[7].length&&function(t){let e,n,r,o,i,l=t[7],s=[];for(let e=0;e<l.length;e+=1)s[e]=Hu(bu(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Components",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(6&e[0]){let n;for(l=t[7],n=0;n<l.length;n+=1){const o=bu(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Hu(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(e),M=e[9].turns_into&&function(e){let n,r,o,i;return o=new Nt({props:{type:"fault",id:e[9].turns_into}}),{c(){n=h("dt"),n.textContent="Turns Into",r=h("dd"),J(o.$$.fragment)},m(t,e){f(t,n,e),f(t,r,e),K(o,r,null),i=!0},p:t,i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(n),t&&p(r),X(o)}}}(e);return{c(){n=h("section"),r=h("h1"),o=g(k),i=_(),l=h("dl"),s=h("dt"),s.textContent="Skills Used",a=h("dd");for(let t=0;t<S.length;t+=1)S[t].c();O&&O.c(),c=_(),u=h("dt"),u.textContent="Time to Complete",v=h("dd"),$=g(E),R&&R.c(),b=y(),A&&A.c(),w=y(),M&&M.c(),x=_()},m(t,e){f(t,n,e),d(n,r),d(r,o),d(n,i),d(n,l),d(l,s),d(l,a);for(let t=0;t<S.length;t+=1)S[t].m(a,null);O&&O.m(a,null),d(a,c),d(l,u),d(l,v),d(v,$),R&&R.m(l,null),d(l,b),A&&A.m(l,null),d(l,w),M&&M.m(l,null),d(n,x),C=!0},p(t,e){if(4&e[0]){let n;for(T=t[9].skills,n=0;n<T.length;n+=1){const r=Tu(t,T,n);S[n]?(S[n].p(r,e),W(S[n],1)):(S[n]=Nu(r),S[n].c(),W(S[n],1),S[n].m(a,c))}for(H(),n=T.length;n<S.length;n+=1)I(n);G(),T.length?O&&(O.d(1),O=null):O||(O=Ru(),O.c(),O.m(a,c))}(t[8].length||t[6].length)&&R.p(t,e),t[7].length&&A.p(t,e),t[9].turns_into&&M.p(t,e)},i(t){if(!C){for(let t=0;t<T.length;t+=1)W(S[t]);W(R),W(A),W(M),C=!0}},o(t){S=S.filter(Boolean);for(let t=0;t<S.length;t+=1)z(S[t]);z(R),z(A),z(M),C=!1},d(t){t&&p(n),m(S,t),O&&O.d(),R&&R.d(),A&&A.d(),M&&M.d()}}}function Wu(t){let e,n,r,o,i,l,s,a,c,u,v,w,C,k,E,T,S=st(t[0])+"",I=t[0].description+"",O=t[0].flags??[],R=[];for(let e=0;e<O.length;e+=1)R[e]=Ou(Su(t,O,e));let A=null;O.length||(A=Iu());let M=t[2].length&&function(t){let e;return{c(){e=h("h2"),e.textContent="Mending Methods"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}(),N=t[2],B=[];for(let e=0;e<N.length;e+=1)B[e]=Gu($u(t,N,e));const D=t=>z(B[t],1,1,(()=>{B[t]=null}));return{c(){e=h("h1"),n=g("Fault: "),r=g(S),o=_(),i=h("section"),l=h("dl"),s=h("dt"),s.textContent="Flags",a=h("dd"),c=h("ul");for(let t=0;t<R.length;t+=1)R[t].c();A&&A.c(),u=_(),v=h("p"),w=g(I),C=_(),M&&M.c(),k=_();for(let t=0;t<B.length;t+=1)B[t].c();E=y(),$(c,"class","comma-separated"),x(v,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(l,s),d(l,a),d(a,c);for(let t=0;t<R.length;t+=1)R[t].m(c,null);A&&A.m(c,null),d(i,u),d(i,v),d(v,w),f(t,C,p),M&&M.m(t,p),f(t,k,p);for(let e=0;e<B.length;e+=1)B[e].m(t,p);f(t,E,p),T=!0},p(t,e){if((!T||1&e[0])&&S!==(S=st(t[0])+"")&&b(r,S),9&e[0]){let n;for(O=t[0].flags??[],n=0;n<O.length;n+=1){const r=Su(t,O,n);R[n]?R[n].p(r,e):(R[n]=Ou(r),R[n].c(),R[n].m(c,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=O.length,O.length?A&&(A.d(1),A=null):A||(A=Iu(),A.c(),A.m(c,null))}if((!T||1&e[0])&&I!==(I=t[0].description+"")&&b(w,I),6&e[0]){let n;for(N=t[2],n=0;n<N.length;n+=1){const r=$u(t,N,n);B[n]?(B[n].p(r,e),W(B[n],1)):(B[n]=Gu(r),B[n].c(),W(B[n],1),B[n].m(E.parentNode,E))}for(H(),n=N.length;n<B.length;n+=1)D(n);G()}},i(t){if(!T){for(let t=0;t<N.length;t+=1)W(B[t]);T=!0}},o(t){B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)z(B[t]);T=!1},d(t){t&&p(e),t&&p(o),t&&p(i),m(R,t),A&&A.d(),t&&p(C),M&&M.d(t),t&&p(k),m(B,t),t&&p(E)}}}function zu(t,e,n){var r;const o=I("data");let{item:i}=e;const l=(null!==(r=i.mending_methods)&&void 0!==r?r:[]).map((t=>{var e,n,r;const i="string"==typeof t.requirements?o.byId("requirement",t.requirements):t.requirements;return{mending_method:t,tools:o.flattenRequirement(null!==(e=i.tools)&&void 0!==e?e:[],(t=>t.tools),{expandSubstitutes:!0}),components:o.flattenRequirement(null!==(n=i.components)&&void 0!==n?n:[],(t=>t.components)),qualities:gt(null!==(r=i.qualities)&&void 0!==r?r:[])}}));return t.$$set=t=>{"item"in t&&n(0,i=t.item)},[i,o,l,{NO_ALTERNATOR_CHARGE:"The alternator connected to this engine does not work.",BAD_COLD_START:"The engine starts as if the temperature was 20 F colder. Does not stack with multiples of itself.",IMMOBILIZER:"Prevents engine from starting and makes it beep.",BAD_FUEL_PUMP:"Prevents engine from starting and makes it stutter.",BAD_STARTER:"Prevents engine from starting and makes click noise.",DOUBLE_FUEL_CONSUMPTION:"Doubles fuel consumption of the engine. Does not stack with multiples of itself.",EXTRA_EXHAUST:"Makes the engine emit more exhaust smoke. Does not stack with multiples of itself.",REDUCE_ENG_POWER:"Multiplies engine power by 0.6. Does not stack with multiples of itself.",ENG_BACKFIRE:"Causes the engine to backfire as if it had zero hp.",BLACKPOWDER_FOULING_DAMAGE:"Causes the gun to take random acid damage over time.",NO_DIRTYING:"Prevents the gun from receiving `fault_gun_dirt` fault.",JAMMED_GUN:"Stops burst fire. Adds delay on next shot.",UNLUBRICATED:"Randomly causes screeching noise when firing and applies damage when that happens.",BAD_CYCLING:"One in 16 chance that the gun fails to cycle when fired resulting in `fault_gun_chamber_spent` fault."},t=>({...t,item:o.byId("item",t.id)})]}class Yu extends tt{constructor(t){super(),Q(this,t,zu,Wu,i,{item:0},[-1,-1])}}function Vu(t,e,n){const r=t.slice();return r[7]=e[n],r}function Ju(t,e,n){const r=t.slice();return r[7]=e[n],r}function Ku(t){let e,n,r,o,i=t[2],l=[];for(let e=0;e<i.length;e+=1)l[e]=Xu(Ju(t,i,e));return{c(){e=h("dt"),e.textContent="Excess",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=_(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o)},p(t,e){if(4&e){let n;for(i=t[2],n=0;n<i.length;n+=1){const o=Ju(t,i,n);l[n]?l[n].p(o,e):(l[n]=Xu(o),l[n].c(),l[n].m(r,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),t&&p(n),m(l,t)}}}function Xu(e){let n,r,o=it(e[7])+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Zu(t){let e,n,r,o,i=t[3],l=[];for(let e=0;e<i.length;e+=1)l[e]=Qu(Vu(t,i,e));return{c(){e=h("dt"),e.textContent="Deficiency",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=_(),$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);d(n,o)},p(t,e){if(8&e){let n;for(i=t[3],n=0;n<i.length;n+=1){const o=Vu(t,i,n);l[n]?l[n].p(o,e):(l[n]=Qu(o),l[n].c(),l[n].m(r,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),t&&p(n),m(l,t)}}}function Qu(e){let n,r,o=it(e[7])+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function td(t){let e,n,r,o,i,l=t[0].pct+"";return e=new Nt({props:{id:t[0].comestible.id,type:"item"}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g("% RDA)")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,n){const o={};1&n&&(o.id=t[0].comestible.id),e.$set(o),(!i||1&n)&&l!==(l=t[0].pct+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function ed(t){let e,n,r,o,i,l,s,a,c,u,m,v,$,w,x,C,k,E,T,S,I,O,R,A,M,N=st(t[0])+"",B=t[0].vit_type+"",D=(t[0].min??0)+"",q=(t[0].max??0)+"",L=(t[0].rate??"0 m")+"",j=t[0].excess&&Ku(t),P=t[0].deficiency&&Zu(t);return A=new xe({props:{items:t[1],$$slots:{default:[td,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("h1"),n=g("Vitamin: "),r=g(N),o=_(),i=h("section"),l=h("dl"),s=h("dt"),s.textContent="Type",a=h("dd"),c=g(B),j&&j.c(),u=y(),P&&P.c(),m=h("dt"),m.textContent="Min",v=h("dd"),$=g(D),w=h("dt"),w.textContent="Max",x=h("dd"),C=g(q),k=h("dt"),k.textContent="Rate",E=h("dd"),T=g(L),S=_(),I=h("section"),O=h("h1"),O.textContent="Comestibles",R=_(),J(A.$$.fragment)},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(l,s),d(l,a),d(a,c),j&&j.m(l,null),d(l,u),P&&P.m(l,null),d(l,m),d(l,v),d(v,$),d(l,w),d(l,x),d(x,C),d(l,k),d(l,E),d(E,T),f(t,S,p),f(t,I,p),d(I,O),d(I,R),K(A,I,null),M=!0},p(t,[e]){(!M||1&e)&&N!==(N=st(t[0])+"")&&b(r,N),(!M||1&e)&&B!==(B=t[0].vit_type+"")&&b(c,B),t[0].excess?j?j.p(t,e):(j=Ku(t),j.c(),j.m(l,u)):j&&(j.d(1),j=null),t[0].deficiency?P?P.p(t,e):(P=Zu(t),P.c(),P.m(l,m)):P&&(P.d(1),P=null),(!M||1&e)&&D!==(D=(t[0].min??0)+"")&&b($,D),(!M||1&e)&&q!==(q=(t[0].max??0)+"")&&b(C,q),(!M||1&e)&&L!==(L=(t[0].rate??"0 m")+"")&&b(T,L);const n={};4097&e&&(n.$$scope={dirty:e,ctx:t}),A.$set(n)},i(t){M||(W(A.$$.fragment,t),M=!0)},o(t){z(A.$$.fragment,t),M=!1},d(t){t&&p(e),t&&p(o),t&&p(i),j&&j.d(),P&&P.d(),t&&p(S),t&&p(I),X(A)}}}function nd(t,e,n){var r,o;let{item:i}=e;const l=I("data"),s=l.byType("item").filter((t=>{var e;return"COMESTIBLE"===t.type&&t.id&&(null!==(e=t.vitamins)&&void 0!==e?e:[]).some((t=>t[0]===i.id))})).map((t=>({comestible:t,pct:t.vitamins.find((t=>t[0]===i.id))[1]})));s.sort(((t,e)=>e.pct-t.pct));const a=i.excess&&null!==(r=l.byId("effect_type",i.excess).name)&&void 0!==r?r:[],c=i.deficiency&&null!==(o=l.byId("effect_type",i.deficiency).name)&&void 0!==o?o:[];return t.$$set=t=>{"item"in t&&n(0,i=t.item)},[i,s,a,c]}class rd extends tt{constructor(t){super(),Q(this,t,nd,ed,i,{item:0})}}function od(t,e,n){const r=t.slice();return r[5]=e[n][0],r[6]=e[n][1],r[8]=n,r}function id(t,e,n){const r=t.slice();return r[5]=e[n][0],r[6]=e[n][1],r[8]=n,r}function ld(t,e,n){const r=t.slice();return r[5]=e[n][0],r[6]=e[n][1],r[8]=n,r}function sd(t,e,n){const r=t.slice();return r[11]=e[n],r}function ad(t,e,n){const r=t.slice();return r[14]=e[n].id,r[15]=e[n].count,r[16]=e[n].prob,r}function cd(t,e,n){const r=t.slice();return r[14]=e[n].id,r}function ud(t,e,n){const r=t.slice();return r[21]=e[n][0],r[6]=e[n][1],r}function dd(t){let e,n,r,o;return r=new Nt({props:{type:"item",id:t[0].fuel_type}}),{c(){e=h("dt"),e.textContent="Charge",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].fuel_type),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function fd(t){let e,n,r,o=ft(t[0].size)+"";return{c(){e=h("dt"),e.textContent="Capacity",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=ft(t[0].size)+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function pd(t){let e,n,r,o=ft(t[0].folded_volume)+"";return{c(){e=h("dt"),e.textContent="Folded Volume",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=ft(t[0].folded_volume)+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function md(t){let e,n,r,o,i,l=t[0].qualities,s=[];for(let e=0;e<l.length;e+=1)s[e]=hd(ud(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Qualities",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","no-bullets")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=t[0].qualities,n=0;n<l.length;n+=1){const o=ud(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=hd(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function hd(t){let e,n,r,o,i,l,s,a,c=(t[6]??1)+"";return l=new Nt({props:{type:"tool_quality",id:t[21]}}),{c(){e=h("li"),n=g("Has level "),r=h("strong"),o=g(c),i=_(),J(l.$$.fragment),s=g(" quality.\n            ")},m(t,c){f(t,e,c),d(e,n),d(e,r),d(r,o),d(r,i),K(l,r,null),d(e,s),a=!0},p(t,e){(!a||1&e)&&c!==(c=(t[6]??1)+"")&&b(o,c);const n={};1&e&&(n.id=t[21]),l.$set(n)},i(t){a||(W(l.$$.fragment,t),a=!0)},o(t){z(l.$$.fragment,t),a=!1},d(t){t&&p(e),X(l)}}}function gd(t){let e,n,r,o=t[0].comfort+"";return{c(){e=h("dt"),e.textContent="Comfort",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].comfort+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function _d(t){let e,n,r,o=t[0].floor_bedding_warmth+"";return{c(){e=h("dt"),e.textContent="Bedding Warmth",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].floor_bedding_warmth+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function yd(t){let e,n,r,o=t[0].epower+"";return{c(){e=h("dt"),e.textContent="Electric Power",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=t[0].epower+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function vd(t){let e,n,r,o=-t[0].energy_consumption+"";return{c(){e=h("dt"),e.textContent="Drain",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){1&e&&o!==(o=-t[0].energy_consumption+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function $d(t){let e,n,r,o,i,l=t[0].power+"",s=t[0].muscle_power_factor&&bd(t);return{c(){e=h("dt"),e.textContent="Power",n=h("dd"),r=g(l),o=_(),s&&s.c(),i=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r),d(n,o),s&&s.m(n,null),d(n,i)},p(t,e){1&e&&l!==(l=t[0].power+"")&&b(r,l),t[0].muscle_power_factor?s?s.p(t,e):(s=bd(t),s.c(),s.m(n,i)):s&&(s.d(1),s=null)},d(t){t&&p(e),t&&p(n),s&&s.d()}}}function bd(t){let e,n,r=t[0].muscle_power_factor+"";return{c(){e=g("+ (str âˆ’ 8) Ã— "),n=g(r)},m(t,r){f(t,e,r),f(t,n,r)},p(t,e){1&e&&r!==(r=t[0].muscle_power_factor+"")&&b(n,r)},d(t){t&&p(e),t&&p(n)}}}function wd(t){let e,n,r,o,i=Gd(t[0])+"",l=t[0].bonus+"";return{c(){e=h("dt"),n=g(i),r=h("dd"),o=g(l)},m(t,i){f(t,e,i),d(e,n),f(t,r,i),d(r,o)},p(t,e){1&e&&i!==(i=Gd(t[0])+"")&&b(n,i),1&e&&l!==(l=t[0].bonus+"")&&b(o,l)},d(t){t&&p(e),t&&p(r)}}}function xd(t){let e,n,r,o,i,l=t[0].pseudo_tools,s=[];for(let e=0;e<l.length;e+=1)s[e]=Cd(cd(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Provides",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=t[0].pseudo_tools,n=0;n<l.length;n+=1){const o=cd(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Cd(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Cd(t){let e,n;return e=new Nt({props:{type:"item",id:t[14]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function kd(e){let n,r,o;r=new Nt({props:{id:e[14],count:e[15],type:"item"}});let i=1!==e[16]&&function(e){let n,r,o,i=ct(e[16])+"";return{c(){n=g("("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=h("li"),J(r.$$.fragment),i&&i.c()},m(t,e){f(t,n,e),K(r,n,null),i&&i.m(n,null),o=!0},p(t,e){1!==t[16]&&i.p(t,e)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r),i&&i.d()}}}function Ed(t){let e;return{c(){e=h("em"),e.textContent="none"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Td(t){let e,n,r;return n=new Nt({props:{type:"json_flag",id:t[11]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[11]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Sd(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Id(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Od(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Rd(t){let e,n,r,o,i,l,s=t[6]+"";function a(t,e){return t[8]===t[0].requirements.install.skills.length-2?Od:t[8]!==t[0].requirements.install.skills.length-1?Id:void 0}e=new Nt({props:{type:"skill",id:t[5]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g(")"),u&&u.c(),i=y()},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),u&&u.m(t,s),f(t,i,s),l=!0},p(t,n){const o={};1&n&&(o.id=t[5]),e.$set(o),(!l||1&n)&&s!==(s=t[6]+"")&&b(r,s),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function Ad(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Md(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Nd(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Bd(t){let e,n,r,o,i,l,s=t[6]+"";function a(t,e){return t[8]===t[0].requirements.removal.skills.length-2?Nd:t[8]!==t[0].requirements.removal.skills.length-1?Md:void 0}e=new Nt({props:{type:"skill",id:t[5]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g(")"),u&&u.c(),i=y()},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),u&&u.m(t,s),f(t,i,s),l=!0},p(t,n){const o={};1&n&&(o.id=t[5]),e.$set(o),(!l||1&n)&&s!==(s=t[6]+"")&&b(r,s),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function Dd(t){let e,n;return e=new Ci({props:{requirement:t[0].requirements.removal}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.requirement=t[0].requirements.removal),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function qd(t){let e,n,r,o,i,l,s,a,c,u,y,v,w,C,k=(t[0].requirements?.repair?.time??"1 hour")+"",E=t[0].requirements.repair?.skills??[],T=[];for(let e=0;e<E.length;e+=1)T[e]=Fd(od(t,E,e));const S=t=>z(T[t],1,1,(()=>{T[t]=null}));let I=null;return E.length||(I=Ld()),y=new Ci({props:{requirement:t[0].requirements.repair}}),{c(){e=h("section"),n=h("h1"),n.textContent="Repair",r=_(),o=h("dl"),i=h("dt"),i.textContent="Skills Required",l=h("dd");for(let t=0;t<T.length;t+=1)T[t].c();I&&I.c(),s=_(),a=h("dt"),a.textContent="Time",c=h("dd"),u=g(k),J(y.$$.fragment),v=_(),w=h("p"),w.textContent="Repair time and requirements are lower for parts that are less damaged.",$(a,"title","Time required goes down with better skills"),x(w,"color","var(--cata-color-gray)"),x(w,"font-style","italic")},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),d(o,i),d(o,l);for(let t=0;t<T.length;t+=1)T[t].m(l,null);I&&I.m(l,null),d(l,s),d(o,a),d(o,c),d(c,u),K(y,o,null),d(e,v),d(e,w),C=!0},p(t,e){if(1&e){let n;for(E=t[0].requirements.repair?.skills??[],n=0;n<E.length;n+=1){const r=od(t,E,n);T[n]?(T[n].p(r,e),W(T[n],1)):(T[n]=Fd(r),T[n].c(),W(T[n],1),T[n].m(l,s))}for(H(),n=E.length;n<T.length;n+=1)S(n);G(),E.length?I&&(I.d(1),I=null):I||(I=Ld(),I.c(),I.m(l,s))}(!C||1&e)&&k!==(k=(t[0].requirements?.repair?.time??"1 hour")+"")&&b(u,k);const n={};1&e&&(n.requirement=t[0].requirements.repair),y.$set(n)},i(t){if(!C){for(let t=0;t<E.length;t+=1)W(T[t]);W(y.$$.fragment,t),C=!0}},o(t){T=T.filter(Boolean);for(let t=0;t<T.length;t+=1)z(T[t]);z(y.$$.fragment,t),C=!1},d(t){t&&p(e),m(T,t),I&&I.d(),X(y)}}}function Ld(t){let e;return{c(){e=g("none")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function jd(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Pd(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Fd(t){let e,n,r,o,i,l,s=t[6]+"";function a(t,e){return t[8]===t[0].requirements.repair.skills.length-2?Pd:t[8]!==t[0].requirements.repair.skills.length-1?jd:void 0}e=new Nt({props:{type:"skill",id:t[5]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g(")"),u&&u.c(),i=y()},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),u&&u.m(t,s),f(t,i,s),l=!0},p(t,n){const o={};1&n&&(o.id=t[5]),e.$set(o),(!l||1&n)&&s!==(s=t[6]+"")&&b(r,s),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function Ud(t){let e,n;return e=new Nt({props:{type:"vehicle",id:t[0].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[0].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Hd(t){let e,n,r,o,i,l,s,a,c,u,v,w,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,Y,V,Z,Q,tt,et,nt,rt,ot,lt,at,ct,ut,dt,ft,mt,ht,gt,_t,yt,vt,$t,bt,wt,xt,Ct,kt,Et,Tt,St,It,Ot,Rt,At,Mt,Bt=(t[0].name?st(t[0]):st(t[1].byId("item",t[0].item)))+"",Dt=pt(t[1].byId("item",t[0].item).weight)+"",qt=(t[0].durability??0)+"",Lt=(t[0].damage_modifier??100)+"",jt=t[0].bonus&&Gd(t[0]),Pt=it(t[0].description??t[1].byId("item",t[0].item).description)+"",Ft=(t[0].requirements?.install?.time??"1 hour")+"",Ut=(t[0].requirements?.removal?.time??zd(Wd(t[0].requirements?.install?.time??"1 hour")/2+" s"))+"";n=new Qt({props:{item:t[0]}}),w=new Nt({props:{id:t[0].item,type:"item"}});let Ht=t[0].fuel_type&&dd(t),Gt=t[0].size&&fd(t),Wt=t[0].folded_volume&&pd(t),zt=t[0].qualities?.length&&md(t),Yt=t[0].comfort&&gd(t),Vt=t[0].floor_bedding_warmth&&_d(t),Jt=t[0].epower&&yd(t),Kt=t[0].energy_consumption&&vd(t),Xt=t[0].power&&$d(t),Zt=jt&&wd(t),te=t[0].pseudo_tools?.length&&xd(t),ee=t[2]?.length&&function(t){let e,n,r,o,i,l=t[2],s=[];for(let e=0;e<l.length;e+=1)s[e]=kd(ad(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Breaks Into",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(4&e){let n;for(l=t[2],n=0;n<l.length;n+=1){const o=ad(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=kd(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),ne=t[0].flags??[],re=[];for(let e=0;e<ne.length;e+=1)re[e]=Td(sd(t,ne,e));const oe=t=>z(re[t],1,1,(()=>{re[t]=null}));let ie=null;ne.length||(ie=Ed());let le=t[0].requirements?.install?.skills??[],se=[];for(let e=0;e<le.length;e+=1)se[e]=Rd(ld(t,le,e));const ae=t=>z(se[t],1,1,(()=>{se[t]=null}));let ce=null;le.length||(ce=Sd()),_t=new Ci({props:{requirement:{...t[0].requirements?.install??{},components:(t[0].requirements?.install?.components??[]).concat([[[t[0].item,1]]])}}});let ue=t[0].requirements?.removal?.skills??[],de=[];for(let e=0;e<ue.length;e+=1)de[e]=Bd(id(t,ue,e));const fe=t=>z(de[t],1,1,(()=>{de[t]=null}));let pe=null;ue.length||(pe=Ad());let me=t[0].requirements?.removal&&Dd(t),he=t[0].requirements?.repair&&qd(t),ge=t[3].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[3],$$slots:{default:[Ud,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Vehicles",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};16777217&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){e=h("h1"),J(n.$$.fragment),r=_(),o=g(Bt),i=_(),l=h("section"),s=h("h1"),s.textContent="Vehicle Part",a=_(),c=h("dl"),u=h("dt"),u.textContent="Item",v=h("dd"),J(w.$$.fragment),C=h("dt"),C.textContent="Weight",k=h("dd"),E=g(Dt),Ht&&Ht.c(),T=h("dt"),T.textContent="Durability\n    ",S=h("dd"),I=g(qt),Gt&&Gt.c(),O=y(),Wt&&Wt.c(),R=y(),zt&&zt.c(),A=y(),Yt&&Yt.c(),M=y(),Vt&&Vt.c(),N=h("dt"),N.textContent="Damage",B=h("dd"),D=g(Lt),q=g("%"),Jt&&Jt.c(),L=y(),Kt&&Kt.c(),j=y(),Xt&&Xt.c(),P=y(),Zt&&Zt.c(),F=y(),te&&te.c(),U=y(),ee&&ee.c(),Y=h("dt"),Y.textContent="Flags",V=h("dd"),Z=h("ul");for(let t=0;t<re.length;t+=1)re[t].c();ie&&ie.c(),Q=_(),tt=h("p"),et=g(Pt),nt=_(),rt=h("div"),ot=h("section"),lt=h("h1"),lt.textContent="Install",at=_(),ct=h("dl"),ut=h("dt"),ut.textContent="Skills Required",dt=h("dd");for(let t=0;t<se.length;t+=1)se[t].c();ce&&ce.c(),ft=_(),mt=h("dt"),mt.textContent="Time",ht=h("dd"),gt=g(Ft),J(_t.$$.fragment),yt=_(),vt=h("section"),$t=h("h1"),$t.textContent="Remove",bt=_(),wt=h("dl"),xt=h("dt"),xt.textContent="Skills Required",Ct=h("dd");for(let t=0;t<de.length;t+=1)de[t].c();pe&&pe.c(),kt=_(),Et=h("dt"),Et.textContent="Time",Tt=h("dd"),St=g(Ut),It=_(),me&&me.c(),Ot=_(),he&&he.c(),Rt=_(),ge&&ge.c(),At=y(),$(T,"title","Maximum damage part can sustain before being destroyed"),$(Z,"class","comma-separated"),x(tt,"color","var(--cata-color-gray)"),$(mt,"title","Time required goes down with better skills"),$(Et,"title","Time required goes down with better skills"),$(rt,"class","side-by-side")},m(t,p){f(t,e,p),K(n,e,null),d(e,r),d(e,o),f(t,i,p),f(t,l,p),d(l,s),d(l,a),d(l,c),d(c,u),d(c,v),K(w,v,null),d(c,C),d(c,k),d(k,E),Ht&&Ht.m(c,null),d(c,T),d(c,S),d(S,I),Gt&&Gt.m(c,null),d(c,O),Wt&&Wt.m(c,null),d(c,R),zt&&zt.m(c,null),d(c,A),Yt&&Yt.m(c,null),d(c,M),Vt&&Vt.m(c,null),d(c,N),d(c,B),d(B,D),d(B,q),Jt&&Jt.m(c,null),d(c,L),Kt&&Kt.m(c,null),d(c,j),Xt&&Xt.m(c,null),d(c,P),Zt&&Zt.m(c,null),d(c,F),te&&te.m(c,null),d(c,U),ee&&ee.m(c,null),d(c,Y),d(c,V),d(V,Z);for(let t=0;t<re.length;t+=1)re[t].m(Z,null);ie&&ie.m(Z,null),d(l,Q),d(l,tt),d(tt,et),f(t,nt,p),f(t,rt,p),d(rt,ot),d(ot,lt),d(ot,at),d(ot,ct),d(ct,ut),d(ct,dt);for(let t=0;t<se.length;t+=1)se[t].m(dt,null);ce&&ce.m(dt,null),d(dt,ft),d(ct,mt),d(ct,ht),d(ht,gt),K(_t,ct,null),d(rt,yt),d(rt,vt),d(vt,$t),d(vt,bt),d(vt,wt),d(wt,xt),d(wt,Ct);for(let t=0;t<de.length;t+=1)de[t].m(Ct,null);pe&&pe.m(Ct,null),d(Ct,kt),d(wt,Et),d(wt,Tt),d(Tt,St),d(Tt,It),me&&me.m(wt,null),f(t,Ot,p),he&&he.m(t,p),f(t,Rt,p),ge&&ge.m(t,p),f(t,At,p),Mt=!0},p(t,[e]){const r={};1&e&&(r.item=t[0]),n.$set(r),(!Mt||1&e)&&Bt!==(Bt=(t[0].name?st(t[0]):st(t[1].byId("item",t[0].item)))+"")&&b(o,Bt);const i={};if(1&e&&(i.id=t[0].item),w.$set(i),(!Mt||1&e)&&Dt!==(Dt=pt(t[1].byId("item",t[0].item).weight)+"")&&b(E,Dt),t[0].fuel_type?Ht?(Ht.p(t,e),1&e&&W(Ht,1)):(Ht=dd(t),Ht.c(),W(Ht,1),Ht.m(c,T)):Ht&&(H(),z(Ht,1,1,(()=>{Ht=null})),G()),(!Mt||1&e)&&qt!==(qt=(t[0].durability??0)+"")&&b(I,qt),t[0].size?Gt?Gt.p(t,e):(Gt=fd(t),Gt.c(),Gt.m(c,O)):Gt&&(Gt.d(1),Gt=null),t[0].folded_volume?Wt?Wt.p(t,e):(Wt=pd(t),Wt.c(),Wt.m(c,R)):Wt&&(Wt.d(1),Wt=null),t[0].qualities?.length?zt?(zt.p(t,e),1&e&&W(zt,1)):(zt=md(t),zt.c(),W(zt,1),zt.m(c,A)):zt&&(H(),z(zt,1,1,(()=>{zt=null})),G()),t[0].comfort?Yt?Yt.p(t,e):(Yt=gd(t),Yt.c(),Yt.m(c,M)):Yt&&(Yt.d(1),Yt=null),t[0].floor_bedding_warmth?Vt?Vt.p(t,e):(Vt=_d(t),Vt.c(),Vt.m(c,N)):Vt&&(Vt.d(1),Vt=null),(!Mt||1&e)&&Lt!==(Lt=(t[0].damage_modifier??100)+"")&&b(D,Lt),t[0].epower?Jt?Jt.p(t,e):(Jt=yd(t),Jt.c(),Jt.m(c,L)):Jt&&(Jt.d(1),Jt=null),t[0].energy_consumption?Kt?Kt.p(t,e):(Kt=vd(t),Kt.c(),Kt.m(c,j)):Kt&&(Kt.d(1),Kt=null),t[0].power?Xt?Xt.p(t,e):(Xt=$d(t),Xt.c(),Xt.m(c,P)):Xt&&(Xt.d(1),Xt=null),1&e&&(jt=t[0].bonus&&Gd(t[0])),jt?Zt?Zt.p(t,e):(Zt=wd(t),Zt.c(),Zt.m(c,F)):Zt&&(Zt.d(1),Zt=null),t[0].pseudo_tools?.length?te?(te.p(t,e),1&e&&W(te,1)):(te=xd(t),te.c(),W(te,1),te.m(c,U)):te&&(H(),z(te,1,1,(()=>{te=null})),G()),t[2]?.length&&ee.p(t,e),1&e){let n;for(ne=t[0].flags??[],n=0;n<ne.length;n+=1){const r=sd(t,ne,n);re[n]?(re[n].p(r,e),W(re[n],1)):(re[n]=Td(r),re[n].c(),W(re[n],1),re[n].m(Z,null))}for(H(),n=ne.length;n<re.length;n+=1)oe(n);G(),ne.length?ie&&(ie.d(1),ie=null):ie||(ie=Ed(),ie.c(),ie.m(Z,null))}if((!Mt||1&e)&&Pt!==(Pt=it(t[0].description??t[1].byId("item",t[0].item).description)+"")&&b(et,Pt),1&e){let n;for(le=t[0].requirements?.install?.skills??[],n=0;n<le.length;n+=1){const r=ld(t,le,n);se[n]?(se[n].p(r,e),W(se[n],1)):(se[n]=Rd(r),se[n].c(),W(se[n],1),se[n].m(dt,ft))}for(H(),n=le.length;n<se.length;n+=1)ae(n);G(),le.length?ce&&(ce.d(1),ce=null):ce||(ce=Sd(),ce.c(),ce.m(dt,ft))}(!Mt||1&e)&&Ft!==(Ft=(t[0].requirements?.install?.time??"1 hour")+"")&&b(gt,Ft);const l={};if(1&e&&(l.requirement={...t[0].requirements?.install??{},components:(t[0].requirements?.install?.components??[]).concat([[[t[0].item,1]]])}),_t.$set(l),1&e){let n;for(ue=t[0].requirements?.removal?.skills??[],n=0;n<ue.length;n+=1){const r=id(t,ue,n);de[n]?(de[n].p(r,e),W(de[n],1)):(de[n]=Bd(r),de[n].c(),W(de[n],1),de[n].m(Ct,kt))}for(H(),n=ue.length;n<de.length;n+=1)fe(n);G(),ue.length?pe&&(pe.d(1),pe=null):pe||(pe=Ad(),pe.c(),pe.m(Ct,kt))}(!Mt||1&e)&&Ut!==(Ut=(t[0].requirements?.removal?.time??zd(Wd(t[0].requirements?.install?.time??"1 hour")/2+" s"))+"")&&b(St,Ut),t[0].requirements?.removal?me?(me.p(t,e),1&e&&W(me,1)):(me=Dd(t),me.c(),W(me,1),me.m(wt,null)):me&&(H(),z(me,1,1,(()=>{me=null})),G()),t[0].requirements?.repair?he?(he.p(t,e),1&e&&W(he,1)):(he=qd(t),he.c(),W(he,1),he.m(Rt.parentNode,Rt)):he&&(H(),z(he,1,1,(()=>{he=null})),G()),t[3].length&&ge.p(t,e)},i(t){if(!Mt){W(n.$$.fragment,t),W(w.$$.fragment,t),W(Ht),W(zt),W(te),W(ee);for(let t=0;t<ne.length;t+=1)W(re[t]);for(let t=0;t<le.length;t+=1)W(se[t]);W(_t.$$.fragment,t);for(let t=0;t<ue.length;t+=1)W(de[t]);W(me),W(he),W(ge),Mt=!0}},o(t){z(n.$$.fragment,t),z(w.$$.fragment,t),z(Ht),z(zt),z(te),z(ee),re=re.filter(Boolean);for(let t=0;t<re.length;t+=1)z(re[t]);se=se.filter(Boolean);for(let t=0;t<se.length;t+=1)z(se[t]);z(_t.$$.fragment,t),de=de.filter(Boolean);for(let t=0;t<de.length;t+=1)z(de[t]);z(me),z(he),z(ge),Mt=!1},d(t){t&&p(e),X(n),t&&p(i),t&&p(l),X(w),Ht&&Ht.d(),Gt&&Gt.d(),Wt&&Wt.d(),zt&&zt.d(),Yt&&Yt.d(),Vt&&Vt.d(),Jt&&Jt.d(),Kt&&Kt.d(),Xt&&Xt.d(),Zt&&Zt.d(),te&&te.d(),ee&&ee.d(),m(re,t),ie&&ie.d(),t&&p(nt),t&&p(rt),m(se,t),ce&&ce.d(),X(_t),m(de,t),pe&&pe.d(),me&&me.d(),t&&p(Ot),he&&he.d(t),t&&p(Rt),ge&&ge.d(t),t&&p(At)}}}function Gd(t){var e;const n=null!==(e=t.flags)&&void 0!==e?e:[];return n.includes("SEATBELT")?"Strength":n.includes("HORN")?"Noise":n.includes("MUFFLER")?"Noise Reduction":n.includes("VISION")?"Range":["LIGHT","CONE_LIGHT","WIDE_CONE_LIGHT","CIRCLE_LIGHT","DOME_LIGHT","AISLE_LIGHT","EVENTURN","ODDTURN","ATOMIC_LIGHT"].some((t=>n.includes(t)))?"Light":n.includes("REAPER")?"Plant Harvested":void 0}function Wd(t){if("number"==typeof t)return t/100;const e=[["turns",1],["turn",1],["t",1],["seconds",1],["second",1],["s",1],["minutes",60],["minute",60],["m",60],["hours",3600],["hour",3600],["h",3600],["days",86400],["day",86400],["d",86400]],[n,r]=t.trim().split(/\s+/),o=e.find((t=>t[0]===r));if(!o)throw new Error(`bad duration: ${JSON.stringify(t)}`);return Number(n)*o[1]}function zd(t){const e=Wd(t);return`${Math.round(e/60)} m`}function Yd(t,e,n){let{item:r}=e;const o=I("data"),i="string"==typeof r.breaks_into?o.byId("item_group",r.breaks_into):Array.isArray(r.breaks_into)?{subtype:"collection",entries:r.breaks_into}:r.breaks_into?r.breaks_into:null,l=i&&o.flattenItemGroup(i),s=o.byType("vehicle").filter((t=>t.parts.some((t=>{var e;return(t.part?[{part:t.part,fuel:t.fuel}]:null===(e=t.parts)||void 0===e?void 0:e.map((t=>"string"==typeof t?{part:t}:t))).some((t=>$t(o,t.part)[0]===r.id))}))));return s.sort(((t,e)=>st(t).localeCompare(st(e)))),t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o,l,s]}class Vd extends tt{constructor(t){super(),Q(this,t,Yd,Hd,i,{item:0})}}function Jd(t,e,n){const r=t.slice();return r[1]=e[n],r}function Kd(t,e,n){const r=t.slice();return r[1]=e[n],r}function Xd(t){let e,n,r,o,i,l=t[0].mult_bonuses??[],s=[];for(let e=0;e<l.length;e+=1)s[e]=tf(Kd(t,l,e));let a=t[0].flat_bonuses??[],c=[];for(let e=0;e<a.length;e+=1)c[e]=of(Jd(t,a,e));return{c(){e=h("dt"),e.textContent="Bonus",n=_(),r=h("dd"),o=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=_();for(let t=0;t<c.length;t+=1)c[t].c()},m(t,l){f(t,e,l),f(t,n,l),f(t,r,l),d(r,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);d(o,i);for(let t=0;t<c.length;t+=1)c[t].m(o,null)},p(t,e){if(1&e){let n;for(l=t[0].mult_bonuses??[],n=0;n<l.length;n+=1){const r=Kd(t,l,n);s[n]?s[n].p(r,e):(s[n]=tf(r),s[n].c(),s[n].m(o,i))}for(;n<s.length;n+=1)s[n].d(1);s.length=l.length}if(1&e){let n;for(a=t[0].flat_bonuses??[],n=0;n<a.length;n+=1){const r=Jd(t,a,n);c[n]?c[n].p(r,e):(c[n]=of(r),c[n].c(),c[n].m(o,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},d(t){t&&p(e),t&&p(n),t&&p(r),m(s,t),m(c,t)}}}function Zd(t){let e,n=t[1].type+"";return{c(){e=g(n)},m(t,n){f(t,e,n)},p(t,r){1&r&&n!==(n=t[1].type+"")&&b(e,n)},d(t){t&&p(e)}}}function Qd(t){let e,n,r=af(t[1]["scaling-stat"])+"";return{c(){e=g("of "),n=g(r)},m(t,r){f(t,e,r),f(t,n,r)},p(t,e){1&e&&r!==(r=af(t[1]["scaling-stat"])+"")&&b(n,r)},d(t){t&&p(e),t&&p(n)}}}function tf(t){let e,n,r,o,i,l,s=cf(t[1].stat),a=sf(t[1].stat)+"",c=(100*t[1].scale).toFixed(0)+"",u=s&&Zd(t),m=t[1]["scaling-stat"]&&Qd(t);return{c(){e=h("li"),u&&u.c(),n=_(),r=g(a),o=g(": "),i=g(c),l=g("% "),m&&m.c()},m(t,s){f(t,e,s),u&&u.m(e,null),d(e,n),d(e,r),d(e,o),d(e,i),d(e,l),m&&m.m(e,null)},p(t,o){1&o&&(s=cf(t[1].stat)),s?u?u.p(t,o):(u=Zd(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null),1&o&&a!==(a=sf(t[1].stat)+"")&&b(r,a),1&o&&c!==(c=(100*t[1].scale).toFixed(0)+"")&&b(i,c),t[1]["scaling-stat"]?m?m.p(t,o):(m=Qd(t),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(t){t&&p(e),u&&u.d(),m&&m.d()}}}function ef(t){let e,n=t[1].type+"";return{c(){e=g(n)},m(t,n){f(t,e,n)},p(t,r){1&r&&n!==(n=t[1].type+"")&&b(e,n)},d(t){t&&p(e)}}}function nf(t){let e,n,r=t[1].scale<0?"":"+",o=t[1].scale+"";return{c(){e=g(r),n=g(o)},m(t,r){f(t,e,r),f(t,n,r)},p(t,i){1&i&&r!==(r=t[1].scale<0?"":"+")&&b(e,r),1&i&&o!==(o=t[1].scale+"")&&b(n,o)},d(t){t&&p(e),t&&p(n)}}}function rf(t){let e,n,r,o,i=t[1].scale<0?"":"+",l=(100*t[1].scale).toFixed(0)+"",s=af(t[1]["scaling-stat"])+"";return{c(){e=g(i),n=g(l),r=g("% of "),o=g(s)},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),f(t,o,i)},p(t,r){1&r&&i!==(i=t[1].scale<0?"":"+")&&b(e,i),1&r&&l!==(l=(100*t[1].scale).toFixed(0)+"")&&b(n,l),1&r&&s!==(s=af(t[1]["scaling-stat"])+"")&&b(o,s)},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o)}}}function of(t){let e,n,r,o,i,l=cf(t[1].stat),s=sf(t[1].stat)+"",a=l&&ef(t);function c(t,e){return t[1]["scaling-stat"]?rf:nf}let u=c(t),m=u(t);return{c(){e=h("li"),a&&a.c(),n=_(),r=g(s),o=g(":\n          "),m.c(),i=_()},m(t,l){f(t,e,l),a&&a.m(e,null),d(e,n),d(e,r),d(e,o),m.m(e,null),d(e,i)},p(t,o){1&o&&(l=cf(t[1].stat)),l?a?a.p(t,o):(a=ef(t),a.c(),a.m(e,n)):a&&(a.d(1),a=null),1&o&&s!==(s=sf(t[1].stat)+"")&&b(r,s),u===(u=c(t))&&m?m.p(t,o):(m.d(1),m=u(t),m&&(m.c(),m.m(e,i)))},d(t){t&&p(e),a&&a.d(),m.d()}}}function lf(e){let n,r=(e[0].mult_bonuses||e[0].flat_bonuses)&&Xd(e);return{c(){r&&r.c(),n=y()},m(t,e){r&&r.m(t,e),f(t,n,e)},p(t,[e]){t[0].mult_bonuses||t[0].flat_bonuses?r?r.p(t,e):(r=Xd(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&p(n)}}}function sf(t){switch(t){case"hit":return"Accuracy";case"crit_chance":return"Critical Hit Chance";case"dodge":return"Dodge";case"block":return"Block";case"block_effectiveness":return"Block effectiveness";case"speed":return"Speed";case"movecost":return"Move cost";case"damage":return"damage";case"armor":return"Armor";case"arpen":return"Armor penetration";case"target_armor_multiplier":return"Target armor multiplier";default:return""}}function af(t){switch(t){case"str":return"strength";case"dex":return"dexterity";case"int":return"intelligence";case"per":return"perception";default:return""}}function cf(t){return"damage"===t||"armor"===t||"arpen"===t}function uf(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class df extends tt{constructor(t){super(),Q(this,t,uf,lf,i,{item:0})}}function ff(t,e,n){const r=t.slice();return r[4]=e[n],r}function pf(t,e,n){const r=t.slice();return r[7]=e[n].name,r[8]=e[n].level,r[10]=n,r}function mf(t){let e;return{c(){e=h("em"),e.textContent="none"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function hf(t){let e;return{c(){e=g(", ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function gf(t){let e;return{c(){e=g(" and ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function _f(t){let e,n,r,o,i,l,s=t[8]+"";function a(t,e){return t[10]===t[0].skill_requirements.length-2?gf:t[10]!==t[0].skill_requirements.length-1?hf:void 0}e=new Nt({props:{type:"skill",id:t[7]}});let c=a(t),u=c&&c(t);return{c(){J(e.$$.fragment),n=g(" ("),r=g(s),o=g(")"),u&&u.c(),i=y()},m(t,s){K(e,t,s),f(t,n,s),f(t,r,s),f(t,o,s),u&&u.m(t,s),f(t,i,s),l=!0},p(t,n){const o={};1&n&&(o.id=t[7]),e.$set(o),(!l||1&n)&&s!==(s=t[8]+"")&&b(r,s),c!==(c=a(t))&&(u&&u.d(1),u=c&&c(t),u&&(u.c(),u.m(i.parentNode,i)))},i(t){l||(W(e.$$.fragment,t),l=!0)},o(t){z(e.$$.fragment,t),l=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o),u&&u.d(t),t&&p(i)}}}function yf(e){let n,r,o=e[4]+"";return{c(){n=h("li"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function vf(t){let e,n,r=st(t[1].get(t[4]))+"";return{c(){e=h("li"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){2&e&&r!==(r=st(t[1].get(t[4]))+"")&&b(n,r)},d(t){t&&p(e)}}}function $f(t){let e,n;function r(t,n){return(null==e||2&n)&&(e=!!t[1].has(t[4])),e?vf:yf}let o=r(t,-1),i=o(t);return{c(){i.c(),n=y()},m(t,e){i.m(t,e),f(t,n,e)},p(t,e){o===(o=r(t,e))&&i?i.p(t,e):(i.d(1),i=o(t),i&&(i.c(),i.m(n.parentNode,n)))},d(t){i.d(t),t&&p(n)}}}function bf(t){let e,n,r;return{c(){e=h("dt"),e.textContent="Requires Adjacent Wall",n=_(),r=h("dd"),r.textContent="Yes"},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}function wf(t){let e,n,r,o,i,l,s,a,c,u,y,v,w,x,C,k,E,T,S,I,O,R=t[0].melee_allowed?"Yes":"No",A=t[0].unarmed_allowed?"Yes":"No",M=t[0].unarmed_weapons_allowed??1?"Yes":"No",N=t[0].skill_requirements??[],B=[];for(let e=0;e<N.length;e+=1)B[e]=_f(pf(t,N,e));const D=t=>z(B[t],1,1,(()=>{B[t]=null}));let q=null;N.length||(q=mf());let L=t[2].length&&function(t){let e,n,r,o,i=t[2],l=[];for(let e=0;e<i.length;e+=1)l[e]=$f(ff(t,i,e));return{c(){e=h("dt"),e.textContent="Required Buffs",n=_(),r=h("dd"),o=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();$(o,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),f(t,r,i),d(r,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null)},p(t,e){if(6&e){let n;for(i=t[2],n=0;n<i.length;n+=1){const r=ff(t,i,n);l[n]?l[n].p(r,e):(l[n]=$f(r),l[n].c(),l[n].m(o,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(t){t&&p(e),t&&p(n),t&&p(r),m(l,t)}}}(t),j=t[0].wall_adjacent&&bf();return{c(){e=h("dt"),e.textContent="Required Skills",n=_(),r=h("dd");for(let t=0;t<B.length;t+=1)B[t].c();q&&q.c(),o=_(),L&&L.c(),i=_(),j&&j.c(),l=_(),s=h("dt"),s.textContent="Melee Weapon Allowed",a=_(),c=h("dd"),u=g(R),y=_(),v=h("dt"),v.textContent="Unarmed Allowed",w=_(),x=h("dd"),C=g(A),k=_(),E=h("dt"),E.textContent="Unarmed Weapon Allowed",T=_(),S=h("dd"),I=g(M)},m(t,p){f(t,e,p),f(t,n,p),f(t,r,p);for(let t=0;t<B.length;t+=1)B[t].m(r,null);q&&q.m(r,null),f(t,o,p),L&&L.m(t,p),f(t,i,p),j&&j.m(t,p),f(t,l,p),f(t,s,p),f(t,a,p),f(t,c,p),d(c,u),f(t,y,p),f(t,v,p),f(t,w,p),f(t,x,p),d(x,C),f(t,k,p),f(t,E,p),f(t,T,p),f(t,S,p),d(S,I),O=!0},p(t,[e]){if(1&e){let n;for(N=t[0].skill_requirements??[],n=0;n<N.length;n+=1){const o=pf(t,N,n);B[n]?(B[n].p(o,e),W(B[n],1)):(B[n]=_f(o),B[n].c(),W(B[n],1),B[n].m(r,null))}for(H(),n=N.length;n<B.length;n+=1)D(n);G(),N.length?q&&(q.d(1),q=null):q||(q=mf(),q.c(),q.m(r,null))}t[2].length&&L.p(t,e),t[0].wall_adjacent?j||(j=bf(),j.c(),j.m(l.parentNode,l)):j&&(j.d(1),j=null),(!O||1&e)&&R!==(R=t[0].melee_allowed?"Yes":"No")&&b(u,R),(!O||1&e)&&A!==(A=t[0].unarmed_allowed?"Yes":"No")&&b(C,A),(!O||1&e)&&M!==(M=t[0].unarmed_weapons_allowed??1?"Yes":"No")&&b(I,M)},i(t){if(!O){for(let t=0;t<N.length;t+=1)W(B[t]);O=!0}},o(t){B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)z(B[t]);O=!1},d(t){t&&p(e),t&&p(n),t&&p(r),m(B,t),q&&q.d(),t&&p(o),L&&L.d(t),t&&p(i),j&&j.d(t),t&&p(l),t&&p(s),t&&p(a),t&&p(c),t&&p(y),t&&p(v),t&&p(w),t&&p(x),t&&p(k),t&&p(E),t&&p(T),t&&p(S)}}}function xf(t,e,n){var r;let{item:o}=e,{buffMap:i=new Map}=e;const l="string"==typeof o.req_buffs?[o.req_buffs]:null!==(r=o.req_buffs)&&void 0!==r?r:[];return t.$$set=t=>{"item"in t&&n(0,o=t.item),"buffMap"in t&&n(1,i=t.buffMap)},[o,i,l]}class Cf extends tt{constructor(t){super(),Q(this,t,xf,wf,i,{item:0,buffMap:1})}}function kf(t){let e,n,r;function o(t,e){return t[1].weighting>1?Tf:t[1].weighting<-1?Ef:void 0}let i=o(t),l=i&&i(t);return{c(){e=h("dt"),e.textContent="Chance to Activate",n=h("dd"),l&&l.c(),r=_()},m(t,o){f(t,e,o),f(t,n,o),l&&l.m(n,null),d(n,r)},p(t,e){i===(i=o(t))&&l?l.p(t,e):(l&&l.d(1),l=i&&i(t),l&&(l.c(),l.m(n,r)))},d(t){t&&p(e),t&&p(n),l&&l.d()}}}function Ef(t){let e,n,r=Math.abs(t[1].weighting)+"";return{c(){e=g("1/"),n=g(r)},m(t,r){f(t,e,r),f(t,n,r)},p(t,e){2&e&&r!==(r=Math.abs(t[1].weighting)+"")&&b(n,r)},d(t){t&&p(e),t&&p(n)}}}function Tf(t){let e,n,r,o=(100*(t[1].weighting-1)).toFixed(0)+"";return{c(){e=g("+"),n=g(o),r=g("%")},m(t,o){f(t,e,o),f(t,n,o),f(t,r,o)},p(t,e){2&e&&o!==(o=(100*(t[1].weighting-1)).toFixed(0)+"")&&b(n,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}function Sf(t){let e,n,r,o=t[1].aoe+"";return{c(){e=h("dt"),e.textContent="AoE Shape",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){2&e&&o!==(o=t[1].aoe+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function If(t){let e,n,r,o=t[1].stun_dur+"";return{c(){e=h("dt"),e.textContent="Stun Duration",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){2&e&&o!==(o=t[1].stun_dur+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Of(t){let e,n,r,o=t[1].down_dur+"";return{c(){e=h("dt"),e.textContent="Down Duration",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){2&e&&o!==(o=t[1].down_dur+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Rf(t){let e,n,r,o=t[1].knockback_dist+"";return{c(){e=h("dt"),e.textContent="Knockback Distance",n=h("dd"),r=g(o)},m(t,o){f(t,e,o),f(t,n,o),d(n,r)},p(t,e){2&e&&o!==(o=t[1].knockback_dist+"")&&b(r,o)},d(t){t&&p(e),t&&p(n)}}}function Af(t){let e,n,r=t[1].description+"";return{c(){e=h("p"),n=g(r),x(e,"color","var(--cata-color-gray)")},m(t,r){f(t,e,r),d(e,n)},p(t,e){2&e&&r!==(r=t[1].description+"")&&b(n,r)},d(t){t&&p(e)}}}function Mf(t){let e,n;return e=new Nt({props:{type:"item",id:t[1].id}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.id=t[1].id),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Nf(e){let n,r,o,i,l,s,a,c,u,m,v,$,w,x,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L=e[1].name+"",j=e[1].crit_ok?"Yes":e[1].crit_tec?"Only":"No",P=JSON.stringify(e[1],null,2)+"";u=new Cf({props:{item:e[1],buffMap:e[0]}});let F=e[1].weighting&&1!==e[1].weighting&&kf(e),U=e[4].length&&function(e){let n,r;return{c(){n=h("dt"),n.textContent="Target Requirements",r=h("dd"),r.textContent=`${e[4].join(", ")} \n      `},m(t,e){f(t,n,e),f(t,r,e)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),H=e[1].aoe&&Sf(e);k=new df({props:{item:e[1]}});let G=e[1].stun_dur&&If(e),Y=e[1].down_dur&&Of(e),V=e[1].knockback_dist&&Rf(e),Z=e[1].description&&Af(e),Q=e[2].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[2],limit:20,$$slots:{default:[Mf,({item:t})=>({1:t}),({item:t})=>t?2:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Weapons",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};66&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(e);return{c(){n=h("section"),r=h("h1"),o=g("Technique: "),i=g(L),l=_(),s=h("dl"),a=h("dt"),a.textContent="Type",c=h("dd"),c.textContent=`${e[3]}`,J(u.$$.fragment),m=h("dt"),m.textContent="Activate on Crit?",v=h("dd"),$=g(j),F&&F.c(),w=y(),U&&U.c(),x=y(),H&&H.c(),C=y(),J(k.$$.fragment),G&&G.c(),E=y(),Y&&Y.c(),T=y(),V&&V.c(),S=_(),Z&&Z.c(),I=_(),O=h("details"),R=h("summary"),R.textContent="Technique JSON",A=_(),M=h("pre"),N=g(P),B=_(),Q&&Q.c(),D=y()},m(t,e){f(t,n,e),d(n,r),d(r,o),d(r,i),d(n,l),d(n,s),d(s,a),d(s,c),K(u,s,null),d(s,m),d(s,v),d(v,$),F&&F.m(s,null),d(s,w),U&&U.m(s,null),d(s,x),H&&H.m(s,null),d(s,C),K(k,s,null),G&&G.m(s,null),d(s,E),Y&&Y.m(s,null),d(s,T),V&&V.m(s,null),d(n,S),Z&&Z.m(n,null),d(n,I),d(n,O),d(O,R),d(O,A),d(O,M),d(M,N),f(t,B,e),Q&&Q.m(t,e),f(t,D,e),q=!0},p(t,[e]){(!q||2&e)&&L!==(L=t[1].name+"")&&b(i,L);const r={};2&e&&(r.item=t[1]),1&e&&(r.buffMap=t[0]),u.$set(r),(!q||2&e)&&j!==(j=t[1].crit_ok?"Yes":t[1].crit_tec?"Only":"No")&&b($,j),t[1].weighting&&1!==t[1].weighting?F?F.p(t,e):(F=kf(t),F.c(),F.m(s,w)):F&&(F.d(1),F=null),t[4].length&&U.p(t,e),t[1].aoe?H?H.p(t,e):(H=Sf(t),H.c(),H.m(s,C)):H&&(H.d(1),H=null);const o={};2&e&&(o.item=t[1]),k.$set(o),t[1].stun_dur?G?G.p(t,e):(G=If(t),G.c(),G.m(s,E)):G&&(G.d(1),G=null),t[1].down_dur?Y?Y.p(t,e):(Y=Of(t),Y.c(),Y.m(s,T)):Y&&(Y.d(1),Y=null),t[1].knockback_dist?V?V.p(t,e):(V=Rf(t),V.c(),V.m(s,null)):V&&(V.d(1),V=null),t[1].description?Z?Z.p(t,e):(Z=Af(t),Z.c(),Z.m(n,I)):Z&&(Z.d(1),Z=null),(!q||2&e)&&P!==(P=JSON.stringify(t[1],null,2)+"")&&b(N,P),t[2].length&&Q.p(t,e)},i(t){q||(W(u.$$.fragment,t),W(k.$$.fragment,t),W(Q),q=!0)},o(t){z(u.$$.fragment,t),z(k.$$.fragment,t),z(Q),q=!1},d(t){t&&p(n),X(u),F&&F.d(),U&&U.d(),H&&H.d(),X(k),G&&G.d(),Y&&Y.d(),V&&V.d(),Z&&Z.d(),t&&p(B),Q&&Q.d(t),t&&p(D)}}}function Bf(t,e,n){let{item:r}=e,{buffMap:o=new Map}=e;const i=I("data").byType("item").filter((t=>{var e;return t.id&&(null!==(e=t.techniques)&&void 0!==e?e:[]).includes(r.id)})).sort(((t,e)=>t.id.localeCompare(e.id))),l=r.block_counter?"Block Counter":r.dodge_counter?"Dodge Counter":r.miss_recovery?"Miss Recovery":r.grab_break?"Grab Break":r.defensive?"Defensive":"Offensive",s=[];return r.human_target&&s.push("humanoid"),r.downed_target&&s.push("downed"),r.stunned_target&&s.push("stunned"),t.$$set=t=>{"item"in t&&n(1,r=t.item),"buffMap"in t&&n(0,o=t.buffMap)},[o,r,i,l,s]}class Df extends tt{constructor(t){super(),Q(this,t,Bf,Nf,i,{item:1,buffMap:0})}}function qf(t,e,n){const r=t.slice();return r[17]=e[n],r}function Lf(t,e,n){const r=t.slice();return r[20]=e[n][0],r[21]=e[n][1],r}function jf(t,e,n){const r=t.slice();return r[24]=e[n],r}function Pf(t,e,n){const r=t.slice();return r[27]=e[n],r}function Ff(t,e,n){const r=t.slice();return r[30]=e[n],r}function Uf(t,e,n){const r=t.slice();return r[33]=e[n][0],r[34]=e[n][1],r}function Hf(t){let e,n,r,o,i,l,s,a=null!=t[0].learn_difficulty&&Gf(t),c=t[0].autolearn?.length&&Wf(t),u=t[2].length&&function(t){let e,n,r,o,i,l=t[2],s=[];for(let e=0;e<l.length;e+=1)s[e]=Vf(Ff(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Found In",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(4&e[0]){let n;for(l=t[2],n=0;n<l.length;n+=1){const o=Ff(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Vf(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),g=t[0].weapon_category&&Jf(t),v=(99!=(t[0].arm_block??99)||t[0].arm_block_with_bio_armor_arms)&&Xf(t),b=(99!==(t[0].leg_block??99)||t[0].leg_block_with_bio_armor_legs)&&tp(t);return{c(){e=h("dl"),a&&a.c(),n=y(),c&&c.c(),r=y(),u&&u.c(),o=y(),g&&g.c(),i=y(),v&&v.c(),l=y(),b&&b.c()},m(t,p){f(t,e,p),a&&a.m(e,null),d(e,n),c&&c.m(e,null),d(e,r),u&&u.m(e,null),d(e,o),g&&g.m(e,null),d(e,i),v&&v.m(e,null),d(e,l),b&&b.m(e,null),s=!0},p(t,o){null!=t[0].learn_difficulty?a?a.p(t,o):(a=Gf(t),a.c(),a.m(e,n)):a&&(a.d(1),a=null),t[0].autolearn?.length?c?(c.p(t,o),1&o[0]&&W(c,1)):(c=Wf(t),c.c(),W(c,1),c.m(e,r)):c&&(H(),z(c,1,1,(()=>{c=null})),G()),t[2].length&&u.p(t,o),t[0].weapon_category?g?(g.p(t,o),1&o[0]&&W(g,1)):(g=Jf(t),g.c(),W(g,1),g.m(e,i)):g&&(H(),z(g,1,1,(()=>{g=null})),G()),99!=(t[0].arm_block??99)||t[0].arm_block_with_bio_armor_arms?v?(v.p(t,o),1&o[0]&&W(v,1)):(v=Xf(t),v.c(),W(v,1),v.m(e,l)):v&&(H(),z(v,1,1,(()=>{v=null})),G()),99!==(t[0].leg_block??99)||t[0].leg_block_with_bio_armor_legs?b?(b.p(t,o),1&o[0]&&W(b,1)):(b=tp(t),b.c(),W(b,1),b.m(e,null)):b&&(H(),z(b,1,1,(()=>{b=null})),G())},i(t){s||(W(c),W(u),W(g),W(v),W(b),s=!0)},o(t){z(c),z(u),z(g),z(v),z(b),s=!1},d(t){t&&p(e),a&&a.d(),c&&c.d(),u&&u.d(),g&&g.d(),v&&v.d(),b&&b.d()}}}function Gf(t){let e,n,r,o,i,l,s=t[0].learn_difficulty+"",a=up(t[0].learn_difficulty)+"";return{c(){e=h("dt"),e.textContent="Difficulty to Learn",n=h("dd"),r=g(s),o=g(" ("),i=g(a),l=g(")\n        ")},m(t,s){f(t,e,s),f(t,n,s),d(n,r),d(n,o),d(n,i),d(n,l)},p(t,e){1&e[0]&&s!==(s=t[0].learn_difficulty+"")&&b(r,s),1&e[0]&&a!==(a=up(t[0].learn_difficulty)+"")&&b(i,a)},d(t){t&&p(e),t&&p(n)}}}function Wf(t){let e,n,r,o,i=t[0].autolearn&&zf(t);return{c(){e=h("dt"),e.textContent="Autolearn\n        ",n=h("dd"),i&&i.c(),r=_(),$(e,"title","Learned at these skill levels, otherwise only learnable from a book")},m(t,l){f(t,e,l),f(t,n,l),i&&i.m(n,null),d(n,r),o=!0},p(t,e){t[0].autolearn?i?(i.p(t,e),1&e[0]&&W(i,1)):(i=zf(t),i.c(),W(i,1),i.m(n,r)):i&&(H(),z(i,1,1,(()=>{i=null})),G())},i(t){o||(W(i),o=!0)},o(t){z(i),o=!1},d(t){t&&p(e),t&&p(n),i&&i.d()}}}function zf(t){let e,n,r=t[0].autolearn,o=[];for(let e=0;e<r.length;e+=1)o[e]=Yf(Uf(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){e=h("ul");for(let t=0;t<o.length;t+=1)o[t].c();$(e,"class","comma-separated")},m(t,r){f(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){if(1&n[0]){let l;for(r=t[0].autolearn,l=0;l<r.length;l+=1){const i=Uf(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=Yf(i),o[l].c(),W(o[l],1),o[l].m(e,null))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){t&&p(e),m(o,t)}}}function Yf(t){let e,n,r,o,i,l,s=t[34]+"";return n=new Nt({props:{type:"skill",id:t[33]}}),{c(){e=h("li"),J(n.$$.fragment),r=g(" ("),o=g(s),i=g(")")},m(t,s){f(t,e,s),K(n,e,null),d(e,r),d(e,o),d(e,i),l=!0},p(t,e){const r={};1&e[0]&&(r.id=t[33]),n.$set(r),(!l||1&e[0])&&s!==(s=t[34]+"")&&b(o,s)},i(t){l||(W(n.$$.fragment,t),l=!0)},o(t){z(n.$$.fragment,t),l=!1},d(t){t&&p(e),X(n)}}}function Vf(e){let n,r,o;return r=new Nt({props:{type:"item",id:e[30].id}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function Jf(t){let e,n,r,o,i,l=t[0].weapon_category,s=[];for(let e=0;e<l.length;e+=1)s[e]=Kf(Pf(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Weapon Category",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e[0]){let n;for(l=t[0].weapon_category,n=0;n<l.length;n+=1){const o=Pf(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Kf(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Kf(t){let e,n,r;return n=new Nt({props:{type:"weapon_category",id:t[27]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e[0]&&(r.id=t[27]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Xf(t){let e,n,r,o,i,l;const s=[Qf,Zf],a=[];function c(t,e){return t[0].arm_block_with_bio_armor_arms?0:1}return r=c(t),o=a[r]=s[r](t),{c(){e=h("dt"),e.textContent="Arm Block",n=h("dd"),o.c(),i=_()},m(t,o){f(t,e,o),f(t,n,o),a[r].m(n,null),d(n,i),l=!0},p(t,e){let l=r;r=c(t),r===l?a[r].p(t,e):(H(),z(a[l],1,1,(()=>{a[l]=null})),G(),o=a[r],o?o.p(t,e):(o=a[r]=s[r](t),o.c()),W(o,1),o.m(n,i))},i(t){l||(W(o),l=!0)},o(t){z(o),l=!1},d(t){t&&p(e),t&&p(n),a[r].d()}}}function Zf(t){let e,n,r,o,i,l=t[0].arm_block+"";return e=new Nt({props:{type:"skill",id:"unarmed"}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,e){(!i||1&e[0])&&l!==(l=t[0].arm_block+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function Qf(e){let n,r,o;return r=new Nt({props:{type:"item",id:"bio_armor_arms"}}),{c(){n=g("with "),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r,t)}}}function tp(t){let e,n,r,o,i;const l=[np,ep],s=[];function a(t,e){return t[0].leg_block_with_bio_armor_legs?0:1}return r=a(t),o=s[r]=l[r](t),{c(){e=h("dt"),e.textContent="Leg Block",n=h("dd"),o.c()},m(t,o){f(t,e,o),f(t,n,o),s[r].m(n,null),i=!0},p(t,e){let i=r;r=a(t),r===i?s[r].p(t,e):(H(),z(s[i],1,1,(()=>{s[i]=null})),G(),o=s[r],o?o.p(t,e):(o=s[r]=l[r](t),o.c()),W(o,1),o.m(n,null))},i(t){i||(W(o),i=!0)},o(t){z(o),i=!1},d(t){t&&p(e),t&&p(n),s[r].d()}}}function ep(t){let e,n,r,o,i,l=t[0].leg_block+"";return e=new Nt({props:{type:"skill",id:"unarmed"}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,e){(!i||1&e[0])&&l!==(l=t[0].leg_block+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function np(e){let n,r,o;return r=new Nt({props:{type:"item",id:"bio_armor_legs"}}),{c(){n=g("with "),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,t,e),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r,t)}}}function rp(t){let e,n,r,o,i;return o=new xe({props:{items:[...t[0].weapons].sort(t[5]),$$slots:{default:[op,({item:t})=>({0:t}),({item:t})=>[t?1:0]]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Weapons",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};1&e[0]&&(n.items=[...t[0].weapons].sort(t[5])),1&e[0]|64&e[1]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}function op(t){let e,n;return e=new Nt({props:{id:t[0],type:"item"}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.id=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ip(e){let n,r,o,i,l,s,a,c,u,m,v,b,w,C,k,E,T,S=e[20]+"",I=e[24].name+"";c=new Cf({props:{item:e[24],buffMap:e[4]}}),u=new df({props:{item:e[24]}});let O=e[24].buff_duration&&function(e){let n,r,o,i=e[24].buff_duration+"";return{c(){n=h("dt"),n.textContent="Duration",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),R=e[24].max_stacks&&function(e){let n,r,o,i=e[24].max_stacks+"";return{c(){n=h("dt"),n.textContent="Max Stacks",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),A=e[24].bonus_dodges&&function(e){let n,r,o,i=e[24].bonus_dodges+"";return{c(){n=h("dt"),n.textContent="Bonus Dodges",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),M=e[24].bonus_blocks&&function(e){let n,r,o,i=e[24].bonus_blocks+"";return{c(){n=h("dt"),n.textContent="Bonus Blocks",r=h("dd"),o=g(i)},m(t,e){f(t,n,e),f(t,r,e),d(r,o)},p:t,d(t){t&&p(n),t&&p(r)}}}(e),N=e[24].quiet&&function(t){let e,n;return{c(){e=h("dt"),e.textContent="Silent",n=h("dd"),n.textContent="Yes",$(e,"title","Attacks will be completely silent")},m(t,r){f(t,e,r),f(t,n,r)},d(t){t&&p(e),t&&p(n)}}}(),B=e[24].stealthy&&function(t){let e,n;return{c(){e=h("dt"),e.textContent="Stealthy",n=h("dd"),n.textContent="Yes",$(e,"title","Movement will make less noise")},m(t,r){f(t,e,r),f(t,n,r)},d(t){t&&p(e),t&&p(n)}}}(),D=e[24].throw_immune&&function(t){let e,n;return{c(){e=h("dt"),e.textContent="Throw Immune",n=h("dd"),n.textContent="Yes",$(e,"title","Immune to throws/grabs")},m(t,r){f(t,e,r),f(t,n,r)},d(t){t&&p(e),t&&p(n)}}}(),q=e[24].description&&function(e){let n,r,o=e[24].description+"";return{c(){n=h("p"),r=g(o),x(n,"color","var(--cata-color-gray)"),x(n,"white-space","pre-wrap")},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}(e);return{c(){n=h("section"),r=h("h1"),o=g(S),i=g(": "),l=g(I),s=_(),a=h("dl"),J(c.$$.fragment),J(u.$$.fragment),O&&O.c(),m=y(),R&&R.c(),v=y(),A&&A.c(),b=y(),M&&M.c(),w=y(),N&&N.c(),C=y(),B&&B.c(),k=y(),D&&D.c(),E=_(),q&&q.c()},m(t,e){f(t,n,e),d(n,r),d(r,o),d(r,i),d(r,l),d(n,s),d(n,a),K(c,a,null),K(u,a,null),O&&O.m(a,null),d(a,m),R&&R.m(a,null),d(a,v),A&&A.m(a,null),d(a,b),M&&M.m(a,null),d(a,w),N&&N.m(a,null),d(a,C),B&&B.m(a,null),d(a,k),D&&D.m(a,null),d(n,E),q&&q.m(n,null),T=!0},p(t,e){t[24].buff_duration&&O.p(t,e),t[24].max_stacks&&R.p(t,e),t[24].bonus_dodges&&A.p(t,e),t[24].bonus_blocks&&M.p(t,e),t[24].description&&q.p(t,e)},i(t){T||(W(c.$$.fragment,t),W(u.$$.fragment,t),T=!0)},o(t){z(c.$$.fragment,t),z(u.$$.fragment,t),T=!1},d(t){t&&p(n),X(c),X(u),O&&O.d(),R&&R.d(),A&&A.d(),M&&M.d(),N&&N.d(),B&&B.d(),D&&D.d(),q&&q.d()}}}function lp(t){let e,n,r=t[21],o=[];for(let e=0;e<r.length;e+=1)o[e]=ip(jf(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(24&n[0]){let l;for(r=t[21],l=0;l<r.length;l+=1){const i=jf(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=ip(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function sp(t){let e,n,r,o,i=t[0].techniques,l=[];for(let e=0;e<i.length;e+=1)l[e]=ap(qf(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("h1"),e.textContent="Techniques",n=_();for(let t=0;t<l.length;t+=1)l[t].c();r=y()},m(t,i){f(t,e,i),f(t,n,i);for(let e=0;e<l.length;e+=1)l[e].m(t,i);f(t,r,i),o=!0},p(t,e){if(19&e[0]){let n;for(i=t[0].techniques,n=0;n<i.length;n+=1){const o=qf(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=ap(o),l[n].c(),W(l[n],1),l[n].m(r.parentNode,r))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t),t&&p(r)}}}function ap(t){let e,n;return e=new Df({props:{item:t[1].byId("technique",t[17]),buffMap:t[4]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.item=t[1].byId("technique",t[17])),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function cp(t){let e,n,r,o,i,l,s,a,c,u,v,$,w,C,k,E,T,S=st(t[0])+"",I=t[0].description+"",O=(null!=t[0].learn_difficulty||t[0].autolearn?.length||99!==(t[0].arm_block??99)||99!==(t[0].leg_block??99)||t[0].arm_block_with_bio_armor_arms||t[0].leg_block_with_bio_armor_legs||t[2].length)&&Hf(t),R=t[0].weapons?.length&&rp(t),A=t[3],M=[];for(let e=0;e<A.length;e+=1)M[e]=lp(Lf(t,A,e));const N=t=>z(M[t],1,1,(()=>{M[t]=null}));let B=t[0].techniques?.length&&sp(t);return{c(){e=h("h1"),n=g("Martial Art: "),r=g(S),o=_(),i=h("section"),l=h("h1"),l.textContent="General",s=_(),O&&O.c(),a=_(),c=h("p"),u=g(I),v=_(),R&&R.c(),$=_(),w=h("h1"),w.textContent="Buffs",C=_();for(let t=0;t<M.length;t+=1)M[t].c();k=_(),B&&B.c(),E=y(),x(c,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(i,s),O&&O.m(i,null),d(i,a),d(i,c),d(c,u),f(t,v,p),R&&R.m(t,p),f(t,$,p),f(t,w,p),f(t,C,p);for(let e=0;e<M.length;e+=1)M[e].m(t,p);f(t,k,p),B&&B.m(t,p),f(t,E,p),T=!0},p(t,e){if((!T||1&e[0])&&S!==(S=st(t[0])+"")&&b(r,S),null!=t[0].learn_difficulty||t[0].autolearn?.length||99!==(t[0].arm_block??99)||99!==(t[0].leg_block??99)||t[0].arm_block_with_bio_armor_arms||t[0].leg_block_with_bio_armor_legs||t[2].length?O?(O.p(t,e),1&e[0]&&W(O,1)):(O=Hf(t),O.c(),W(O,1),O.m(i,a)):O&&(H(),z(O,1,1,(()=>{O=null})),G()),(!T||1&e[0])&&I!==(I=t[0].description+"")&&b(u,I),t[0].weapons?.length?R?(R.p(t,e),1&e[0]&&W(R,1)):(R=rp(t),R.c(),W(R,1),R.m($.parentNode,$)):R&&(H(),z(R,1,1,(()=>{R=null})),G()),24&e[0]){let n;for(A=t[3],n=0;n<A.length;n+=1){const r=Lf(t,A,n);M[n]?(M[n].p(r,e),W(M[n],1)):(M[n]=lp(r),M[n].c(),W(M[n],1),M[n].m(k.parentNode,k))}for(H(),n=A.length;n<M.length;n+=1)N(n);G()}t[0].techniques?.length?B?(B.p(t,e),1&e[0]&&W(B,1)):(B=sp(t),B.c(),W(B,1),B.m(E.parentNode,E)):B&&(H(),z(B,1,1,(()=>{B=null})),G())},i(t){if(!T){W(O),W(R);for(let t=0;t<A.length;t+=1)W(M[t]);W(B),T=!0}},o(t){z(O),z(R),M=M.filter(Boolean);for(let t=0;t<M.length;t+=1)z(M[t]);z(B),T=!1},d(t){t&&p(e),t&&p(o),t&&p(i),O&&O.d(),t&&p(v),R&&R.d(t),t&&p($),t&&p(w),t&&p(C),m(M,t),t&&p(k),B&&B.d(t),t&&p(E)}}}function up(t){return t<=2?"easy":t<=4?"moderately hard":t<=6?"hard":t<=8?"very hard":"extremely hard"}function dp(t,e,n){var r,o,i,l,s,a,c,u,d,f,p;const m=I("data");let{item:h}=e;const g=m.byType("item").filter((t=>"BOOK"===t.type&&t.martial_art===h.id)),_=[["Passive",null!==(r=h.static_buffs)&&void 0!==r?r:[]],["Move",null!==(o=h.onmove_buffs)&&void 0!==o?o:[]],["Pause",null!==(i=h.onpause_buffs)&&void 0!==i?i:[]],["Hit",null!==(l=h.onhit_buffs)&&void 0!==l?l:[]],["Miss",null!==(s=h.onmiss_buffs)&&void 0!==s?s:[]],["Attack",null!==(a=h.onattack_buffs)&&void 0!==a?a:[]],["Crit",null!==(c=h.oncrit_buffs)&&void 0!==c?c:[]],["Kill",null!==(u=h.onkill_buffs)&&void 0!==u?u:[]],["Dodge",null!==(d=h.ondodge_buffs)&&void 0!==d?d:[]],["Block",null!==(f=h.onblock_buffs)&&void 0!==f?f:[]],["Get hit",null!==(p=h.ongethit_buffs)&&void 0!==p?p:[]]],y=new Map(_.flatMap((t=>t[1])).map((t=>[t.id,t])));return t.$$set=t=>{"item"in t&&n(0,h=t.item)},[h,m,g,_,y,(t,e)=>st(m.byId("item",t)).localeCompare(st(m.byId("item",e)))]}class fp extends tt{constructor(t){super(),Q(this,t,dp,cp,i,{item:0},[-1,-1])}}function pp(t){let e;const n=t[5].default,r=a(n,t,t[4],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&16&e&&u(r,n,t,t[4],e,null,null)},i(t){e||(W(r,t),e=!0)},o(t){z(r,t),e=!1},d(t){r&&r.d(t)}}}function mp(e){let n,r,o,i,l,s,a=e[1].message+"",c=(e[2]?e[1].stack:"")+"";return{c(){n=h("div"),r=h("b"),o=g(a),i=_(),l=h("pre"),s=g(c),$(l,"class","trace svelte-1nrekyi"),$(n,"class","error svelte-1nrekyi")},m(t,e){f(t,n,e),d(n,r),d(r,o),d(n,i),d(n,l),d(l,s)},p(t,e){2&e&&a!==(a=t[1].message+"")&&b(o,a),2&e&&c!==(c=(t[2]?t[1].stack:"")+"")&&b(s,c)},i:t,o:t,d(t){t&&p(n)}}}function hp(t){let e,n,r,o;const i=[mp,pp],l=[];function s(t,e){return t[1]?0:1}return e=s(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,[o]){let a=e;e=s(t),e===a?l[e].p(t,o):(H(),z(l[a],1,1,(()=>{l[a]=null})),G(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function gp(e,n,r){let o,i=t,s=()=>(i(),i=l(u,(t=>r(1,o=t))),u);e.$$.on_destroy.push((()=>i()));let{$$slots:a={},$$scope:c}=n,{error:u=null}=n;s();let{onError:d=null}=n,f="production"!==("undefined"!=typeof process&&process.env&&process.env.NODE_ENV);return e.$$set=t=>{"error"in t&&s(r(0,u=t.error)),"onError"in t&&r(3,d=t.onError),"$$scope"in t&&r(4,c=t.$$scope)},e.$$.update=()=>{10&e.$$.dirty&&o&&d&&d(o)},[u,o,f,d,c,a]}var _p=Object.freeze({__proto__:null,default:class extends tt{constructor(t){super(),Q(this,t,gp,hp,i,{error:0,onError:3})}}});const yp=["c","l","h","m","p","a","i","o","d"];var vp=Object.freeze({__proto__:null,createBoundary:function(t){if(t.$$render){let e=t.$$render;return t.$$render=(t,n,r,o)=>{const i=nt(void 0);try{return e(t,{error:i,...n},r,o)}catch(o){return i.set(o),e(t,{error:i,...n},r,{})}},t}function e(t,e){return function(...n){try{return t(...n)}catch(t){e(t)}}}return class extends t{constructor(t){const n=nt(void 0);t.props.$$slots.default=t.props.$$slots.default.map((t=>(...r)=>{let o=e(t,n.set)(...r);if(o)for(let t of yp)o[t]&&(o[t]=e(o[t],n.set));return o})),super(t),this.$$set({error:n})}}}}),$p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function bp(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var wp=bp(_p),xp=bp(vp);const{default:Cp}=wp,{createBoundary:kp}=xp,Ep=kp(Cp);Ep.default=Ep;var Tp=Ep;function Sp(t,e,n){const r=t.slice();return r[4]=e[n],r}function Ip(t,e,n){const r=t.slice();return r[4]=e[n],r}function Op(t,e,n){const r=t.slice();return r[9]=e[n],r}function Rp(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ap(t,e,n){const r=t.slice();return r[9]=e[n],r}function Mp(t,e,n){const r=t.slice();return r[16]=e[n],r}function Np(t,e,n){const r=t.slice();return r[16]=e[n],r}function Bp(t,e,n){const r=t.slice();return r[16]=e[n],r}function Dp(t,e,n){const r=t.slice();return r[23]=e[n],r}function qp(t,e,n){const r=t.slice();return r[26]=e[n],r}function Lp(t){let e;return{c(){e=g("Threshold ")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function jp(t){let e,n,r,o,i,l=t[0].category,s=[];for(let e=0;e<l.length;e+=1)s[e]=Pp(qp(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Category",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=t[0].category,n=0;n<l.length;n+=1){const o=qp(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Pp(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Pp(t){let e,n,r;return n=new Nt({props:{type:"mutation_category",id:t[26]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[26]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Fp(t){let e;return{c(){e=g("s")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Up(e){let n;return{c(){n=h("em"),n.textContent="None"},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Hp(t){let e,n,r=t[0].types,o=[];for(let e=0;e<r.length;e+=1)o[e]=Gp(Dp(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){e=h("ul");for(let t=0;t<o.length;t+=1)o[t].c();$(e,"class","comma-separated")},m(t,r){f(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){if(1&n){let l;for(r=t[0].types,l=0;l<r.length;l+=1){const i=Dp(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=Gp(i),o[l].c(),W(o[l],1),o[l].m(e,null))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){t&&p(e),m(o,t)}}}function Gp(t){let e,n,r;return n=new Nt({props:{type:"mutation_type",id:t[23]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[23]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Wp(e){let n;return{c(){n=h("em"),n.textContent="None"},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function zp(t){let e,n,r,o,i,l=t[0].prereqs,s=[];for(let e=0;e<l.length;e+=1)s[e]=Yp(Bp(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));let c=t[0].prereqs2&&Vp(t);return{c(){e=h("ul"),n=h("li"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),c&&c.c(),$(r,"class","comma-separated or")},m(t,l){f(t,e,l),d(e,n),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(e,o),c&&c.m(e,null),i=!0},p(t,n){if(1&n){let e;for(l=t[0].prereqs,e=0;e<l.length;e+=1){const o=Bp(t,l,e);s[e]?(s[e].p(o,n),W(s[e],1)):(s[e]=Yp(o),s[e].c(),W(s[e],1),s[e].m(r,null))}for(H(),e=l.length;e<s.length;e+=1)a(e);G()}t[0].prereqs2?c?(c.p(t,n),1&n&&W(c,1)):(c=Vp(t),c.c(),W(c,1),c.m(e,null)):c&&(H(),z(c,1,1,(()=>{c=null})),G())},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);W(c),i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);z(c),i=!1},d(t){t&&p(e),m(s,t),c&&c.d()}}}function Yp(t){let e,n,r;return n=new Nt({props:{type:"mutation",id:t[16]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[16]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Vp(t){let e,n,r,o=t[0].prereqs2,i=[];for(let e=0;e<o.length;e+=1)i[e]=Jp(Np(t,o,e));const l=t=>z(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("li"),n=h("ul");for(let t=0;t<i.length;t+=1)i[t].c();$(n,"class","comma-separated or")},m(t,o){f(t,e,o),d(e,n);for(let t=0;t<i.length;t+=1)i[t].m(n,null);r=!0},p(t,e){if(1&e){let r;for(o=t[0].prereqs2,r=0;r<o.length;r+=1){const l=Np(t,o,r);i[r]?(i[r].p(l,e),W(i[r],1)):(i[r]=Jp(l),i[r].c(),W(i[r],1),i[r].m(n,null))}for(H(),r=o.length;r<i.length;r+=1)l(r);G()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)W(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)z(i[t]);r=!1},d(t){t&&p(e),m(i,t)}}}function Jp(t){let e,n,r;return n=new Nt({props:{type:"mutation",id:t[16]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[16]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Kp(t){let e,n,r,o,i,l=t[0].threshreq,s=[];for(let e=0;e<l.length;e+=1)s[e]=Xp(Mp(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Threshold Requirement",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated or")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=t[0].threshreq,n=0;n<l.length;n+=1){const o=Mp(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Xp(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Xp(t){let e,n,r;return n=new Nt({props:{type:"mutation",id:t[16]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[16]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Zp(t){let e,n,r,o,i,l=t[0].leads_to,s=[];for(let e=0;e<l.length;e+=1)s[e]=Qp(Ap(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Leads To",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=t[0].leads_to,n=0;n<l.length;n+=1){const o=Ap(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Qp(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function Qp(t){let e,n,r;return n=new Nt({props:{id:t[9],type:"mutation"}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[9]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function tm(t){let e,n,r,o,i,l=t[0].changes_to,s=[];for(let e=0;e<l.length;e+=1)s[e]=em(Rp(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Changes To",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=t[0].changes_to,n=0;n<l.length;n+=1){const o=Rp(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=em(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function em(t){let e,n,r;return n=new Nt({props:{id:t[9],type:"mutation"}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[9]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function nm(t){let e,n,r,o,i=t[0].cancels,l=[];for(let e=0;e<i.length;e+=1)l[e]=rm(Op(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Conflicts With",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c();$(r,"class","comma-separated")},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(1&e){let n;for(i=t[0].cancels,n=0;n<i.length;n+=1){const o=Op(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=rm(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}function rm(t){let e,n,r;return n=new Nt({props:{id:t[9],type:"mutation"}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.id=t[9]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function om(t){let e,n,r,o,i,l=t[1],s=[];for(let e=0;e<l.length;e+=1)s[e]=im(Ip(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Post-Threshold Mutations",r=_(),o=h("ul");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(2&e){let n;for(l=t[1],n=0;n<l.length;n+=1){const r=Ip(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=im(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),m(s,t)}}}function im(e){let n,r,o;return r=new Nt({props:{id:e[4].id,type:"mutation"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function lm(e){let n,r,o;return r=new Nt({props:{id:e[4].id,type:"mutation"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function sm(t){let e,n,r,o,i,l,s,a,c,u,v,w,C,k,E,T,S,I,O,R,A,M,N,B,D,q,L,j,P,F,U,Y=st(t[0])+"",V=t[0].points+"",J=it(t[0].description)+"",K=t[0].threshold&&Lp(),X=t[0].category&&jp(t),Z=t[0].types?.length>1&&Fp();const Q=[Hp,Up],tt=[];function et(t,e){return t[0].types?0:1}k=et(t),E=tt[k]=Q[k](t);const nt=[zp,Wp],rt=[];function ot(t,e){return t[0].prereqs?0:1}O=ot(t),R=rt[O]=nt[O](t);let lt=t[0].threshreq&&Kp(t),at=t[0].leads_to&&Zp(t),ct=t[0].changes_to&&tm(t),ut=t[0].cancels&&nm(t),dt=t[0].threshold&&t[1].length&&om(t),ft=t[2].length&&function(t){let e,n,r,o,i,l=t[2],s=[];for(let e=0;e<l.length;e+=1)s[e]=lm(Sp(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("section"),n=h("h1"),n.textContent="Required By",r=_(),o=h("ul");for(let t=0;t<s.length;t+=1)s[t].c()},m(t,l){f(t,e,l),d(e,n),d(e,r),d(e,o);for(let t=0;t<s.length;t+=1)s[t].m(o,null);i=!0},p(t,e){if(4&e){let n;for(l=t[2],n=0;n<l.length;n+=1){const r=Sp(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=lm(r),s[n].c(),W(s[n],1),s[n].m(o,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),m(s,t)}}}(t);return{c(){e=h("h1"),K&&K.c(),n=g("Mutation: "),r=g(Y),o=_(),i=h("section"),l=h("dl"),s=h("dt"),s.textContent="Points",a=h("dd"),c=g(V),X&&X.c(),u=h("dt"),v=g("Type"),Z&&Z.c(),w=_(),C=h("dd"),E.c(),T=_(),S=h("dt"),S.textContent="Prerequisites",I=h("dd"),R.c(),A=_(),lt&&lt.c(),M=y(),at&&at.c(),N=y(),ct&&ct.c(),B=y(),ut&&ut.c(),D=_(),q=h("p"),L=g(J),j=_(),dt&&dt.c(),P=_(),ft&&ft.c(),F=y(),$(u,"title","You can't have two mutations that share a type."),x(q,"color","var(--cata-color-gray)")},m(t,p){f(t,e,p),K&&K.m(e,null),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(l,s),d(l,a),d(a,c),X&&X.m(l,null),d(l,u),d(u,v),Z&&Z.m(u,null),d(u,w),d(l,C),tt[k].m(C,null),d(C,T),d(l,S),d(l,I),rt[O].m(I,null),d(I,A),lt&&lt.m(l,null),d(l,M),at&&at.m(l,null),d(l,N),ct&&ct.m(l,null),d(l,B),ut&&ut.m(l,null),d(i,D),d(i,q),d(q,L),f(t,j,p),dt&&dt.m(t,p),f(t,P,p),ft&&ft.m(t,p),f(t,F,p),U=!0},p(t,[o]){t[0].threshold?K||(K=Lp(),K.c(),K.m(e,n)):K&&(K.d(1),K=null),(!U||1&o)&&Y!==(Y=st(t[0])+"")&&b(r,Y),(!U||1&o)&&V!==(V=t[0].points+"")&&b(c,V),t[0].category?X?(X.p(t,o),1&o&&W(X,1)):(X=jp(t),X.c(),W(X,1),X.m(l,u)):X&&(H(),z(X,1,1,(()=>{X=null})),G()),t[0].types?.length>1?Z||(Z=Fp(),Z.c(),Z.m(u,w)):Z&&(Z.d(1),Z=null);let i=k;k=et(t),k===i?tt[k].p(t,o):(H(),z(tt[i],1,1,(()=>{tt[i]=null})),G(),E=tt[k],E?E.p(t,o):(E=tt[k]=Q[k](t),E.c()),W(E,1),E.m(C,T));let s=O;O=ot(t),O===s?rt[O].p(t,o):(H(),z(rt[s],1,1,(()=>{rt[s]=null})),G(),R=rt[O],R?R.p(t,o):(R=rt[O]=nt[O](t),R.c()),W(R,1),R.m(I,A)),t[0].threshreq?lt?(lt.p(t,o),1&o&&W(lt,1)):(lt=Kp(t),lt.c(),W(lt,1),lt.m(l,M)):lt&&(H(),z(lt,1,1,(()=>{lt=null})),G()),t[0].leads_to?at?(at.p(t,o),1&o&&W(at,1)):(at=Zp(t),at.c(),W(at,1),at.m(l,N)):at&&(H(),z(at,1,1,(()=>{at=null})),G()),t[0].changes_to?ct?(ct.p(t,o),1&o&&W(ct,1)):(ct=tm(t),ct.c(),W(ct,1),ct.m(l,B)):ct&&(H(),z(ct,1,1,(()=>{ct=null})),G()),t[0].cancels?ut?(ut.p(t,o),1&o&&W(ut,1)):(ut=nm(t),ut.c(),W(ut,1),ut.m(l,null)):ut&&(H(),z(ut,1,1,(()=>{ut=null})),G()),(!U||1&o)&&J!==(J=it(t[0].description)+"")&&b(L,J),t[0].threshold&&t[1].length?dt?(dt.p(t,o),1&o&&W(dt,1)):(dt=om(t),dt.c(),W(dt,1),dt.m(P.parentNode,P)):dt&&(H(),z(dt,1,1,(()=>{dt=null})),G()),t[2].length&&ft.p(t,o)},i(t){U||(W(X),W(E),W(R),W(lt),W(at),W(ct),W(ut),W(dt),W(ft),U=!0)},o(t){z(X),z(E),z(R),z(lt),z(at),z(ct),z(ut),z(dt),z(ft),U=!1},d(t){t&&p(e),K&&K.d(),t&&p(o),t&&p(i),X&&X.d(),Z&&Z.d(),tt[k].d(),rt[O].d(),lt&&lt.d(),at&&at.d(),ct&&ct.d(),ut&&ut.d(),t&&p(j),dt&&dt.d(t),t&&p(P),ft&&ft.d(t),t&&p(F)}}}function am(t,e,n){let{item:r}=e,o=I("data");const i=o.byType("mutation").filter((t=>{var e;return(null!==(e=t.threshreq)&&void 0!==e?e:[]).includes(r.id)})).sort(((t,e)=>st(t).localeCompare(st(e)))),l=o.byType("mutation").filter((t=>{var e,n;return(null!==(e=t.prereqs)&&void 0!==e?e:[]).includes(r.id)||(null!==(n=t.prereqs2)&&void 0!==n?n:[]).includes(r.id)})).sort(((t,e)=>st(t).localeCompare(st(e))));return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,i,l]}class cm extends tt{constructor(t){super(),Q(this,t,am,sm,i,{item:0})}}function um(t,e){const n=[];let r=!0;const o=new Set(t),i=new Set;for(;o.size;){if(l(o.values().next().value),!r)throw new Error("Not a DAG")}return n;function l(t){if(o.has(t))if(i.has(t))r=!1;else{i.add(t);for(const n of e(t))l(n);i.delete(t),o.delete(t),n.push(t)}}}function dm(t,e,n){const r=t.slice();return r[7]=e[n],r}function fm(t,e,n){const r=t.slice();return r[7]=e[n],r}function pm(t){let e,n,r,o=st(t[0])+"";return{c(){e=h("h1"),n=g("Mutation Category: "),r=g(o)},m(t,o){f(t,e,o),d(e,n),d(e,r)},p(t,e){1&e&&o!==(o=st(t[0])+"")&&b(r,o)},d(t){t&&p(e)}}}function mm(t){let e,n,r=st(t[0])+"";return{c(){e=h("h1"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=st(t[0])+"")&&b(n,r)},d(t){t&&p(e)}}}function hm(t){let e,n,r,o;return r=new Nt({props:{id:t[0].threshold_mut,type:"mutation"}}),{c(){e=h("dt"),e.textContent="Threshold Mutation",n=h("dd"),J(r.$$.fragment)},m(t,i){f(t,e,i),f(t,n,i),K(r,n,null),o=!0},p(t,e){const n={};1&e&&(n.id=t[0].threshold_mut),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(e),t&&p(n),X(r)}}}function gm(e){let n,r,o;return r=new Nt({props:{id:e[7].id,type:"mutation"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function _m(e){let n,r,o;return r=new Nt({props:{id:e[7].id,type:"mutation"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function ym(t){let e,n,r,o,i,l,s,a=!t[1]&&pm(t),c=t[1]&&mm(t),u=t[0].threshold_mut&&hm(t),g=t[2].length&&function(t){let e,n,r,o,i,l=t[2],s=[];for(let e=0;e<l.length;e+=1)s[e]=gm(fm(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Pre-Threshold Mutations",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(4&e){let n;for(l=t[2],n=0;n<l.length;n+=1){const o=fm(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=gm(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),v=t[3].length&&function(t){let e,n,r,o,i=t[3],l=[];for(let e=0;e<i.length;e+=1)l[e]=_m(dm(t,i,e));const s=t=>z(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("dt"),e.textContent="Post-Threshold Mutations",n=h("dd"),r=h("ul");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,i){f(t,e,i),f(t,n,i),d(n,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);o=!0},p(t,e){if(8&e){let n;for(i=t[3],n=0;n<i.length;n+=1){const o=dm(t,i,n);l[n]?(l[n].p(o,e),W(l[n],1)):(l[n]=_m(o),l[n].c(),W(l[n],1),l[n].m(r,null))}for(H(),n=i.length;n<l.length;n+=1)s(n);G()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)W(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)z(l[t]);o=!1},d(t){t&&p(e),t&&p(n),m(l,t)}}}(t);return{c(){a&&a.c(),e=_(),n=h("section"),c&&c.c(),r=_(),o=h("dl"),u&&u.c(),i=y(),g&&g.c(),l=y(),v&&v.c()},m(t,p){a&&a.m(t,p),f(t,e,p),f(t,n,p),c&&c.m(n,null),d(n,r),d(n,o),u&&u.m(o,null),d(o,i),g&&g.m(o,null),d(o,l),v&&v.m(o,null),s=!0},p(t,[l]){t[1]?a&&(a.d(1),a=null):a?a.p(t,l):(a=pm(t),a.c(),a.m(e.parentNode,e)),t[1]?c?c.p(t,l):(c=mm(t),c.c(),c.m(n,r)):c&&(c.d(1),c=null),t[0].threshold_mut?u?(u.p(t,l),1&l&&W(u,1)):(u=hm(t),u.c(),W(u,1),u.m(o,i)):u&&(H(),z(u,1,1,(()=>{u=null})),G()),t[2].length&&g.p(t,l),t[3].length&&v.p(t,l)},i(t){s||(W(u),W(g),W(v),s=!0)},o(t){z(u),z(g),z(v),s=!1},d(t){a&&a.d(t),t&&p(e),t&&p(n),c&&c.d(),u&&u.d(),g&&g.d(),v&&v.d()}}}function vm(t,e,n){let r=I("data"),{item:o}=e,{inCatalog:i=!1}=e;const l=r.byType("mutation").filter((t=>{var e;return(null!==(e=t.category)&&void 0!==e?e:[]).includes(o.id)}));l.sort(((t,e)=>st(t).localeCompare(st(e))));const s=t=>{var e,n,r;return(null!==(e=t.prereqs)&&void 0!==e?e:[]).concat(null!==(n=t.prereqs2)&&void 0!==n?n:[]).concat(null!==(r=t.threshreq)&&void 0!==r?r:[])},a=um(l.filter((t=>!t.threshreq||0===t.threshreq.length)),(t=>s(t).map((t=>r.byId("mutation",t))))),c=um(l.filter((t=>!(!t.threshreq||0===t.threshreq.length))),(t=>s(t).map((t=>r.byId("mutation",t)))));return t.$$set=t=>{"item"in t&&n(0,o=t.item),"inCatalog"in t&&n(1,i=t.inCatalog)},[o,i,a,c]}class $m extends tt{constructor(t){super(),Q(this,t,vm,ym,i,{item:0,inCatalog:1})}}function bm(t,e,n){const r=t.slice();return r[4]=e[n],r}function wm(e){let n,r,o;return r=new Nt({props:{id:e[4].id,type:"mutation"}}),{c(){n=h("li"),J(r.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),o=!0},p:t,i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){z(r.$$.fragment,t),o=!1},d(t){t&&p(n),X(r)}}}function xm(t){let e,n,r,o,i,l,s,a,c,u,y=st(t[0])+"",v=t[1],$=[];for(let e=0;e<v.length;e+=1)$[e]=wm(bm(t,v,e));const w=t=>z($[t],1,1,(()=>{$[t]=null}));return{c(){e=h("h1"),n=g("Mutation Type: "),r=g(y),o=_(),i=h("section"),l=h("dl"),s=h("dt"),s.textContent="Mutations",a=h("dd"),c=h("ul");for(let t=0;t<$.length;t+=1)$[t].c()},m(t,p){f(t,e,p),d(e,n),d(e,r),f(t,o,p),f(t,i,p),d(i,l),d(l,s),d(l,a),d(a,c);for(let t=0;t<$.length;t+=1)$[t].m(c,null);u=!0},p(t,[e]){if((!u||1&e)&&y!==(y=st(t[0])+"")&&b(r,y),2&e){let n;for(v=t[1],n=0;n<v.length;n+=1){const r=bm(t,v,n);$[n]?($[n].p(r,e),W($[n],1)):($[n]=wm(r),$[n].c(),W($[n],1),$[n].m(c,null))}for(H(),n=v.length;n<$.length;n+=1)w(n);G()}},i(t){if(!u){for(let t=0;t<v.length;t+=1)W($[t]);u=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)z($[t]);u=!1},d(t){t&&p(e),t&&p(o),t&&p(i),m($,t)}}}function Cm(t,e,n){let{item:r}=e,o=I("data");const i=um(o.byType("mutation").filter((t=>{var e;return(null!==(e=t.types)&&void 0!==e?e:[]).includes(r.id)})).sort(((t,e)=>st(t).localeCompare(st(e)))),(t=>(t=>{var e,n,r;return(null!==(e=t.prereqs)&&void 0!==e?e:[]).concat(null!==(n=t.prereqs2)&&void 0!==n?n:[]).concat(null!==(r=t.threshreq)&&void 0!==r?r:[])})(t).map((t=>o.byId("mutation",t)))));return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,i]}class km extends tt{constructor(t){super(),Q(this,t,Cm,xm,i,{item:0})}}function Em(t,e,n){const r=t.slice();return r[21]=e[n],r}function Tm(t,e,n){const r=t.slice();return r[24]=e[n],r}function Sm(e){let n;return{c(){n=g(" ")},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Im(e){let n,r,o=e[2](e[24].partId,e[24].variant)+"";return{c(){n=h("span"),r=g(o),$(n,"title",`${e[24].partId}_${e[24].variant}`),$(n,"class",`c_${e[3](e[24].partId)}`)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Om(t){let e;let n=function(t,e){return t[24]?Im:Sm}(t)(t);return{c(){n.c(),e=y()},m(t,r){n.m(t,r),f(t,e,r)},p(t,e){n.p(t,e)},d(t){n.d(t),t&&p(e)}}}function Rm(t){let e,n=t[21],r=[];for(let e=0;e<n.length;e+=1)r[e]=Om(Tm(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=g("\n")},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);f(t,e,n)},p(t,o){if(28&o){let i;for(n=t[21],i=0;i<n.length;i+=1){const l=Tm(t,n,i);r[i]?r[i].p(l,o):(r[i]=Om(l),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){m(r,t),t&&p(e)}}}function Am(t){let e,n,r,o,i,l=t[20]+"";return e=new Nt({props:{id:t[19],type:"vehicle_part"}}),{c(){J(e.$$.fragment),n=g(" ("),r=g(l),o=g(")")},m(t,l){K(e,t,l),f(t,n,l),f(t,r,l),f(t,o,l),i=!0},p(t,n){const o={};524288&n&&(o.id=t[19]),e.$set(o),(!i||1048576&n)&&l!==(l=t[20]+"")&&b(r,l)},i(t){i||(W(e.$$.fragment,t),i=!0)},o(t){z(e.$$.fragment,t),i=!1},d(t){X(e,t),t&&p(n),t&&p(r),t&&p(o)}}}function Mm(t){let e,n,r,o,i,l,s,a=ct(t[0].prob)+"";return e=new Qt({props:{item:t[1].byId("item",t[0].id)}}),r=new Nt({props:{id:t[0].id,type:"item"}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment),o=g("\n      ("),i=g(a),l=g(")")},m(t,a){K(e,t,a),f(t,n,a),K(r,t,a),f(t,o,a),f(t,i,a),f(t,l,a),s=!0},p(t,n){const o={};1&n&&(o.item=t[1].byId("item",t[0].id)),e.$set(o);const l={};1&n&&(l.id=t[0].id),r.$set(l),(!s||1&n)&&a!==(a=ct(t[0].prob)+"")&&b(i,a)},i(t){s||(W(e.$$.fragment,t),W(r.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),s=!1},d(t){X(e,t),t&&p(n),X(r,t),t&&p(o),t&&p(i),t&&p(l)}}}function Nm(t){let e,n,r,o,i,l,s,a,c,u=st(t[0])+"",v=t[4],$=[];for(let e=0;e<v.length;e+=1)$[e]=Rm(Em(t,v,e));let w=t[6].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[6],$$slots:{default:[Am,({item:{id:t,count:e}})=>({19:t,20:e}),({item:t})=>(t?524288:0)|(t?1048576:0)]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Parts",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};135790592&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t),C=t[5].length&&function(t){let e,n,r,o,i;return o=new xe({props:{items:t[5],$$slots:{default:[Mm,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){e=h("section"),n=h("h1"),n.textContent="Items",r=_(),J(o.$$.fragment)},m(t,l){f(t,e,l),d(e,n),d(e,r),K(o,e,null),i=!0},p(t,e){const n={};134217729&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){i||(W(o.$$.fragment,t),i=!0)},o(t){z(o.$$.fragment,t),i=!1},d(t){t&&p(e),X(o)}}}(t);return{c(){e=h("h1"),n=g(u),r=_(),o=h("section"),i=h("pre");for(let t=0;t<$.length;t+=1)$[t].c();l=_(),w&&w.c(),s=_(),C&&C.c(),a=y(),x(i,"font-family","Unifont, monospace"),x(i,"line-height","1")},m(t,u){f(t,e,u),d(e,n),f(t,r,u),f(t,o,u),d(o,i);for(let t=0;t<$.length;t+=1)$[t].m(i,null);f(t,l,u),w&&w.m(t,u),f(t,s,u),C&&C.m(t,u),f(t,a,u),c=!0},p(t,[e]){if((!c||1&e)&&u!==(u=st(t[0])+"")&&b(n,u),28&e){let n;for(v=t[4],n=0;n<v.length;n+=1){const r=Em(t,v,n);$[n]?$[n].p(r,e):($[n]=Rm(r),$[n].c(),$[n].m(i,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=v.length}t[6].length&&w.p(t,e),t[5].length&&C.p(t,e)},i(t){c||(W(w),W(C),c=!0)},o(t){z(w),z(C),c=!1},d(t){t&&p(e),t&&p(r),t&&p(o),m($,t),t&&p(l),w&&w.d(t),t&&p(s),C&&C.d(t),t&&p(a)}}}function Bm(t,e,n){let{item:r}=e;const o=I("data");let i=1/0,l=-1/0,s=1/0,a=-1/0;for(const t of r.parts)t.x<i&&(i=t.x),t.x>l&&(l=t.x),t.y<s&&(s=t.y),t.y>a&&(a=t.y);const c={cover:"^",cross:"c",horizontal:"h",horizontal_2:"=",vertical:"j",vertical_2:"H",ne:"u",nw:"y",se:"n",sw:"b"},u={on_roof:9,on_cargo:8,center:7,under:6,structure:5,engine_block:4,on_battery_mount:3,fuel_source:2,roof:-1,armor:-2},d="â”‚",f="â”€",p="â””",m="â”Œ",h="â”",g="â”˜",_="â”¼",y=r.parts.map((t=>{var e;const n=(t.part?[{part:t.part,fuel:t.fuel}]:null===(e=t.parts)||void 0===e?void 0:e.map((t=>"string"==typeof t?{part:t}:t))).map((({part:t,fuel:e})=>{const[n,r]=$t(o,t);return{partId:n,variant:r,fuel:e}}));return{x:t.x,y:t.y,parts:n}})),v=t=>{var e;const n=o.byId("vehicle_part",t).location;return null!==(e=u[n])&&void 0!==e?e:0},$=[];for(let t=l;t>=i;t--){const e=[];for(let n=s;n<=a;n++){const r=y.filter((e=>e.x===t&&e.y===n)).flatMap((t=>t.parts));if(!r.length){e.push(void 0);continue}let o=r[0],i=v(o.partId);for(const t of r){const e=v(t.partId);e>=0&&e>i&&(i=e,o=t)}e.push(o)}$.push(e)}const b=o.flattenItemGroup(bt(r));b.sort(((t,e)=>e.prob-t.prob));const w=[...Dn(y.flatMap((t=>t.parts)),(t=>[t.partId])).entries()].map((([t,e])=>({id:t,count:e.length})));return w.sort(((t,e)=>t.count===e.count?st(o.byId("vehicle_part",t.id)).localeCompare(st(o.byId("vehicle_part",e.id))):e.count-t.count)),t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o,(t,e)=>{var n,r;const i=o.byId("vehicle_part",t),l=null!==(n=i.symbol)&&void 0!==n?n:"=";return(t=>{switch(t){case"j":return d;case"h":return f;case"c":return _;case"y":return m;case"u":return h;case"n":return g;case"b":return p;default:return t}})(null!==(r={...i.standard_symbols?c:{},...i.symbols}[e])&&void 0!==r?r:l)},t=>o.byId("vehicle_part",t).color,$,b,w]}class Dm extends tt{constructor(t){super(),Q(this,t,Bm,Nm,i,{item:0})}}function qm(t,e,n){const r=t.slice();return r[10]=e[n],r}function Lm(t,e,n){const r=t.slice();return r[13]=e[n],r}function jm(t,e,n){const r=t.slice();return r[16]=e[n],r}function Pm(t,e,n){const r=t.slice();return r[19]=e[n],r}function Fm(t,e,n){const r=t.slice();return r[22]=e[n].id,r[23]=e[n].prob,r}function Um(t,e,n){const r=t.slice();return r[26]=e[n][0],r[27]=e[n][1],r}function Hm(t,e,n){const r=t.slice();return r[22]=e[n].id,r[23]=e[n].prob,r[30]=e[n].count,r}function Gm(t){let e,n,r,o,i,l,s;return r=new Qt({props:{item:t[1].byId("terrain",t[0].transforms_into)}}),i=new Nt({props:{id:t[0].transforms_into,type:"terrain"}}),{c(){e=h("dt"),e.textContent="Transforms Into",n=h("dd"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=_()},m(t,a){f(t,e,a),f(t,n,a),K(r,n,null),d(n,o),K(i,n,null),d(n,l),s=!0},p(t,e){const n={};1&e[0]&&(n.item=t[1].byId("terrain",t[0].transforms_into)),r.$set(n);const o={};1&e[0]&&(o.id=t[0].transforms_into),i.$set(o)},i(t){s||(W(r.$$.fragment,t),W(i.$$.fragment,t),s=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),s=!1},d(t){t&&p(e),t&&p(n),X(r),X(i)}}}function Wm(e){let n,r,o,i,l,s=e[30][0]+"",a=e[30][1]+"";return{c(){n=g("Â ("),r=g(s),o=g("â€“"),i=g(a),l=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e),f(t,l,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),t&&p(i),t&&p(l)}}}function zm(e){let n,r=1!==e[30][0]&&function(e){let n,r,o,i=e[30][0]+"";return{c(){n=g("Â ("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){r&&r.c(),n=y()},m(t,e){r&&r.m(t,e),f(t,n,e)},p(t,e){1!==t[30][0]&&r.p(t,e)},d(t){r&&r.d(t),t&&p(n)}}}function Ym(e){let n,r,o,i,l,s;o=new Nt({props:{type:"item",id:e[22]}});let a=function(t,e){return t[30][0]===t[30][1]?zm:Wm}(e)(e),c=1!==e[23]&&function(e){let n,r,o,i=ct(e[23])+"";return{c(){n=g("Â ("),r=g(i),o=g(")")},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o)}}}(e);return{c(){n=h("li"),r=h("span"),J(o.$$.fragment),i=g(""),a.c(),l=g(""),c&&c.c(),x(r,"white-space","nowrap")},m(t,e){f(t,n,e),d(n,r),K(o,r,null),d(r,i),a.m(r,null),d(r,l),c&&c.m(r,null),s=!0},p(t,e){a.p(t,e),1!==t[23]&&c.p(t,e)},i(t){s||(W(o.$$.fragment,t),s=!0)},o(t){z(o.$$.fragment,t),s=!1},d(t){t&&p(n),X(o),a.d(),c&&c.d()}}}function Vm(t){let e,n,r=t[27].length&&function(t){let e,n,r,o,i,l,s=t[26]+"",a=t[27],c=[];for(let e=0;e<a.length;e+=1)c[e]=Ym(Hm(t,a,e));const u=t=>z(c[t],1,1,(()=>{c[t]=null}));return{c(){e=h("dt"),n=g(s),r=h("dd"),o=h("ul");for(let t=0;t<c.length;t+=1)c[t].c();i=_(),$(o,"class","comma-separated")},m(t,s){f(t,e,s),d(e,n),f(t,r,s),d(r,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null);d(r,i),l=!0},p(t,e){if(4&e[0]){let n;for(a=t[27],n=0;n<a.length;n+=1){const r=Hm(t,a,n);c[n]?(c[n].p(r,e),W(c[n],1)):(c[n]=Ym(r),c[n].c(),W(c[n],1),c[n].m(o,null))}for(H(),n=a.length;n<c.length;n+=1)u(n);G()}},i(t){if(!l){for(let t=0;t<a.length;t+=1)W(c[t]);l=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)z(c[t]);l=!1},d(t){t&&p(e),t&&p(r),m(c,t)}}}(t);return{c(){r&&r.c(),e=y()},m(t,o){r&&r.m(t,o),f(t,e,o),n=!0},p(t,e){t[27].length&&r.p(t,e)},i(t){n||(W(r),n=!0)},o(t){z(r),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Jm(e){let n,r,o,i,l;return r=new Qt({props:{item:e[1].byId("item",e[19].drop)}}),i=new Nt({props:{type:"item",id:e[19].drop}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment)},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),l=!0},p:t,i(t){l||(W(r.$$.fragment,t),W(i.$$.fragment,t),l=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),l=!1},d(t){t&&p(n),X(r),X(i)}}}function Km(t){let e,n,r=t[1].flattenItemGroup(t[1].byId("item_group",t[19].drop)),o=[];for(let e=0;e<r.length;e+=1)o[e]=Xm(Fm(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),n=!0},p(t,n){if(10&n[0]){let l;for(r=t[1].flattenItemGroup(t[1].byId("item_group",t[19].drop)),l=0;l<r.length;l+=1){const i=Fm(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=Xm(i),o[l].c(),W(o[l],1),o[l].m(e.parentNode,e))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e)}}}function Xm(e){let n,r,o,i,l,s,a,c,u=(100*e[23]).toFixed(2)+"";return r=new Qt({props:{item:e[1].byId("item",e[22])}}),i=new Nt({props:{type:"item",id:e[22]}}),{c(){n=h("li"),J(r.$$.fragment),o=_(),J(i.$$.fragment),l=g(" ("),s=g(u),a=g("%)")},m(t,e){f(t,n,e),K(r,n,null),d(n,o),K(i,n,null),d(n,l),d(n,s),d(n,a),c=!0},p:t,i(t){c||(W(r.$$.fragment,t),W(i.$$.fragment,t),c=!0)},o(t){z(r.$$.fragment,t),z(i.$$.fragment,t),c=!1},d(t){t&&p(n),X(r),X(i)}}}function Zm(t){let e,n,r,o;const i=[Km,Jm],l=[];return e=function(t,e){return"bionic_group"===t[19].type?0:1}(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,e){n.p(t,e)},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function Qm(t){let e,n,r=t[16].entries,o=[];for(let e=0;e<r.length;e+=1)o[e]=Zm(Pm(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));return{c(){e=h("ul");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){f(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){if(10&n[0]){let l;for(r=t[16].entries,l=0;l<r.length;l+=1){const i=Pm(t,r,l);o[l]?(o[l].p(i,n),W(o[l],1)):(o[l]=Zm(i),o[l].c(),W(o[l],1),o[l].m(e,null))}for(H(),l=r.length;l<o.length;l+=1)i(l);G()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){t&&p(e),m(o,t)}}}function th(t){let e,n,r,o,i,l=t[13]+"",s=[t[1].byId("harvest",t[3].get(t[13]))],a=[];for(let e=0;e<1;e+=1)a[e]=Qm(jm(t,s,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));return{c(){e=h("dt"),n=g(l),r=h("dd");for(let t=0;t<1;t+=1)a[t].c();o=_(),x(e,"text-transform","capitalize")},m(t,l){f(t,e,l),d(e,n),f(t,r,l);for(let t=0;t<1;t+=1)a[t].m(r,null);d(r,o),i=!0},p(t,e){if(10&e[0]){let n;for(s=[t[1].byId("harvest",t[3].get(t[13]))],n=0;n<1;n+=1){const i=jm(t,s,n);a[n]?(a[n].p(i,e),W(a[n],1)):(a[n]=Qm(i),a[n].c(),W(a[n],1),a[n].m(r,o))}for(H(),n=1;n<1;n+=1)c(n);G()}},i(t){if(!i){for(let t=0;t<1;t+=1)W(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<1;t+=1)z(a[t]);i=!1},d(t){t&&p(e),t&&p(r),m(a,t)}}}function eh(t){let e;return{c(){e=h("li"),e.innerHTML="<em>none</em>"},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function nh(t){let e,n,r;return n=new Nt({props:{type:"json_flag",id:t[10]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e[0]&&(r.id=t[10]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function rh(t){let e,n,r,o,i,l,s,a,c,u,v,w,C,k,E,T,S,I,O,R,A,M,N,B=st(t[0])+"",D=(t[0].move_cost??100)+"",q=(t[0].coverage??0)+"",L=it(t[0].description)+"";n=new Qt({props:{item:t[0]}});let j=t[0].transforms_into&&Gm(t),P=t[2],F=[];for(let e=0;e<P.length;e+=1)F[e]=Vm(Um(t,P,e));const U=t=>z(F[t],1,1,(()=>{F[t]=null}));let Y=t[3].size&&function(t){let e,n,r,o,i,l=["winter","spring","summer","autumn"].filter(t[4]),s=[];for(let e=0;e<l.length;e+=1)s[e]=th(Lm(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Harvest",n=h("dd"),r=h("dl");for(let t=0;t<s.length;t+=1)s[t].c();o=_()},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(10&e[0]){let n;for(l=["winter","spring","summer","autumn"].filter(t[4]),n=0;n<l.length;n+=1){const o=Lm(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=th(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),V=t[0].flags??[],Z=[];for(let e=0;e<V.length;e+=1)Z[e]=nh(qm(t,V,e));const Q=t=>z(Z[t],1,1,(()=>{Z[t]=null}));let tt=null;return V.length||(tt=eh()),{c(){e=h("h1"),J(n.$$.fragment),r=_(),o=g(B),i=_(),l=h("section"),s=h("dl"),a=h("dt"),a.textContent="Move Cost",c=h("dd"),u=g(D),v=h("dt"),v.textContent="Coverage",w=h("dd"),C=g(q),k=g("%"),j&&j.c(),E=y();for(let t=0;t<F.length;t+=1)F[t].c();T=y(),Y&&Y.c(),S=h("dt"),S.textContent="Flags",I=h("dd"),O=h("ul");for(let t=0;t<Z.length;t+=1)Z[t].c();tt&&tt.c(),R=_(),A=h("p"),M=g(L),$(O,"class","comma-separated"),x(A,"color","var(--cata-color-gray)"),x(A,"margin-bottom","0")},m(t,p){f(t,e,p),K(n,e,null),d(e,r),d(e,o),f(t,i,p),f(t,l,p),d(l,s),d(s,a),d(s,c),d(c,u),d(s,v),d(s,w),d(w,C),d(w,k),j&&j.m(s,null),d(s,E);for(let t=0;t<F.length;t+=1)F[t].m(s,null);d(s,T),Y&&Y.m(s,null),d(s,S),d(s,I),d(I,O);for(let t=0;t<Z.length;t+=1)Z[t].m(O,null);tt&&tt.m(O,null),d(l,R),d(l,A),d(A,M),N=!0},p(t,e){const r={};if(1&e[0]&&(r.item=t[0]),n.$set(r),(!N||1&e[0])&&B!==(B=st(t[0])+"")&&b(o,B),(!N||1&e[0])&&D!==(D=(t[0].move_cost??100)+"")&&b(u,D),(!N||1&e[0])&&q!==(q=(t[0].coverage??0)+"")&&b(C,q),t[0].transforms_into?j?(j.p(t,e),1&e[0]&&W(j,1)):(j=Gm(t),j.c(),W(j,1),j.m(s,E)):j&&(H(),z(j,1,1,(()=>{j=null})),G()),4&e[0]){let n;for(P=t[2],n=0;n<P.length;n+=1){const r=Um(t,P,n);F[n]?(F[n].p(r,e),W(F[n],1)):(F[n]=Vm(r),F[n].c(),W(F[n],1),F[n].m(s,T))}for(H(),n=P.length;n<F.length;n+=1)U(n);G()}if(t[3].size&&Y.p(t,e),1&e[0]){let n;for(V=t[0].flags??[],n=0;n<V.length;n+=1){const r=qm(t,V,n);Z[n]?(Z[n].p(r,e),W(Z[n],1)):(Z[n]=nh(r),Z[n].c(),W(Z[n],1),Z[n].m(O,null))}for(H(),n=V.length;n<Z.length;n+=1)Q(n);G(),V.length?tt&&(tt.d(1),tt=null):tt||(tt=eh(),tt.c(),tt.m(O,null))}(!N||1&e[0])&&L!==(L=it(t[0].description)+"")&&b(M,L)},i(t){if(!N){W(n.$$.fragment,t),W(j);for(let t=0;t<P.length;t+=1)W(F[t]);W(Y);for(let t=0;t<V.length;t+=1)W(Z[t]);N=!0}},o(t){z(n.$$.fragment,t),z(j),F=F.filter(Boolean);for(let t=0;t<F.length;t+=1)z(F[t]);z(Y),Z=Z.filter(Boolean);for(let t=0;t<Z.length;t+=1)z(Z[t]);N=!1},d(t){t&&p(e),X(n),t&&p(i),t&&p(l),j&&j.d(),m(F,t),Y&&Y.d(),m(Z,t),tt&&tt.d()}}}function oh(t,e,n){var r,o,i;const l=I("data");let{item:s}=e;const a=[["Deconstruct",(null===(r=s.deconstruct)||void 0===r?void 0:r.items)?l.flattenItemGroup({subtype:"collection",entries:"string"==typeof s.deconstruct.items?[{group:s.deconstruct.items}]:s.deconstruct.items}):[]],["Bash",(null===(o=s.bash)||void 0===o?void 0:o.items)?l.flattenItemGroup({subtype:"collection",entries:"string"==typeof s.bash.items?[{group:s.bash.items}]:s.bash.items}):[]]],c=new Map;for(const{seasons:t,id:e}of null!==(i=s.harvest_by_season)&&void 0!==i?i:[])for(const n of t)c.set(n,e);return t.$$set=t=>{"item"in t&&n(0,s=t.item)},[s,l,a,c,t=>c.has(t)]}class ih extends tt{constructor(t){super(),Q(this,t,oh,rh,i,{item:0},[-1,-1])}}function lh(e){let n;return{c(){n=h("p"),n.textContent="There are no weapons in this category.",x(n,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function sh(t){let e,n;return e=new xe({props:{items:t[1],$$slots:{default:[ah,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};17&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ah(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"item",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function ch(e){let n;return{c(){n=h("p"),n.textContent="There are no martial arts that use this weapon category.",x(n,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function uh(t){let e,n;return e=new xe({props:{items:t[2],$$slots:{default:[dh,({item:t})=>({0:t}),({item:t})=>t?1:0]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};17&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function dh(t){let e,n,r,o;return e=new Qt({props:{item:t[0]}}),r=new Nt({props:{type:"martial_art",id:t[0].id}}),{c(){J(e.$$.fragment),n=_(),J(r.$$.fragment)},m(t,i){K(e,t,i),f(t,n,i),K(r,t,i),o=!0},p(t,n){const o={};1&n&&(o.item=t[0]),e.$set(o);const i={};1&n&&(i.id=t[0].id),r.$set(i)},i(t){o||(W(e.$$.fragment,t),W(r.$$.fragment,t),o=!0)},o(t){z(e.$$.fragment,t),z(r.$$.fragment,t),o=!1},d(t){X(e,t),t&&p(n),X(r,t)}}}function fh(t){let e,n,r,o,i,l,s,a,c,u,m,y,v,$,w,x,C=st(t[0])+"";const k=[sh,lh],E=[];a=function(t,e){return t[1].length?0:1}(t),c=E[a]=k[a](t);const T=[uh,ch],S=[];return $=function(t,e){return t[2].length?0:1}(t),w=S[$]=T[$](t),{c(){e=h("h1"),n=g("Weapon Category: "),r=g(C),o=_(),i=h("section"),l=h("h1"),l.textContent="Weapons",s=_(),c.c(),u=_(),m=h("section"),y=h("h1"),y.textContent="Martial Arts",v=_(),w.c()},m(t,c){f(t,e,c),d(e,n),d(e,r),f(t,o,c),f(t,i,c),d(i,l),d(i,s),E[a].m(i,null),f(t,u,c),f(t,m,c),d(m,y),d(m,v),S[$].m(m,null),x=!0},p(t,[e]){(!x||1&e)&&C!==(C=st(t[0])+"")&&b(r,C),c.p(t,e),w.p(t,e)},i(t){x||(W(c),W(w),x=!0)},o(t){z(c),z(w),x=!1},d(t){t&&p(e),t&&p(o),t&&p(i),E[a].d(),t&&p(u),t&&p(m),S[$].d()}}}function ph(t,e,n){let{item:r}=e;const o=I("data"),i=o.byType("item").filter((t=>t.id)).filter((t=>{var e;return(null!==(e=t.weapon_category)&&void 0!==e?e:[]).some((t=>t===r.id))}));i.sort(((t,e)=>st(t).localeCompare(st(e))));const l=o.byType("martial_art").filter((t=>t.id)).filter((t=>{var e;return null===(e=t.weapon_category)||void 0===e?void 0:e.some((t=>t===r.id))}));return l.sort(((t,e)=>st(t).localeCompare(st(e)))),t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,i,l]}class mh extends tt{constructor(t){super(),Q(this,t,ph,fh,i,{item:0})}}function hh(t,e,n){const r=t.slice();return r[3]=e[n],r}function gh(e){let n,r;return n=new vc({props:{construction:e[3]}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function _h(t){let e,n,r,o,i,l=st(t[0])+"",s=t[1],a=[];for(let e=0;e<s.length;e+=1)a[e]=gh(hh(t,s,e));const c=t=>z(a[t],1,1,(()=>{a[t]=null}));return{c(){e=h("h1"),n=g(l),r=_();for(let t=0;t<a.length;t+=1)a[t].c();o=y()},m(t,l){f(t,e,l),d(e,n),f(t,r,l);for(let e=0;e<a.length;e+=1)a[e].m(t,l);f(t,o,l),i=!0},p(t,[e]){if((!i||1&e)&&l!==(l=st(t[0])+"")&&b(n,l),2&e){let n;for(s=t[1],n=0;n<s.length;n+=1){const r=hh(t,s,n);a[n]?(a[n].p(r,e),W(a[n],1)):(a[n]=gh(r),a[n].c(),W(a[n],1),a[n].m(o.parentNode,o))}for(H(),n=s.length;n<a.length;n+=1)c(n);G()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)W(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)z(a[t]);i=!1},d(t){t&&p(e),t&&p(r),m(a,t),t&&p(o)}}}function yh(t,e,n){let{item:r}=e;const o=I("data").byType("construction").filter((t=>t.group===r.id));return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o]}class vh extends tt{constructor(t){super(),Q(this,t,yh,_h,i,{item:0})}}function $h(t,e,n){const r=t.slice();return r[3]=e[n],r}function bh(t,e,n){const r=t.slice();return r[6]=e[n],r}function wh(t,e,n){const r=t.slice();return r[9]=e[n],r}function xh(t){let e,n,r=t[0].description+"";return{c(){e=h("p"),n=g(r),x(e,"color","var(--cata-color-gray)")},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=t[0].description+"")&&b(n,r)},d(t){t&&p(e)}}}function Ch(t){let e,n,r,o,i,l=[t[0].hidden_by].flat(),s=[];for(let e=0;e<l.length;e+=1)s[e]=kh(wh(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Hidden By",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated and")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(1&e){let n;for(l=[t[0].hidden_by].flat(),n=0;n<l.length;n+=1){const o=wh(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=kh(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}function kh(t){let e,n,r;return n=new Nt({props:{type:t[0].type,id:t[9]}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.type=t[0].type),1&e&&(r.id=t[9]),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Eh(t){let e,n,r;return n=new Nt({props:{type:t[0].type,id:t[6].id}}),{c(){e=h("li"),J(n.$$.fragment)},m(t,o){f(t,e,o),K(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.type=t[0].type),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){t&&p(e),X(n)}}}function Th(t){let e,n,r,o,i,l,s,a,c,u,m,y=t[0].time_constraint.since+"",v=t[0].time_constraint.is+"",$=(t[0].time_constraint.target??"")+"";return{c(){e=h("dt"),e.textContent="Time Constraint",n=h("dd"),r=g("Time since "),o=h("strong"),i=g(y),l=g(" is\n        "),s=h("strong"),a=g(v),c=_(),u=g($),m=_()},m(t,p){f(t,e,p),f(t,n,p),d(n,r),d(n,o),d(o,i),d(n,l),d(n,s),d(s,a),d(s,c),d(s,u),d(n,m)},p(t,e){1&e&&y!==(y=t[0].time_constraint.since+"")&&b(i,y),1&e&&v!==(v=t[0].time_constraint.is+"")&&b(a,v),1&e&&$!==($=(t[0].time_constraint.target??"")+"")&&b(u,$)},d(t){t&&p(e),t&&p(n)}}}function Sh(t){let e,n,r,o,i,l,s,a=lt(t[1].byId("event_statistic",t[3].event_statistic).description)+"",c=t[3].is+"",u=(t[3].target??"")+"";return{c(){e=h("strong"),n=g(a),r=g("\n              is "),o=h("strong"),i=g(c),l=_(),s=g(u)},m(t,a){f(t,e,a),d(e,n),f(t,r,a),f(t,o,a),d(o,i),d(o,l),d(o,s)},p(t,e){1&e&&a!==(a=lt(t[1].byId("event_statistic",t[3].event_statistic).description)+"")&&b(n,a),1&e&&c!==(c=t[3].is+"")&&b(i,c),1&e&&u!==(u=(t[3].target??"")+"")&&b(s,u)},d(t){t&&p(e),t&&p(r),t&&p(o)}}}function Ih(t){let e,n,r=t[3].description+"";return{c(){e=h("strong"),n=g(r)},m(t,r){f(t,e,r),d(e,n)},p(t,e){1&e&&r!==(r=t[3].description+"")&&b(n,r)},d(t){t&&p(e)}}}function Oh(t){let e,n;function r(t,e){return t[3].description?Ih:Sh}let o=r(t),i=o(t);return{c(){e=h("li"),i.c(),n=_()},m(t,r){f(t,e,r),i.m(e,null),d(e,n)},p(t,l){o===(o=r(t))&&i?i.p(t,l):(i.d(1),i=o(t),i&&(i.c(),i.m(e,n)))},d(t){t&&p(e),i.d()}}}function Rh(t){let e,n,r,o,i,l,s,a,c,u,v,w,x,C,k="achievement"===t[0].type?"Achievement":"Conduct",E=st(t[0])+"",T=t[0].description&&xh(t),S=t[0].hidden_by&&Ch(t),I=t[2].length&&function(t){let e,n,r,o,i,l=t[2],s=[];for(let e=0;e<l.length;e+=1)s[e]=Eh(bh(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("dt"),e.textContent="Unlocks",n=h("dd"),r=h("ul");for(let t=0;t<s.length;t+=1)s[t].c();o=_(),$(r,"class","comma-separated and")},m(t,l){f(t,e,l),f(t,n,l),d(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);d(n,o),i=!0},p(t,e){if(5&e){let n;for(l=t[2],n=0;n<l.length;n+=1){const o=bh(t,l,n);s[n]?(s[n].p(o,e),W(s[n],1)):(s[n]=Eh(o),s[n].c(),W(s[n],1),s[n].m(r,null))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(n),m(s,t)}}}(t),O=t[0].time_constraint&&Th(t),R=t[0].requirements,A=[];for(let e=0;e<R.length;e+=1)A[e]=Oh($h(t,R,e));return{c(){e=h("h1"),n=g(k),r=g(": "),o=g(E),i=_(),l=h("section"),T&&T.c(),s=_(),a=h("dl"),S&&S.c(),c=y(),I&&I.c(),u=y(),O&&O.c(),v=h("dt"),v.textContent="Requirements",w=h("dd"),x=h("ul");for(let t=0;t<A.length;t+=1)A[t].c()},m(t,p){f(t,e,p),d(e,n),d(e,r),d(e,o),f(t,i,p),f(t,l,p),T&&T.m(l,null),d(l,s),d(l,a),S&&S.m(a,null),d(a,c),I&&I.m(a,null),d(a,u),O&&O.m(a,null),d(a,v),d(a,w),d(w,x);for(let t=0;t<A.length;t+=1)A[t].m(x,null);C=!0},p(t,[e]){if((!C||1&e)&&k!==(k="achievement"===t[0].type?"Achievement":"Conduct")&&b(n,k),(!C||1&e)&&E!==(E=st(t[0])+"")&&b(o,E),t[0].description?T?T.p(t,e):(T=xh(t),T.c(),T.m(l,s)):T&&(T.d(1),T=null),t[0].hidden_by?S?(S.p(t,e),1&e&&W(S,1)):(S=Ch(t),S.c(),W(S,1),S.m(a,c)):S&&(H(),z(S,1,1,(()=>{S=null})),G()),t[2].length&&I.p(t,e),t[0].time_constraint?O?O.p(t,e):(O=Th(t),O.c(),O.m(a,v)):O&&(O.d(1),O=null),3&e){let n;for(R=t[0].requirements,n=0;n<R.length;n+=1){const r=$h(t,R,n);A[n]?A[n].p(r,e):(A[n]=Oh(r),A[n].c(),A[n].m(x,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=R.length}},i(t){C||(W(S),W(I),C=!0)},o(t){z(S),z(I),C=!1},d(t){t&&p(e),t&&p(i),t&&p(l),T&&T.d(),S&&S.d(),I&&I.d(),O&&O.d(),m(A,t)}}}function Ah(t,e,n){let{item:r}=e;const o=I("data"),i=o.byType("achievement").filter((t=>{var e;return t.id!==r.id&&[null!==(e=t.hidden_by)&&void 0!==e?e:[]].flat().includes(r.id)}));return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r,o,i]}class Mh extends tt{constructor(t){super(),Q(this,t,Ah,Rh,i,{item:0})}}function Nh(e){let n,r,o,i,l,s,a=ot(e[0].type)+"";return{c(){n=h("section"),r=g("âš ï¸ This "),o=g(a),i=g(" is marked as "),l=h("em"),l.textContent="obsolete",s=g(", meaning that it\n  is likely not possible to obtain in this version."),$(n,"class","obsoletion-warning svelte-tb1bo")},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(n,l),d(n,s)},p(t,[e]){1&e&&a!==(a=ot(t[0].type)+"")&&b(o,a)},i:t,o:t,d(t){t&&p(n)}}}function Bh(t,e,n){let{item:r}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class Dh extends tt{constructor(t){super(),Q(this,t,Bh,Nh,i,{item:0})}}function qh(t){let e,n,r,o,i,l,s,a;const c=[Fh,Ph,jh],u=[];function m(t,e){return t[1]?0:globalThis?.process?1:2}return e=m(t),n=u[e]=c[e](t),{c(){n.c(),r=_(),o=h("details"),i=h("summary"),i.textContent="Raw JSON",l=_(),s=h("pre"),s.textContent=`${JSON.stringify(t[3],null,2)}`},m(t,n){u[e].m(t,n),f(t,r,n),f(t,o,n),d(o,i),d(o,l),d(o,s),a=!0},p(t,o){let i=e;e=m(t),e===i?u[e].p(t,o):(H(),z(u[i],1,1,(()=>{u[i]=null})),G(),n=u[e],n?n.p(t,o):(n=u[e]=c[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){a||(W(n),a=!0)},o(t){z(n),a=!1},d(t){u[e].d(t),t&&p(r),t&&p(o)}}}function Lh(e){let n,r,o,i,l=e[0].type+"",s=e[0].id+"";return{c(){n=g("Unknown obj: "),r=g(l),o=g("/"),i=g(s)},m(t,e){f(t,n,e),f(t,r,e),f(t,o,e),f(t,i,e)},p(t,e){1&e&&l!==(l=t[0].type+"")&&b(r,l),1&e&&s!==(s=t[0].id+"")&&b(i,s)},i:t,o:t,d(t){t&&p(n),t&&p(r),t&&p(o),t&&p(i)}}}function jh(t){let e,n;return e=new Tp({props:{onError:t[2],$$slots:{default:[Uh]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Ph(t){let e,n,r;var o=t[4][t[3].type]??aa;function i(t){return{props:{item:t[3]}}}return o&&(e=new o(i(t))),{c(){e&&J(e.$$.fragment),n=y()},m(t,o){e&&K(e,t,o),f(t,n,o),r=!0},p(t,r){if(o!==(o=t[4][t[3].type]??aa)){if(e){H();const t=e;z(t.$$.fragment,1,0,(()=>{X(t,1)})),G()}o?(e=new o(i(t)),J(e.$$.fragment),W(e.$$.fragment,1),K(e,n.parentNode,n)):e=null}},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&z(e.$$.fragment,t),r=!1},d(t){t&&p(n),e&&X(e,t)}}}function Fh(e){let n,r,o,i,l,s,a,c,u,m,y,v,$=e[1].message+"",w=e[1].stack+"";return{c(){n=h("section"),r=h("h1"),r.textContent="Error",o=_(),i=h("p"),i.textContent="There was a problem displaying this page. Not all versions of Cataclysm\n        are supported by the Guide currently. Try selecting a different build.",l=_(),s=h("p"),a=h("details"),c=h("summary"),u=g($),m=_(),y=h("pre"),v=g(w)},m(t,e){f(t,n,e),d(n,r),d(n,o),d(n,i),d(n,l),d(n,s),d(s,a),d(a,c),d(c,u),d(a,m),d(a,y),d(y,v)},p(t,e){2&e&&$!==($=t[1].message+"")&&b(u,$),2&e&&w!==(w=t[1].stack+"")&&b(v,w)},i:t,o:t,d(t){t&&p(n)}}}function Uh(e){let n,r,o,i,l=/obsolet/.test(e[3].__filename),s=l&&function(e){let n,r;return n=new Dh({props:{item:e[3]}}),{c(){J(n.$$.fragment)},m(t,e){K(n,t,e),r=!0},p:t,i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){z(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}(e);var a=e[4][e[3].type]??aa;function c(t){return{props:{item:t[3]}}}return a&&(r=new a(c(e))),{c(){s&&s.c(),n=_(),r&&J(r.$$.fragment),o=y()},m(t,e){s&&s.m(t,e),f(t,n,e),r&&K(r,t,e),f(t,o,e),i=!0},p(t,e){if(l&&s.p(t,e),a!==(a=t[4][t[3].type]??aa)){if(r){H();const t=r;z(t.$$.fragment,1,0,(()=>{X(t,1)})),G()}a?(r=new a(c(t)),J(r.$$.fragment),W(r.$$.fragment,1),K(r,o.parentNode,o)):r=null}},i(t){i||(W(s),r&&W(r.$$.fragment,t),i=!0)},o(t){z(s),r&&z(r.$$.fragment,t),i=!1},d(t){s&&s.d(t),t&&p(n),t&&p(o),r&&X(r,t)}}}function Hh(t){let e,n,r,o;const i=[Lh,qh],l=[];return e=function(t,e){return t[3]?1:0}(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,[e]){n.p(t,e)},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function Gh(t,e,n){var r;let{item:o}=e,{data:i}=e;S("data",i);let l=null;let s=null!==(r=i.byId(o.type,o.id))&&void 0!==r?r:(a=o.id,"json_flag"===(c=o.type)?{id:a,type:c}:null);var a,c;const u={MONSTER:$n,AMMO:ia,GUN:ia,ARMOR:ia,PET_ARMOR:ia,TOOL:ia,TOOLMOD:ia,TOOL_ARMOR:ia,BOOK:ia,COMESTIBLE:ia,ENGINE:ia,WHEEL:ia,GUNMOD:ia,MAGAZINE:ia,BATTERY:ia,GENERIC:ia,BIONIC_ITEM:ia,material:ma,ammunition_type:xa,tool_quality:Ha,furniture:zc,skill:nu,proficiency:cu,json_flag:vu,fault:Yu,vitamin:rd,vehicle_part:Vd,martial_art:fp,mutation:cm,mutation_category:$m,mutation_type:km,vehicle:Dm,terrain:ih,weapon_category:mh,construction_group:vh,achievement:Mh,conduct:Mh};return t.$$set=t=>{"item"in t&&n(0,o=t.item),"data"in t&&n(5,i=t.data)},[o,l,function(t){n(1,l=t)},s,u,i]}class Wh extends tt{constructor(t){super(),Q(this,t,Gh,Hh,i,{item:0,data:5})}}var zh=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t){var e,n;e=$p,n=function(){var t="undefined"==typeof window,e=new Map,n=new Map,r=[];r.total=0;var o=[],i=[];function l(){e.clear(),n.clear(),o=[],i=[]}function s(t){for(var e=-9007199254740991,n=t.length-1;n>=0;--n){var r=t[n];if(null!==r){var o=r.score;o>e&&(e=o)}}return-9007199254740991===e?null:e}function a(t,e){var n=t[e];if(void 0!==n)return n;var r=e;Array.isArray(e)||(r=e.split("."));for(var o=r.length,i=-1;t&&++i<o;)t=t[r[i]];return t}function c(t){return"object"==typeof t}var u=function(){var t=[],e=0,n={};function r(){for(var n=0,r=t[n],o=1;o<e;){var i=o+1;n=o,i<e&&t[i].score<t[o].score&&(n=i),t[n-1>>1]=t[n],o=1+(n<<1)}for(var l=n-1>>1;n>0&&r.score<t[l].score;l=(n=l)-1>>1)t[n]=t[l];t[n]=r}return n.add=function(n){var r=e;t[e++]=n;for(var o=r-1>>1;r>0&&n.score<t[o].score;o=(r=o)-1>>1)t[r]=t[o];t[r]=n},n.poll=function(){if(0!==e){var n=t[0];return t[0]=t[--e],r(),n}},n.peek=function(n){if(0!==e)return t[0]},n.replaceTop=function(e){t[0]=e,r()},n},d=u();return function f(p){var m={single:function(t,e,n){return t?(c(t)||(t=m.getPreparedSearch(t)),e?(c(e)||(e=m.getPrepared(e)),((n&&void 0!==n.allowTypo?n.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?m.algorithm:m.algorithmNoTypo)(t,e,t[0])):null):null},go:function(t,e,n){if(!t)return r;var o=(t=m.prepareSearch(t))[0],i=n&&n.threshold||p&&p.threshold||-9007199254740991,l=n&&n.limit||p&&p.limit||9007199254740991,u=(n&&void 0!==n.allowTypo?n.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?m.algorithm:m.algorithmNoTypo,f=0,h=0,g=e.length;if(n&&n.keys)for(var _=n.scoreFn||s,y=n.keys,v=y.length,$=g-1;$>=0;--$){for(var b=e[$],w=new Array(v),x=v-1;x>=0;--x)(E=a(b,k=y[x]))?(c(E)||(E=m.getPrepared(E)),w[x]=u(t,E,o)):w[x]=null;w.obj=b;var C=_(w);null!==C&&(C<i||(w.score=C,f<l?(d.add(w),++f):(++h,C>d.peek().score&&d.replaceTop(w))))}else if(n&&n.key){var k=n.key;for($=g-1;$>=0;--$)(E=a(b=e[$],k))&&(c(E)||(E=m.getPrepared(E)),null!==(T=u(t,E,o))&&(T.score<i||(T={target:T.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:T.score,indexes:T.indexes,obj:b},f<l?(d.add(T),++f):(++h,T.score>d.peek().score&&d.replaceTop(T)))))}else for($=g-1;$>=0;--$){var E,T;(E=e[$])&&(c(E)||(E=m.getPrepared(E)),null!==(T=u(t,E,o))&&(T.score<i||(f<l?(d.add(T),++f):(++h,T.score>d.peek().score&&d.replaceTop(T)))))}if(0===f)return r;var S=new Array(f);for($=f-1;$>=0;--$)S[$]=d.poll();return S.total=f+h,S},goAsync:function(e,n,o){var i=!1,l=new Promise((function(l,d){if(!e)return l(r);var f=(e=m.prepareSearch(e))[0],h=u(),g=n.length-1,_=o&&o.threshold||p&&p.threshold||-9007199254740991,y=o&&o.limit||p&&p.limit||9007199254740991,v=(o&&void 0!==o.allowTypo?o.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?m.algorithm:m.algorithmNoTypo,$=0,b=0;function w(){if(i)return d("canceled");var u=Date.now();if(o&&o.keys)for(var p=o.scoreFn||s,x=o.keys,C=x.length;g>=0;--g){for(var k=n[g],E=new Array(C),T=C-1;T>=0;--T)(O=a(k,I=x[T]))?(c(O)||(O=m.getPrepared(O)),E[T]=v(e,O,f)):E[T]=null;E.obj=k;var S=p(E);if(null!==S&&!(S<_)&&(E.score=S,$<y?(h.add(E),++$):(++b,S>h.peek().score&&h.replaceTop(E)),g%1e3==0&&Date.now()-u>=10))return void(t?setImmediate(w):setTimeout(w))}else if(o&&o.key){for(var I=o.key;g>=0;--g)if((O=a(k=n[g],I))&&(c(O)||(O=m.getPrepared(O)),null!==(R=v(e,O,f))&&!(R.score<_)&&(R={target:R.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:R.score,indexes:R.indexes,obj:k},$<y?(h.add(R),++$):(++b,R.score>h.peek().score&&h.replaceTop(R)),g%1e3==0&&Date.now()-u>=10)))return void(t?setImmediate(w):setTimeout(w))}else for(;g>=0;--g){var O,R;if((O=n[g])&&(c(O)||(O=m.getPrepared(O)),null!==(R=v(e,O,f))&&!(R.score<_)&&($<y?(h.add(R),++$):(++b,R.score>h.peek().score&&h.replaceTop(R)),g%1e3==0&&Date.now()-u>=10)))return void(t?setImmediate(w):setTimeout(w))}if(0===$)return l(r);for(var A=new Array($),M=$-1;M>=0;--M)A[M]=h.poll();A.total=$+b,l(A)}t?setImmediate(w):w()}));return l.cancel=function(){i=!0},l},highlight:function(t,e,n){if(null===t)return null;void 0===e&&(e="<b>"),void 0===n&&(n="</b>");for(var r="",o=0,i=!1,l=t.target,s=l.length,a=t.indexes,c=0;c<s;++c){var u=l[c];if(a[o]===c){if(i||(i=!0,r+=e),++o===a.length){r+=u+n+l.substr(c+1);break}}else i&&(i=!1,r+=n);r+=u}return r},prepare:function(t){if(t)return{target:t,_targetLowerCodes:m.prepareLowerCodes(t),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(t){if(t)return{target:t,_targetLowerCodes:m.prepareLowerCodes(t),_nextBeginningIndexes:m.prepareNextBeginningIndexes(t),score:null,indexes:null,obj:null}},prepareSearch:function(t){if(t)return m.prepareLowerCodes(t)},getPrepared:function(t){if(t.length>999)return m.prepare(t);var n=e.get(t);return void 0!==n||(n=m.prepare(t),e.set(t,n)),n},getPreparedSearch:function(t){if(t.length>999)return m.prepareSearch(t);var e=n.get(t);return void 0!==e||(e=m.prepareSearch(t),n.set(t,e)),e},algorithm:function(t,e,n){for(var r=e._targetLowerCodes,l=t.length,s=r.length,a=0,c=0,u=0,d=0;;){if(n===r[c]){if(o[d++]=c,++a===l)break;n=t[0===u?a:u===a?a+1:u===a-1?a-1:a]}if(++c>=s)for(;;){if(a<=1)return null;if(0===u){if(n===t[--a])continue;u=a}else{if(1===u)return null;if((n=t[1+(a=--u)])===t[a])continue}c=o[(d=a)-1]+1;break}}a=0;var f=0,p=!1,h=0,g=e._nextBeginningIndexes;null===g&&(g=e._nextBeginningIndexes=m.prepareNextBeginningIndexes(e.target));var _=c=0===o[0]?0:g[o[0]-1];if(c!==s)for(;;)if(c>=s){if(a<=0){if(++f>l-2)break;if(t[f]===t[f+1])continue;c=_;continue}--a,c=g[i[--h]]}else if(t[0===f?a:f===a?a+1:f===a-1?a-1:a]===r[c]){if(i[h++]=c,++a===l){p=!0;break}++c}else c=g[c];if(p)var y=i,v=h;else y=o,v=d;for(var $=0,b=-1,w=0;w<l;++w)b!==(c=y[w])-1&&($-=c),b=c;for(p?0!==f&&($+=-20):($*=1e3,0!==u&&($+=-20)),$-=s-l,e.score=$,e.indexes=new Array(v),w=v-1;w>=0;--w)e.indexes[w]=y[w];return e},algorithmNoTypo:function(t,e,n){for(var r=e._targetLowerCodes,l=t.length,s=r.length,a=0,c=0,u=0;;){if(n===r[c]){if(o[u++]=c,++a===l)break;n=t[a]}if(++c>=s)return null}a=0;var d=!1,f=0,p=e._nextBeginningIndexes;if(null===p&&(p=e._nextBeginningIndexes=m.prepareNextBeginningIndexes(e.target)),(c=0===o[0]?0:p[o[0]-1])!==s)for(;;)if(c>=s){if(a<=0)break;--a,c=p[i[--f]]}else if(t[a]===r[c]){if(i[f++]=c,++a===l){d=!0;break}++c}else c=p[c];if(d)var h=i,g=f;else h=o,g=u;for(var _=0,y=-1,v=0;v<l;++v)y!==(c=h[v])-1&&(_-=c),y=c;for(d||(_*=1e3),_-=s-l,e.score=_,e.indexes=new Array(g),v=g-1;v>=0;--v)e.indexes[v]=h[v];return e},prepareLowerCodes:function(t){for(var e=t.length,n=[],r=t.toLowerCase(),o=0;o<e;++o)n[o]=r.charCodeAt(o);return n},prepareBeginningIndexes:function(t){for(var e=t.length,n=[],r=0,o=!1,i=!1,l=0;l<e;++l){var s=t.charCodeAt(l),a=s>=65&&s<=90,c=a||s>=97&&s<=122||s>=48&&s<=57,u=a&&!o||!i||!c;o=a,i=c,u&&(n[r++]=l)}return n},prepareNextBeginningIndexes:function(t){for(var e=t.length,n=m.prepareBeginningIndexes(t),r=[],o=n[0],i=0,l=0;l<e;++l)o>l?r[l]=o:(o=n[++i],r[l]=void 0===o?e:o);return r},cleanup:l,new:f};return m}()},t.exports?t.exports=n():e.fuzzysort=n()}));function Yh(t,e,n){const r=t.slice();return r[7]=e[n],r}function Vh(t,e,n){const r=t.slice();return r[10]=e[n],r}function Jh(e){let n;return{c(){n=h("pre"),n.textContent="..."},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Kh(t){let e,n,r=[...t[1].keys()],o=[];for(let e=0;e<r.length;e+=1)o[e]=tg(Yh(t,r,e));const i=t=>z(o[t],1,1,(()=>{o[t]=null}));let l=null;return r.length||(l=Xh()),{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=y(),l&&l.c()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);f(t,e,r),l&&l.m(t,r),n=!0},p(t,n){if(3&n){let s;for(r=[...t[1].keys()],s=0;s<r.length;s+=1){const i=Yh(t,r,s);o[s]?(o[s].p(i,n),W(o[s],1)):(o[s]=tg(i),o[s].c(),W(o[s],1),o[s].m(e.parentNode,e))}for(H(),s=r.length;s<o.length;s+=1)i(s);G(),r.length?l&&(l.d(1),l=null):l||(l=Xh(),l.c(),l.m(e.parentNode,e))}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)z(o[t]);n=!1},d(t){m(o,t),t&&p(e),l&&l.d(t)}}}function Xh(t){let e;return{c(){e=h("em"),e.textContent="No results."},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Zh(t){let e;return{c(){e=h("em"),e.textContent="(obsolete)",x(e,"color","var(--cata-color-gray)")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}function Qh(t){let e,n,r,o,i,l,s,a,c=st(t[0]._flatten(t[10]))+"",u=/obsolet/.test(t[10].__filename);n=new Qt({props:{item:t[0]._flatten(t[10])}});let m=u&&Zh();return{c(){e=h("li"),J(n.$$.fragment),r=_(),o=h("a"),i=g(c),s=_(),m&&m.c(),$(o,"href",l="#/"+ot(t[10].type)+"/"+t[10].id)},m(t,l){f(t,e,l),K(n,e,null),d(e,r),d(e,o),d(o,i),d(e,s),m&&m.m(e,null),a=!0},p(t,r){const s={};3&r&&(s.item=t[0]._flatten(t[10])),n.$set(s),(!a||3&r)&&c!==(c=st(t[0]._flatten(t[10]))+"")&&b(i,c),(!a||2&r&&l!==(l="#/"+ot(t[10].type)+"/"+t[10].id))&&$(o,"href",l),2&r&&(u=/obsolet/.test(t[10].__filename)),u?m||(m=Zh(),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i(t){a||(W(n.$$.fragment,t),a=!0)},o(t){z(n.$$.fragment,t),a=!1},d(t){t&&p(e),X(n),m&&m.d()}}}function tg(t){let e,n,r,o,i,l,s=t[7].replace(/_/g," ")+"",a=t[1].get(t[7]),c=[];for(let e=0;e<a.length;e+=1)c[e]=Qh(Vh(t,a,e));const u=t=>z(c[t],1,1,(()=>{c[t]=null}));return{c(){e=h("h1"),n=g(s),r=_(),o=h("ul");for(let t=0;t<c.length;t+=1)c[t].c();i=_()},m(t,s){f(t,e,s),d(e,n),f(t,r,s),f(t,o,s);for(let t=0;t<c.length;t+=1)c[t].m(o,null);d(o,i),l=!0},p(t,e){if((!l||2&e)&&s!==(s=t[7].replace(/_/g," ")+"")&&b(n,s),3&e){let n;for(a=t[1].get(t[7]),n=0;n<a.length;n+=1){const r=Vh(t,a,n);c[n]?(c[n].p(r,e),W(c[n],1)):(c[n]=Qh(r),c[n].c(),W(c[n],1),c[n].m(o,i))}for(H(),n=a.length;n<c.length;n+=1)u(n);G()}},i(t){if(!l){for(let t=0;t<a.length;t+=1)W(c[t]);l=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)z(c[t]);l=!1},d(t){t&&p(e),t&&p(r),t&&p(o),m(c,t)}}}function eg(t){let e,n,r,o;const i=[Kh,Jh],l=[];function s(t,e){return t[1]?0:1}return e=s(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,[o]){let a=e;e=s(t),e===a?l[e].p(t,o):(H(),z(l[a],1,1,(()=>{l[a]=null})),G(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function ng(t,e,n){let r;var o;const i=new Set(["item","monster","furniture","vehicle_part","tool_quality","martial_art","mutation","vehicle","terrain"]);let l,{data:s}=e,{search:a}=e;return t.$$set=t=>{"data"in t&&n(0,s=t.data),"search"in t&&n(2,a=t.search)},t.$$.update=()=>{1&t.$$.dirty&&S("data",s),9&t.$$.dirty&&(l=[...null!==n(3,o=null==s?void 0:s.all())&&void 0!==o?o:[]].filter((t=>"id"in t&&"string"==typeof t.id&&i.has(ot(t.type)))).filter((t=>"mutation"!==t.type||!/Fake\d$/.test(t.id))).map((t=>({id:t.id,name:st(t),type:ot(t.type)})))),5&t.$$.dirty&&n(1,r=a&&a.length>1&&s&&function(t){const e=zh.go(t,l,{limit:100,keys:["id","name"],threshold:-1e4}),n=new Map;for(const{obj:t}of e){const e=t.type;if(!i.has(e))continue;n.has(e)||n.set(e,[]);const r=s.byId(e,t.id);n.get(e).push(r)}return n}(a)),4&t.$$.dirty&&history.replaceState({search:a},"")},[s,r,a,o]}class rg extends tt{constructor(t){super(),Q(this,t,ng,eg,i,{data:0,search:2})}}function og(t,e,n){const r=t.slice();return r[10]=e[n],r}function ig(e){let n,r,o,i,l,s=e[10]&&function(e){let n,r,o=e[10]+"";return{c(){n=h("h1"),r=g(o)},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}(e);return o=new xe({props:{items:e[3].get(e[10]).filter(e[5]),limit:1===e[4].length?1/0:10,$$slots:{default:[ag,({item:t})=>({13:t}),({item:t})=>t?8192:0]},$$scope:{ctx:e}}}),{c(){n=h("section"),s&&s.c(),r=_(),J(o.$$.fragment),i=_()},m(t,e){f(t,n,e),s&&s.m(n,null),d(n,r),K(o,n,null),d(n,i),l=!0},p(t,e){t[10]&&s.p(t,e);const n={};24577&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){l||(W(o.$$.fragment,t),l=!0)},o(t){z(o.$$.fragment,t),l=!1},d(t){t&&p(n),s&&s.d(),X(o)}}}function lg(t){let e,n;return e=new $m({props:{item:t[1].byId("mutation_category",t[10]),inCatalog:!0}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.item=t[1].byId("mutation_category",t[10])),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function sg(t){let e,n;return e=new Qt({props:{item:t[13]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};8192&n&&(r.item=t[13]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ag(t){let e,n,r,o=("item"===t[0]||"terrain"===t[0]||"furniture"===t[0]||"monster"===t[0])&&sg(t);return n=new Nt({props:{type:t[2],id:t[13].id}}),{c(){o&&o.c(),e=_(),J(n.$$.fragment)},m(t,i){o&&o.m(t,i),f(t,e,i),K(n,t,i),r=!0},p(t,r){"item"===t[0]||"terrain"===t[0]||"furniture"===t[0]||"monster"===t[0]?o?(o.p(t,r),1&r&&W(o,1)):(o=sg(t),o.c(),W(o,1),o.m(e.parentNode,e)):o&&(H(),z(o,1,1,(()=>{o=null})),G());const i={};8192&r&&(i.id=t[13].id),n.$set(i)},i(t){r||(W(o),W(n.$$.fragment,t),r=!0)},o(t){z(o),z(n.$$.fragment,t),r=!1},d(t){o&&o.d(t),t&&p(e),X(n,t)}}}function cg(t){let e,n,r,o,i;const l=[lg,ig],s=[];function a(t,n){return 3&n&&(e=!("mutation"!==t[0]||!t[10]||!t[1].byId("mutation_category",t[10]))),e?0:1}return n=a(t,-1),r=s[n]=l[n](t),{c(){r.c(),o=y()},m(t,e){s[n].m(t,e),f(t,o,e),i=!0},p(t,e){let i=n;n=a(t,e),n===i?s[n].p(t,e):(H(),z(s[i],1,1,(()=>{s[i]=null})),G(),r=s[n],r?r.p(t,e):(r=s[n]=l[n](t),r.c()),W(r,1),r.m(o.parentNode,o))},i(t){i||(W(r),i=!0)},o(t){z(r),i=!1},d(t){s[n].d(t),t&&p(o)}}}function ug(t){let e,n,r,o,i,l=t[4],s=[];for(let e=0;e<l.length;e+=1)s[e]=cg(og(t,l,e));const a=t=>z(s[t],1,1,(()=>{s[t]=null}));return{c(){e=h("h1"),n=g(t[0]),r=_();for(let t=0;t<s.length;t+=1)s[t].c();o=y()},m(t,l){f(t,e,l),d(e,n),f(t,r,l);for(let e=0;e<s.length;e+=1)s[e].m(t,l);f(t,o,l),i=!0},p(t,[e]){if((!i||1&e)&&b(n,t[0]),8255&e){let n;for(l=t[4],n=0;n<l.length;n+=1){const r=og(t,l,n);s[n]?(s[n].p(r,e),W(s[n],1)):(s[n]=cg(r),s[n].c(),W(s[n],1),s[n].m(o.parentNode,o))}for(H(),n=l.length;n<s.length;n+=1)a(n);G()}},i(t){if(!i){for(let t=0;t<l.length;t+=1)W(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)z(s[t]);i=!1},d(t){t&&p(e),t&&p(r),m(s,t),t&&p(o)}}}function dg(t,e,n){var r,o;let{type:i}=e,{data:l}=e,s=i;S("data",l);const a=l.byType(i).filter((t=>t.id));a.sort(((t,e)=>st(t).localeCompare(st(e))));const c=Dn(a,null!==(r={monster:t=>{var e;return[null!==(e=t.default_faction)&&void 0!==e?e:""]},item:t=>[t.type],vehicle_part:t=>{var e;return null!==(e=t.categories)&&void 0!==e?e:[""]},mutation:t=>{var e;return null!==(e=t.category)&&void 0!==e?e:[""]}}[i])&&void 0!==r?r:()=>[""]),u=[...c.keys()].sort(),d=null!==(o={mutation:t=>!/Fake\d$/.test(t.id)}[i])&&void 0!==o?o:()=>!0;return t.$$set=t=>{"type"in t&&n(0,i=t.type),"data"in t&&n(1,l=t.data)},[i,l,s,c,u,d]}class fg extends tt{constructor(t){super(),Q(this,t,dg,ug,i,{type:0,data:1})}}const{window:pg}=Y;function mg(t,e,n){const r=t.slice();return r[19]=e[n].name,r[10]=e[n].url,r}function hg(t,e,n){const r=t.slice();return r[22]=e[n],r[24]=n,r}function gg(t,e,n){const r=t.slice();return r[22]=e[n],r}function _g(e){let n,r,o,i,l,s,a,c,u,m,y,v,b,w,C,k=e[5]&&$g(e);return{c(){n=h("img"),o=_(),i=h("p"),i.innerHTML='The <strong>Hitchhiker&#39;s Guide to the Cataclysm</strong> is a guide to the\n      zombie survival roguelike game\n      <a href="https://cataclysmdda.org/">Cataclysm: Dark Days Ahead</a>. You\n      can search for things in the game, like items (e.g. a\n      <a href="#/item/flashlight">flashlight</a>), furniture (e.g. a\n      <a href="#/furniture/f_table">table</a>), or monsters (e.g. a\n      <a href="#/monster/mon_zombie">zombie</a>), and find useful information\n      about them. The data in the Guide comes directly from the JSON files in\n      the game itself.',l=_(),s=h("p"),a=g("The Guide stores all its data locally and is offline-capable, so you can\n      take it with you whereever you go. There's nothing to do to make the Guide\n      work offline, just visit the page and it will work even without internet\n      access, as long as you've visited it once before.\n      "),k&&k.c(),c=_(),u=h("p"),u.textContent="More popular than the Celestial Home Care Omnibus, better selling than\n      Fifty-three More Things to do in Zero Gravity, and more controversial than\n      Oolon Colluphid's trilogy of philosophical blockbusters Where God Went\n      Wrong, Some More of God's Greatest Mistakes and Who is this God Person\n      Anyway?",m=_(),y=h("p"),y.innerHTML='The guide is developed on <a href="https://github.com/nornagon/cdda-guide">GitHub</a>\n      by <a href="https://www.nornagon.net">nornagon</a>. If you notice any\n      problems, please\n      <a href="https://github.com/nornagon/cdda-guide/issues">file an issue</a>!',v=_(),b=h("h2"),b.textContent="Catalogs",w=_(),C=h("ul"),C.innerHTML='<li><a href="#/item">Items</a></li> \n      <li><a href="#/monster">Monsters</a></li> \n      <li><a href="#/furniture">Furniture</a></li> \n      <li><a href="#/terrain">Terrain</a></li> \n      <li><a href="#/vehicle_part">Vehicle Parts</a></li> \n      <li><a href="#/tool_quality">Qualities</a></li> \n      <li><a href="#/mutation">Mutations</a></li> \n      <li><a href="#/json_flag">Flags</a></li> \n      <li><a href="#/achievement">Achievements</a> /\n        <a href="#/conduct">Conducts</a></li>',n.src!==(r="dont_panic.png")&&$(n,"src","dont_panic.png"),$(n,"height","200"),$(n,"width","343"),x(n,"float","right"),$(n,"alt","The words 'Don't Panic' in big friendly letters"),x(u,"font-style","italic"),x(u,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e),f(t,o,e),f(t,i,e),f(t,l,e),f(t,s,e),d(s,a),k&&k.m(s,null),f(t,c,e),f(t,u,e),f(t,m,e),f(t,y,e),f(t,v,e),f(t,b,e),f(t,w,e),f(t,C,e)},p(t,e){t[5]?k?k.p(t,e):(k=$g(t),k.c(),k.m(s,null)):k&&(k.d(1),k=null)},i:t,o:t,d(t){t&&p(n),t&&p(o),t&&p(i),t&&p(l),t&&p(s),k&&k.d(),t&&p(c),t&&p(u),t&&p(m),t&&p(y),t&&p(v),t&&p(b),t&&p(w),t&&p(C)}}}function yg(e){let n,r,o=e[4],l=bg(e);return{c(){l.c(),n=y()},m(t,e){l.m(t,e),f(t,n,e),r=!0},p(e,r){16&r&&i(o,o=e[4])?(H(),z(l,1,1,t),G(),l=bg(e),l.c(),W(l),l.m(n.parentNode,n)):l.p(e,r)},i(t){r||(W(l),r=!0)},o(t){z(l),r=!1},d(t){t&&p(n),l.d(t)}}}function vg(t){let e,n,r,o;const i=[xg,wg],l=[];function s(t,e){return t[1]?0:1}return e=s(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,o){let a=e;e=s(t),e===a?l[e].p(t,o):(H(),z(l[a],1,1,(()=>{l[a]=null})),G(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function $g(e){let n,r,o,i,l;return{c(){n=g("It's also "),r=h("button"),r.textContent="installable",o=g(", so you can pop it out of your browser and use it like a regular app."),$(r,"class","disclosure")},m(t,s){f(t,n,s),f(t,r,s),f(t,o,s),i||(l=v(r,"click",e[14]),i=!0)},p:t,d(t){t&&p(n),t&&p(r),t&&p(o),i=!1,l()}}}function bg(t){let e,n;return e=new rg({props:{data:t[1],search:t[4]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.data=t[1]),16&n&&(r.search=t[4]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function wg(e){let n;return{c(){n=h("em"),n.textContent="Loading...",x(n,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function xg(e){let n,r,o=e[2],l=Eg(e);return{c(){l.c(),n=y()},m(t,e){l.m(t,e),f(t,n,e),r=!0},p(e,r){4&r&&i(o,o=e[2])?(H(),z(l,1,1,t),G(),l=Eg(e),l.c(),W(l),l.m(n.parentNode,n)):l.p(e,r)},i(t){r||(W(l),r=!0)},o(t){z(l),r=!1},d(t){t&&p(n),l.d(t)}}}function Cg(t){let e,n;return e=new fg({props:{type:t[2].type,data:t[1]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.type=t[2].type),2&n&&(r.data=t[1]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function kg(t){let e,n;return e=new Wh({props:{item:t[2],data:t[1]}}),{c(){J(e.$$.fragment)},m(t,r){K(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.item=t[2]),2&n&&(r.data=t[1]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Eg(t){let e,n,r,o;const i=[kg,Cg],l=[];function s(t,e){return t[2].id?0:1}return e=s(t),n=l[e]=i[e](t),{c(){n.c(),r=y()},m(t,n){l[e].m(t,n),f(t,r,n),o=!0},p(t,o){let a=e;e=s(t),e===a?l[e].p(t,o):(H(),z(l[a],1,1,(()=>{l[a]=null})),G(),n=l[e],n?n.p(t,o):(n=l[e]=i[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){o||(W(n),o=!0)},o(t){z(n),o=!1},d(t){l[e].d(t),t&&p(r)}}}function Tg(e){let n;return{c(){n=h("em"),n.textContent="(loading...)",x(n,"color","var(--cata-color-gray)")},m(t,e){f(t,n,e)},p:t,d(t){t&&p(n)}}}function Sg(t){let e;function n(t,e){return t[3]?Og:t[1]?Ig:void 0}let r=n(t),o=r&&r(t);return{c(){o&&o.c(),e=y()},m(t,n){o&&o.m(t,n),f(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o&&o.d(1),o=r&&r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o&&o.d(t),t&&p(e)}}}function Ig(t){let e,n,r,o,i=t[1].build_number+"";return{c(){e=h("select"),n=h("option"),r=g(i),n.__value=o=t[1].build_number,n.value=n.__value,e.disabled=!0},m(t,o){f(t,e,o),d(e,n),d(n,r)},p(t,e){2&e&&i!==(i=t[1].build_number+"")&&b(r,i),10&e&&o!==(o=t[1].build_number)&&(n.__value=o,n.value=n.__value)},d(t){t&&p(e)}}}function Og(t){let e,n,r,o,i,l,s=t[3].filter(Dg),a=[];for(let e=0;e<s.length;e+=1)a[e]=Rg(gg(t,s,e));let c=t[3].filter(qg),u=[];for(let e=0;e<c.length;e+=1)u[e]=Ag(hg(t,c,e));return{c(){e=h("select"),n=h("optgroup");for(let t=0;t<a.length;t+=1)a[t].c();r=h("optgroup");for(let t=0;t<u.length;t+=1)u[t].c();$(n,"label","Stable"),$(r,"label","Experimental")},m(o,s){f(o,e,s),d(e,n);for(let t=0;t<a.length;t+=1)a[t].m(n,null);d(e,r);for(let t=0;t<u.length;t+=1)u[t].m(r,null);C(e,t[1]?.build_number??("latest"===t[6]?t[3][0].build_number:t[6])),i||(l=v(e,"change",t[15]),i=!0)},p(t,i){if(8&i){let e;for(s=t[3].filter(Dg),e=0;e<s.length;e+=1){const r=gg(t,s,e);a[e]?a[e].p(r,i):(a[e]=Rg(r),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=s.length}if(8&i){let e;for(c=t[3].filter(qg),e=0;e<c.length;e+=1){const n=hg(t,c,e);u[e]?u[e].p(n,i):(u[e]=Ag(n),u[e].c(),u[e].m(r,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=c.length}10&i&&o!==(o=t[1]?.build_number??("latest"===t[6]?t[3][0].build_number:t[6]))&&C(e,t[1]?.build_number??("latest"===t[6]?t[3][0].build_number:t[6]))},d(t){t&&p(e),m(a,t),m(u,t),i=!1,l()}}}function Rg(t){let e,n,r,o=t[22].build_number+"";return{c(){e=h("option"),n=g(o),e.__value=r=t[22].build_number,e.value=e.__value},m(t,r){f(t,e,r),d(e,n)},p(t,i){8&i&&o!==(o=t[22].build_number+"")&&b(n,o),8&i&&r!==(r=t[22].build_number)&&(e.__value=r,e.value=e.__value)},d(t){t&&p(e)}}}function Ag(t){let e,n,r,o=t[22].build_number+"",i=0===t[24]&&function(t){let e;return{c(){e=g("Â (latest)")},m(t,n){f(t,e,n)},d(t){t&&p(e)}}}();return{c(){e=h("option"),n=g(o),i&&i.c(),e.__value=r=t[22].build_number,e.value=e.__value},m(t,r){f(t,e,r),d(e,n),i&&i.m(e,null)},p(t,i){8&i&&o!==(o=t[22].build_number+"")&&b(n,o),8&i&&r!==(r=t[22].build_number)&&(e.__value=r,e.value=e.__value)},d(t){t&&p(e),i&&i.d()}}}function Mg(e){let n,r,o=e[19]+"";return{c(){n=h("option"),r=g(o),n.__value=e[10],n.value=n.__value},m(t,e){f(t,n,e),d(n,r)},p:t,d(t){t&&p(n)}}}function Ng(t){let e,n,o,i,l,s,a,c,u,y,b,k,E,T,S,I,O,R,A,M,N;const B=[vg,yg,_g],D=[];function q(t,e){return t[2]?0:t[4]?1:2}function L(t,e){return t[1]||t[3]?Sg:Tg}b=q(t),k=D[b]=B[b](t);let j=L(t),P=j(t),F=t[7],U=[];for(let e=0;e<F.length;e+=1)U[e]=Mg(mg(t,F,e));return{c(){e=h("header"),n=h("nav"),o=h("div"),i=h("strong"),l=h("a"),l.textContent="Hitchhiker's Guide to the Cataclysm",s=_(),a=h("div"),c=h("input"),u=_(),y=h("main"),k.c(),E=_(),T=h("p"),S=g("Build:\n    "),P.c(),I=g("\n    Tiles:\n    \n    "),O=h("select"),R=h("option"),R.textContent="None (ASCII)";for(let t=0;t<U.length;t+=1)U[t].c();$(l,"href","#"),$(o,"class","title svelte-16u5hjb"),x(c,"margin","0"),x(c,"width","100%"),$(c,"placeholder","Search..."),$(c,"id","search"),$(a,"class","search svelte-16u5hjb"),$(n,"class","svelte-16u5hjb"),$(e,"class","svelte-16u5hjb"),R.__value="",R.value=R.__value,$(y,"class","svelte-16u5hjb")},m(r,p){f(r,e,p),d(e,n),d(n,o),d(o,i),d(i,l),d(n,s),d(n,a),d(a,c),w(c,t[4]),f(r,u,p),f(r,y,p),D[b].m(y,null),d(y,E),d(y,T),d(T,S),P.m(T,null),d(T,I),d(T,O),d(O,R);for(let t=0;t<U.length;t+=1)U[t].m(O,null);C(O,t[0]),A=!0,M||(N=[v(pg,"hashchange",t[8]),v(pg,"keydown",Bg),v(l,"click",t[12]),v(c,"input",t[13]),v(c,"input",t[9]),v(O,"change",t[16])],M=!0)},p(t,[e]){16&e&&c.value!==t[4]&&w(c,t[4]);let n=b;if(b=q(t),b===n?D[b].p(t,e):(H(),z(D[n],1,1,(()=>{D[n]=null})),G(),k=D[b],k?k.p(t,e):(k=D[b]=B[b](t),k.c()),W(k,1),k.m(y,E)),j===(j=L(t))&&P?P.p(t,e):(P.d(1),P=j(t),P&&(P.c(),P.m(T,I))),128&e){let n;for(F=t[7],n=0;n<F.length;n+=1){const r=mg(t,F,n);U[n]?U[n].p(r,e):(U[n]=Mg(r),U[n].c(),U[n].m(O,null))}for(;n<U.length;n+=1)U[n].d(1);U.length=F.length}(!A||129&e)&&C(O,t[0])},i(t){A||(W(k),A=!0)},o(t){z(k),A=!1},d(t){t&&p(e),t&&p(u),t&&p(y),D[b].d(),P.d(),m(U,t),M=!1,r(N)}}}function Bg(t){"/"===t.key&&"search"!==document.activeElement.id&&(document.getElementById("search").focus(),t.preventDefault())}const Dg=t=>!t.prerelease,qg=t=>t.prerelease;function Lg(t,e,n){let r,o;var i;s(t,kt,(t=>n(1,o=t)));let l=null,a=null;fetch("https://raw.githubusercontent.com/nornagon/cdda-data/main/builds.json").then((t=>t.json())).then((t=>{n(3,a=t)}));const c=new URL(location.href),u=null!==(i=c.searchParams.get("v"))&&void 0!==i?i:"latest";kt.setVersion(u);const d=t=>"null"!==t&&t?t:"";let f=d(localStorage.getItem("cdda-guide:tileset"));function p(){const t=window.location.hash.slice(1);let e;if(e=/^\/([^\/]+)(?:\/(.+))?$/.exec(t)){const[,t,r]=e;"search"===t?(n(2,l=null),n(4,h=decodeURIComponent(null!=r?r:""))):n(2,l=r?{type:t,id:decodeURIComponent(r)}:{type:t,id:""}),window.scrollTo(0,0)}else n(2,l=null),n(4,h="")}var m;m=p,T().$$.on_mount.push(m);let h="";let g;window.addEventListener("beforeinstallprompt",(t=>{n(5,g=t)}));return t.$$.update=()=>{1&t.$$.dirty&&localStorage.setItem("cdda-guide:tileset",d(f)),3&t.$$.dirty&&n(11,r=o?f.replace("{version}",o.build_number):null),2048&t.$$.dirty&&qt.setURL(r)},[f,o,l,a,h,g,u,[{name:"AltiCa",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/Altica"},{name:"BrownLikeBears",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/BrownLikeBears"},{name:"Chibi_Ultica",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/ChibiUltica"},{name:"Cuteclysm(Alpha)",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/Cuteclysm"},{name:"Hollow Moon",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/HollowMoon"},{name:"MSXotto+",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/MshockXotto%2B"},{name:"NeoDays",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/NeoDaysTileset"},{name:"RetroDays",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/RetroDaysTileset"},{name:"UltiCa",url:"https://raw.githubusercontent.com/CleverRaven/Cataclysm-DDA/{version}/gfx/UltimateCataclysm"}],p,()=>{l?history.pushState(null,"",location.href.replace(/#.*$/,"")):history.replaceState(null,"",function(t){const e=new URL(location.href);return e.hash=t,e.toString()}("/search/"+h)),n(2,l=null)},c,r,()=>n(4,h=""),function(){h=this.value,n(4,h)},t=>{t.preventDefault(),g.prompt()},t=>{const e=new URL(location.href),n=t.currentTarget.value;n===a[0].build_number?e.searchParams.delete("v"):e.searchParams.set("v",n),location.href=e.toString()},t=>{n(0,f=t.currentTarget.value)}]}class jg extends tt{constructor(t){super(),Q(this,t,Lg,Ng,i,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Pg=function(t,e){return(Pg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Fg(t,e){function n(){this.constructor=t}Pg(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ug,Hg,Gg,Wg,zg,Yg=function(){return(Yg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Vg(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jg(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function Kg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Jg(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function Xg(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function Zg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Xg(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */!function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"}(Ug||(Ug={})),function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"}(Hg||(Hg={})),function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}(Gg||(Gg={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(Gg||(Gg={})),function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"}(Wg||(Wg={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(Wg||(Wg={})),function(t){t.Explicit="explicitly_set",t.Sampler="client_sampler",t.Rate="client_rate",t.Inheritance="inheritance"}(zg||(zg={}));var Qg=function(){return(Qg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function t_(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function e_(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(t_(arguments[e]));return t}function n_(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return d_(t,Error)}}function r_(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function o_(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function i_(t){return"[object String]"===Object.prototype.toString.call(t)}function l_(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function s_(t){return"[object Object]"===Object.prototype.toString.call(t)}function a_(t){return"undefined"!=typeof Event&&d_(t,Event)}function c_(t){return"undefined"!=typeof Element&&d_(t,Element)}function u_(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function d_(t,e){try{return t instanceof e}catch(t){return!1}}function f_(t,e){try{for(var n=t,r=[],o=0,i=0,l=" > ".length,s=void 0;n&&o++<5&&!("html"===(s=p_(n,e))||o>1&&i+r.length*l+s.length>=80);)r.push(s),i+=s.length,n=n.parentNode;return r.reverse().join(" > ")}catch(t){return"<unknown>"}}function p_(t,e){var n,r,o,i,l,s,a,c=t,u=[];if(!c||!c.tagName)return"";u.push(c.tagName.toLowerCase());var d=(null===(n=e)||void 0===n?void 0:n.length)?e.filter((function(t){return c.getAttribute(t)})).map((function(t){return[t,c.getAttribute(t)]})):null;if(null===(r=d)||void 0===r?void 0:r.length)d.forEach((function(t){u.push("["+t[0]+'="'+t[1]+'"]')}));else if(c.id&&u.push("#"+c.id),(o=c.className)&&i_(o))for(i=o.split(/\s+/),a=0;a<i.length;a++)u.push("."+i[a]);var f=["type","name","title","alt"];for(a=0;a<f.length;a++)l=f[a],(s=c.getAttribute(l))&&u.push("["+l+'="'+s+'"]');return u.join("")}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var m_=function(t,e){return(m_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var h_=function(){return(h_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function g_(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var __=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t});var y_=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,__(r,n.prototype),r}return function(t,e){function n(){this.constructor=t}m_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),v_=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,$_="Invalid Dsn",b_=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,n=e.host,r=e.path,o=e.pass,i=e.port,l=e.projectId;return e.protocol+"://"+e.publicKey+(t&&o?":"+o:"")+"@"+n+(i?":"+i:"")+"/"+(r?r+"/":r)+l},t.prototype._fromString=function(t){var e=v_.exec(t);if(!e)throw new y_($_);var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}(e.slice(1),6),r=n[0],o=n[1],i=n[2],l=void 0===i?"":i,s=n[3],a=n[4],c=void 0===a?"":a,u="",d=n[5],f=d.split("/");if(f.length>1&&(u=f.slice(0,-1).join("/"),d=f.pop()),d){var p=d.match(/^\d+/);p&&(d=p[0])}this._fromComponents({host:s,pass:l,path:u,projectId:d,port:c,protocol:r,publicKey:o})},t.prototype._fromComponents=function(t){"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),this.user=t.publicKey||"",this.protocol=t.protocol,this.publicKey=t.publicKey||"",this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype._validate=function(){var t=this;if(["protocol","publicKey","host","projectId"].forEach((function(e){if(!t[e])throw new y_("Invalid Dsn: "+e+" missing")})),!this.projectId.match(/^\d+$/))throw new y_("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new y_("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new y_("Invalid Dsn: Invalid port "+this.port)},t}();function w_(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function x_(t,e){return t.require(e)}function C_(t){var e;try{e=x_(module,t)}catch(t){}try{var n=x_(module,"process").cwd;e=x_(module,n()+"/node_modules/"+t)}catch(t){}return e}function k_(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function E_(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var o=t[r];try{n.push(String(o))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function T_(t,e){return!!i_(t)&&(n=e,"[object RegExp]"===Object.prototype.toString.call(n)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e));var n}var S_={};function I_(){return w_()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:S_}function O_(){var t=I_(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function R_(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function A_(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function M_(t){var e=I_();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach((function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)}));var o=t();return Object.keys(r).forEach((function(t){n[t]=r[t]})),o}function N_(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function B_(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(n){t.exception.values[0].mechanism[n]=e[n]}))}catch(t){}}var D_=I_(),q_="Sentry Logger ",L_=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&M_((function(){D_.console.log(q_+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&M_((function(){D_.console.warn(q_+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&M_((function(){D_.console.error(q_+"[Error]: "+t.join(" "))}))},t}();D_.__SENTRY__=D_.__SENTRY__||{};var j_=D_.__SENTRY__.logger||(D_.__SENTRY__.logger=new L_),P_=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++){if(this._inner[e]===t)return!0}return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}},t}(),F_="<anonymous>";function U_(t){try{return t&&"function"==typeof t&&t.name||F_}catch(t){return F_}}function H_(t,e,n){if(e in t){var r=t[e],o=n(r);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:r}})}catch(t){}t[e]=o}}function G_(t){if(n_(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(a_(t)){var o=t,i={};i.type=o.type;try{i.target=c_(o.target)?f_(o.target):Object.prototype.toString.call(o.target)}catch(t){i.target="<unknown>"}try{i.currentTarget=c_(o.currentTarget)?f_(o.currentTarget):Object.prototype.toString.call(o.currentTarget)}catch(t){i.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&d_(t,CustomEvent)&&(i.detail=o.detail),o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o);return i}return t}function W_(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function z_(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r=J_(t,e);return W_(r)>n?z_(t,e-1,n):r}function Y_(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":s_(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+U_(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var n}function V_(t,e,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new P_),0===n)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var n=Y_(t);return l_(n)?n:e}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var o=Y_(e,t);if(l_(o))return o;var i=G_(e),l=Array.isArray(e)?[]:{};if(r.memoize(e))return"[Circular ~]";for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(l[s]=V_(s,i[s],n-1,r));return r.unmemoize(e),l}function J_(t,e){try{return JSON.parse(JSON.stringify(t,(function(t,n){return V_(t,n,e)})))}catch(t){return"**non-serializable**"}}function K_(t,e){void 0===e&&(e=40);var n=Object.keys(G_(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return k_(n[0],e);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>e))return r===n.length?o:k_(o,e)}return""}function X_(t){var e,n;if(s_(t)){var r=t,o={};try{for(var i=g_(Object.keys(r)),l=i.next();!l.done;l=i.next()){var s=l.value;void 0!==r[s]&&(o[s]=X_(r[s]))}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o}return Array.isArray(t)?t.map(X_):t}function Z_(){if(!("fetch"in I_()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function Q_(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function ty(){if(!Z_())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}var ey,ny=I_(),ry={},oy={};function iy(t){if(!oy[t])switch(oy[t]=!0,t){case"console":!function(){if(!("console"in ny))return;["debug","info","warn","error","log","assert"].forEach((function(t){t in ny.console&&H_(ny.console,t,(function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];sy("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,ny.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in ny))return;var t=sy.bind(null,"dom"),e=fy(t,!0);ny.document.addEventListener("click",e,!1),ny.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((function(e){var n=ny[e]&&ny[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(H_(n,"addEventListener",(function(e){return function(n,r,o){if("click"===n||"keypress"==n)try{var i=this,l=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},s=l[n]=l[n]||{refCount:0};if(!s.handler){var a=fy(t);s.handler=a,e.call(this,n,a,o)}s.refCount+=1}catch(t){}return e.call(this,n,r,o)}})),H_(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{var o=this,i=o.__sentry_instrumentation_handlers__||{},l=i[e];l&&(l.refCount-=1,l.refCount<=0&&(t.call(this,e,l.handler,r),l.handler=void 0,delete i[e]),0===Object.keys(i).length&&delete o.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in ny))return;var t=[],e=[],n=XMLHttpRequest.prototype;H_(n,"open",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=this,l=r[1];i.__sentry_xhr__={method:i_(r[0])?r[0].toUpperCase():r[0],url:r[1]},i_(l)&&"POST"===i.__sentry_xhr__.method&&l.match(/sentry_key/)&&(i.__sentry_own_request__=!0);var s=function(){if(4===i.readyState){try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch(t){}try{var n=t.indexOf(i);if(-1!==n){t.splice(n);var o=e.splice(n)[0];i.__sentry_xhr__&&void 0!==o[0]&&(i.__sentry_xhr__.body=o[0])}}catch(t){}sy("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:i})}};return"onreadystatechange"in i&&"function"==typeof i.onreadystatechange?H_(i,"onreadystatechange",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(),t.apply(i,e)}})):i.addEventListener("readystatechange",s),n.apply(i,r)}})),H_(n,"send",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t.push(this),e.push(r),sy("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!function(){if(!Z_())return!1;var t=I_();if(Q_(t.fetch))return!0;var e=!1,n=t.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=Q_(r.contentWindow.fetch)),n.head.removeChild(r)}catch(t){j_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}())return;H_(ny,"fetch",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:ay(e),url:cy(e)},startTimestamp:Date.now()};return sy("fetch",h_({},r)),t.apply(ny,e).then((function(t){return sy("fetch",h_(h_({},r),{endTimestamp:Date.now(),response:t})),t}),(function(t){throw sy("fetch",h_(h_({},r),{endTimestamp:Date.now(),error:t})),t}))}}))}();break;case"history":!function(){if(!function(){var t=I_(),e=t.chrome,n=e&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!n&&r}())return;var t=ny.onpopstate;function e(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var o=ey,i=String(r);ey=i,sy("history",{from:o,to:i})}return t.apply(this,e)}}ny.onpopstate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ny.location.href,o=ey;if(ey=r,sy("history",{from:o,to:r}),t)try{return t.apply(this,e)}catch(t){}},H_(ny.history,"pushState",e),H_(ny.history,"replaceState",e)}();break;case"error":py=ny.onerror,ny.onerror=function(t,e,n,r,o){return sy("error",{column:r,error:o,line:n,msg:t,url:e}),!!py&&py.apply(this,arguments)};break;case"unhandledrejection":hy=ny.onunhandledrejection,ny.onunhandledrejection=function(t){return sy("unhandledrejection",t),!hy||hy.apply(this,arguments)};break;default:j_.warn("unknown instrumentation type:",t)}}function ly(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(ry[t.type]=ry[t.type]||[],ry[t.type].push(t.callback),iy(t.type))}function sy(t,e){var n,r;if(t&&ry[t])try{for(var o=g_(ry[t]||[]),i=o.next();!i.done;i=o.next()){var l=i.value;try{l(e)}catch(e){j_.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+U_(l)+"\nError: "+e)}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function ay(t){return void 0===t&&(t=[]),"Request"in ny&&d_(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function cy(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in ny&&d_(t[0],Request)?t[0].url:String(t[0])}var uy,dy;function fy(t,e){return void 0===e&&(e=!1),function(n){if(n&&dy!==n&&!function(t){if("keypress"!==t.type)return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===uy||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(dy,n))&&(t({event:n,name:r,global:e}),dy=n),clearTimeout(uy),uy=ny.setTimeout((function(){uy=void 0}),1e3)}}}var py=null;var my,hy=null;!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(my||(my={}));var gy=function(){function t(t){var e=this;this._state=my.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(my.RESOLVED,t)},this._reject=function(t){e._setResult(my.REJECTED,t)},this._setResult=function(t,n){e._state===my.PENDING&&(u_(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){if(e._state!==my.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t.done||(e._state===my.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===my.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}return t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(n,r){if(Array.isArray(e))if(0!==e.length){var o=e.length,i=[];e.forEach((function(e,l){t.resolve(e).then((function(t){i[l]=t,0===(o-=1)&&n(i)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(e,n){var r=this;return new t((function(t,o){r._attachHandler({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(t){return void o(t)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(t){return void o(t)}else o(e)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var o,i;return n.then((function(t){i=!1,o=t,e&&e()}),(function(t){i=!0,o=t,e&&e()})).then((function(){i?r(o):t(o)}))}))},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),_y=function(){function t(t){this._limit=t,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var e=this;if(!this.isReady())return gy.reject(new y_("Not adding Promise due to buffer limit reached."));var n=t();return-1===this._buffer.indexOf(n)&&this._buffer.push(n),n.then((function(){return e.remove(n)})).then(null,(function(){return e.remove(n).then(null,(function(){}))})),n},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var e=this;return new gy((function(n){var r=setTimeout((function(){t&&t>0&&n(!1)}),t);gy.all(e._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},t}(),yy={nowSeconds:function(){return Date.now()/1e3}};var vy=w_()?function(){try{return x_(module,"perf_hooks").performance}catch(t){return}}():function(){var t=I_().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),$y=void 0===vy?yy:{nowSeconds:function(){return(vy.timeOrigin+vy.now())/1e3}},by=yy.nowSeconds.bind(yy),wy=$y.nowSeconds.bind($y),xy=wy,Cy=function(){var t=I_().performance;if(t&&t.now){var e=36e5,n=t.now(),r=Date.now(),o=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=o<e,l=t.timing&&t.timing.navigationStart,s="number"==typeof l?Math.abs(l+n-r):e;return i||s<e?o<=s?t.timeOrigin:l:r}}(),ky=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=e_(e._breadcrumbs),n._tags=Qg({},e._tags),n._extra=Qg({},e._extra),n._contexts=Qg({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=e_(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(t){return this._requestSession=t,this},t.prototype.setTags=function(t){return this._tags=Qg(Qg({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=Qg(Qg({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=Qg(Qg({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=Qg(Qg({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return null===e?delete this._contexts[t]:this._contexts=Qg(Qg({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t,e,n,r,o=this.getSpan();return(null===(t=o)||void 0===t?void 0:t.transaction)?null===(e=o)||void 0===e?void 0:e.transaction:(null===(r=null===(n=o)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?o.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=Qg(Qg({},this._tags),e._tags),this._extra=Qg(Qg({},this._extra),e._extra),this._contexts=Qg(Qg({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):s_(e)&&(e=e,this._tags=Qg(Qg({},this._tags),e.tags),this._extra=Qg(Qg({},this._extra),e.extra),this._contexts=Qg(Qg({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n="number"==typeof e?Math.min(e,100):100;if(n<=0)return this;var r=Qg({timestamp:by()},t);return this._breadcrumbs=e_(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){var n;if(this._extra&&Object.keys(this._extra).length&&(t.extra=Qg(Qg({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=Qg(Qg({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=Qg(Qg({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=Qg(Qg({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=Qg({trace:this._span.getTraceContext()},t.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(t.tags=Qg({transaction:r},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=e_(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(e_(Ey(),this._eventProcessors),t,e)},t.prototype._notifyEventProcessors=function(t,e,n,r){var o=this;return void 0===r&&(r=0),new gy((function(i,l){var s=t[r];if(null===e||"function"!=typeof s)i(e);else{var a=s(Qg({},e),n);u_(a)?a.then((function(e){return o._notifyEventProcessors(t,e,n,r+1).then(i)})).then(null,l):o._notifyEventProcessors(t,a,n,r+1).then(i).then(null,l)}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(e){e(t)})),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function Ey(){var t=I_();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Ty(t){Ey().push(t)}var Sy=function(){function t(t){this.errors=0,this.sid=O_(),this.duration=0,this.status=Ug.Ok,this.init=!0,this.ignoreDuration=!1;var e=wy();this.timestamp=e,this.started=e,t&&this.update(t)}return t.prototype.update=function(t){if(void 0===t&&(t={}),t.user&&(!this.ipAddress&&t.user.ip_address&&(this.ipAddress=t.user.ip_address),this.did||t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||wy(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=32===t.sid.length?t.sid:O_()),void 0!==t.init&&(this.init=t.init),!this.did&&t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof t.duration)this.duration=t.duration;else{var e=this.timestamp-this.started;this.duration=e>=0?e:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),!this.ipAddress&&t.ipAddress&&(this.ipAddress=t.ipAddress),!this.userAgent&&t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):this.status===Ug.Ok?this.update({status:Ug.Exited}):this.update()},t.prototype.toJSON=function(){return X_({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:X_({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),Iy=function(){function t(t,e,n){void 0===e&&(e=new ky),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=e,this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=ky.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=O_(),r=e;if(!e){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(t){o=t}r={originalException:t,syntheticException:o}}return this._invokeClient("captureException",t,Qg(Qg({},r),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this._lastEventId=O_(),o=n;if(!n){var i=void 0;try{throw new Error(t)}catch(t){i=t}o={originalException:t,syntheticException:i}}return this._invokeClient("captureMessage",t,e,Qg(Qg({},o),{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=O_();return this._invokeClient("captureEvent",t,Qg(Qg({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),r=n.scope,o=n.client;if(r&&o){var i=o.getOptions&&o.getOptions()||{},l=i.beforeBreadcrumb,s=void 0===l?null:l,a=i.maxBreadcrumbs,c=void 0===a?100:a;if(!(c<=0)){var u=by(),d=Qg({timestamp:u},t),f=s?M_((function(){return s(d,e)})):d;null!==f&&r.addBreadcrumb(f,c)}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n)},t.prototype.run=function(t){var e=Ry(this);try{t(this)}finally{Ry(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return j_.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(t){if(void 0===t&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var t,e,n,r,o;null===(n=null===(e=null===(t=this.getStackTop())||void 0===t?void 0:t.scope)||void 0===e?void 0:e.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(o=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===o||o.setSession()},t.prototype.startSession=function(t){var e=this.getStackTop(),n=e.scope,r=e.client,o=r&&r.getOptions()||{},i=o.release,l=o.environment,s=(I_().navigator||{}).userAgent,a=new Sy(Qg(Qg(Qg({release:i,environment:l},n&&{user:n.getUser()}),s&&{userAgent:s}),t));if(n){var c=n.getSession&&n.getSession();c&&c.status===Ug.Ok&&c.update({status:Ug.Exited}),this.endSession(),n.setSession(a)}return a},t.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},t.prototype._invokeClient=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop(),i=o.scope,l=o.client;l&&l[t]&&(e=l)[t].apply(e,e_(n,[i]))},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Oy(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[t])return o.extensions[t].apply(this,e);j_.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function Oy(){var t=I_();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Ry(t){var e=Oy(),n=Ny(e);return By(e,t),n}function Ay(){var t=Oy();return My(t)&&!Ny(t).isOlderThan(4)||By(t,new Iy),w_()?function(t){var e,n,r;try{var o=null===(r=null===(n=null===(e=Oy().__SENTRY__)||void 0===e?void 0:e.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!o)return Ny(t);if(!My(o)||Ny(o).isOlderThan(4)){var i=Ny(t).getStackTop();By(o,new Iy(i.client,ky.clone(i.scope)))}return Ny(o)}catch(e){return Ny(t)}}(t):Ny(t)}function My(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Ny(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Iy),t.__SENTRY__.hub}function By(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}function Dy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Ay();if(r&&r[t])return r[t].apply(r,Zg(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function qy(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(t){n=t}return Dy("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function Ly(t){Dy("withScope",t)}var jy=function(){function t(t,e,n){void 0===e&&(e={}),this.dsn=t,this._dsnObject=new b_(t),this.metadata=e,this._tunnel=n}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){var t=this.getDsn(),e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var t=this.getDsn();return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+t+"/"+e),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var o in r.push("dsn="+e.toString()),t)if("dsn"!==o)if("user"===o){if(!t.user)continue;t.user.name&&r.push("name="+encodeURIComponent(t.user.name)),t.user.email&&r.push("email="+encodeURIComponent(t.user.email))}else r.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return r.length?n+"?"+r.join("&"):n},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(t){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+t+"/"},t.prototype._encodedAuth=function(){var t,e={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},t}(),Py=function(){return(Py=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Fy(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function Uy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Fy(arguments[e]));return t}var Hy=[];function Gy(t){return t.reduce((function(t,e){return t.every((function(t){return e.name!==t.name}))&&t.push(e),t}),[])}function Wy(t){var e={};return function(t){var e=t.defaultIntegrations&&Uy(t.defaultIntegrations)||[],n=t.integrations,r=Uy(Gy(e));Array.isArray(n)?r=Uy(r.filter((function(t){return n.every((function(e){return e.name!==t.name}))})),Gy(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var o=r.map((function(t){return t.name})),i="Debug";return-1!==o.indexOf(i)&&r.push.apply(r,Uy(r.splice(o.indexOf(i),1))),r}(t).forEach((function(t){e[t.name]=t,function(t){-1===Hy.indexOf(t.name)&&(t.setupOnce(Ty,Ay),Hy.push(t.name),j_.log("Integration installed: "+t.name))}(t)})),e}var zy=function(){function t(t,e){this._integrations={},this._numProcessing=0,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=new b_(e.dsn))}return t.prototype.captureException=function(t,e,n){var r=this,o=e&&e.event_id;return this._process(this._getBackend().eventFromException(t,e).then((function(t){return r._captureEvent(t,e,n)})).then((function(t){o=t}))),o},t.prototype.captureMessage=function(t,e,n,r){var o=this,i=n&&n.event_id,l=l_(t)?this._getBackend().eventFromMessage(String(t),e,n):this._getBackend().eventFromException(t,n);return this._process(l.then((function(t){return o._captureEvent(t,n,r)})).then((function(t){i=t}))),i},t.prototype.captureEvent=function(t,e,n){var r=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((function(t){r=t}))),r},t.prototype.captureSession=function(t){this._isEnabled()?"string"!=typeof t.release?j_.warn("Discarded session because of missing or non-string release"):(this._sendSession(t),t.update({init:!1})):j_.warn("SDK not enabled, will not capture session.")},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.flush=function(t){var e=this;return this._isClientDoneProcessing(t).then((function(n){return e._getBackend().getTransport().close(t).then((function(t){return n&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=Wy(this._options))},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return j_.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(t,e){var n,r,o=!1,i=!1,l=e.exception&&e.exception.values;if(l){i=!0;try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),a=s.next();!a.done;a=s.next()){var c=a.value.mechanism;if(c&&!1===c.handled){o=!0;break}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var u=t.status===Ug.Ok;(u&&0===t.errors||u&&o)&&(t.update(Py(Py({},o&&{status:Ug.Crashed}),{errors:t.errors||Number(i||o)})),this.captureSession(t))},t.prototype._sendSession=function(t){this._getBackend().sendSession(t)},t.prototype._isClientDoneProcessing=function(t){var e=this;return new gy((function(n){var r=0,o=setInterval((function(){0==e._numProcessing?(clearInterval(o),n(!0)):(r+=1,t&&r>=t&&(clearInterval(o),n(!1)))}),1)}))},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,n){var r=this,o=this.getOptions().normalizeDepth,i=void 0===o?3:o,l=Py(Py({},t),{event_id:t.event_id||(n&&n.event_id?n.event_id:O_()),timestamp:t.timestamp||by()});this._applyClientOptions(l),this._applyIntegrationsMetadata(l);var s=e;n&&n.captureContext&&(s=ky.clone(s).update(n.captureContext));var a=gy.resolve(l);return s&&(a=s.applyToEvent(l,n)),a.then((function(t){return"number"==typeof i&&i>0?r._normalizeEvent(t,i):t}))},t.prototype._normalizeEvent=function(t,e){if(!t)return null;var n=Py(Py(Py(Py(Py({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return Py(Py({},t),t.data&&{data:J_(t.data,e)})}))}),t.user&&{user:J_(t.user,e)}),t.contexts&&{contexts:J_(t.contexts,e)}),t.extra&&{extra:J_(t.extra,e)});t.contexts&&t.contexts.trace&&(n.contexts.trace=t.contexts.trace);var r=this.getOptions()._experiments;return(void 0===r?{}:r).ensureNoCircularStructures?J_(n):n},t.prototype._applyClientOptions=function(t){var e=this.getOptions(),n=e.environment,r=e.release,o=e.dist,i=e.maxValueLength,l=void 0===i?250:i;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==o&&(t.dist=o),t.message&&(t.message=k_(t.message,l));var s=t.exception&&t.exception.values&&t.exception.values[0];s&&s.value&&(s.value=k_(s.value,l));var a=t.request;a&&a.url&&(a.url=k_(a.url,l))},t.prototype._applyIntegrationsMetadata=function(t){var e=Object.keys(this._integrations);e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=Uy(t.sdk.integrations||[],e))},t.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},t.prototype._captureEvent=function(t,e,n){return this._processEvent(t,e,n).then((function(t){return t.event_id}),(function(t){j_.error(t)}))},t.prototype._processEvent=function(t,e,n){var r=this,o=this.getOptions(),i=o.beforeSend,l=o.sampleRate;if(!this._isEnabled())return gy.reject(new y_("SDK not enabled, will not capture event."));var s="transaction"===t.type;return!s&&"number"==typeof l&&Math.random()>l?gy.reject(new y_("Discarding event because it's not included in the random sample (sampling rate = "+l+")")):this._prepareEvent(t,n,e).then((function(t){if(null===t)throw new y_("An event processor returned null, will not send event.");if(e&&e.data&&!0===e.data.__sentry__||s||!i)return t;var n=i(t,e);return r._ensureBeforeSendRv(n)})).then((function(t){if(null===t)throw new y_("`beforeSend` returned `null`, will not send event.");var e=n&&n.getSession&&n.getSession();return!s&&e&&r._updateSessionFromEvent(e,t),r._sendEvent(t),t})).then(null,(function(t){if(t instanceof y_)throw t;throw r.captureException(t,{data:{__sentry__:!0},originalException:t}),new y_("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))},t.prototype._process=function(t){var e=this;this._numProcessing+=1,t.then((function(t){return e._numProcessing-=1,t}),(function(t){return e._numProcessing-=1,t}))},t.prototype._ensureBeforeSendRv=function(t){var e="`beforeSend` method has to return `null` or a valid event.";if(u_(t))return t.then((function(t){if(!s_(t)&&null!==t)throw new y_(e);return t}),(function(t){throw new y_("beforeSend rejected with "+t)}));if(!s_(t)&&null!==t)throw new y_(e);return t},t}(),Yy=function(){function t(){}return t.prototype.sendEvent=function(t){return gy.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Wg.Skipped})},t.prototype.close=function(t){return gy.resolve(!0)},t}(),Vy=function(){function t(t){this._options=t,this._options.dsn||j_.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(t,e){throw new y_("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new y_("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,(function(t){j_.error("Error while sending event: "+t)}))},t.prototype.sendSession=function(t){this._transport.sendSession?this._transport.sendSession(t).then(null,(function(t){j_.error("Error while sending session: "+t)})):j_.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new Yy},t}();function Jy(t){if(t.metadata&&t.metadata.sdk){var e=t.metadata.sdk;return{name:e.name,version:e.version}}}function Ky(t,e){return e?(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=Uy(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=Uy(t.sdk.packages||[],e.packages||[]),t):t}function Xy(t,e){var n=Jy(e),r="aggregates"in t?"sessions":"session";return{body:JSON.stringify(Py(Py({sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(t),type:r,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function Zy(t,e){var n=Jy(e),r=t.type||"event",o="transaction"===r||e.forceEnvelope(),i=t.debug_meta||{},l=i.transactionSampling,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(i,["transactionSampling"]),a=l||{},c=a.method,u=a.rate;0===Object.keys(s).length?delete t.debug_meta:t.debug_meta=s;var d={body:JSON.stringify(n?Ky(t,e.metadata.sdk):t),type:r,url:o?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(o){var f=JSON.stringify(Py(Py({event_id:t.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:c,rate:u}]})+"\n"+d.body;d.body=f}return d}var Qy,tv="6.10.0",ev=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Qy=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return Qy.apply(n,t)}},t.id="FunctionToString",t}(),nv=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],rv=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){Ty((function(e){var n=Ay();if(!n)return e;var r=n.getIntegration(t);if(r){var o=n.getClient(),i=o?o.getOptions():{},l="function"==typeof r._mergeOptions?r._mergeOptions(i):{};return"function"!=typeof r._shouldDropEvent?e:r._shouldDropEvent(e,l)?null:e}return e}))},t.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(j_.warn("Event dropped due to being internal Sentry Error.\nEvent: "+A_(t)),!0):this._isIgnoredError(t,e)?(j_.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+A_(t)),!0):this._isDeniedUrl(t,e)?(j_.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+A_(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isAllowedUrl(t,e)&&(j_.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+A_(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},t.prototype._isSentryError=function(t,e){if(!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},t.prototype._isIgnoredError=function(t,e){return!(!e.ignoreErrors||!e.ignoreErrors.length)&&this._getPossibleEventMessages(t).some((function(t){return e.ignoreErrors.some((function(e){return T_(t,e)}))}))},t.prototype._isDeniedUrl=function(t,e){if(!e.denyUrls||!e.denyUrls.length)return!1;var n=this._getEventFilterUrl(t);return!!n&&e.denyUrls.some((function(t){return T_(n,t)}))},t.prototype._isAllowedUrl=function(t,e){if(!e.allowUrls||!e.allowUrls.length)return!0;var n=this._getEventFilterUrl(t);return!n||e.allowUrls.some((function(t){return T_(n,t)}))},t.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{allowUrls:Uy(this._options.whitelistUrls||[],this._options.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:Uy(this._options.blacklistUrls||[],this._options.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:Uy(this._options.ignoreErrors||[],t.ignoreErrors||[],nv),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},t.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=void 0===n?"":n,o=e.value,i=void 0===o?"":o;return[""+i,r+": "+i]}catch(e){return j_.error("Cannot extract message for event "+A_(t)),[]}return[]},t.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(e){return j_.error("Cannot extract url for event "+A_(t)),null}},t.id="InboundFilters",t}(),ov="?",iv=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,lv=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,sv=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,av=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,cv=/\((\S*)(?::(\d+))(?::(\d+))\)/,uv=/Minified React error #\d+;/i;function dv(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:uv.test(t.message)&&(n=1));try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=t.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=n.split("\n"),l=[],s=0;s<i.length;s+=2){var a=null;(e=r.exec(i[s]))?a={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=o.exec(i[s]))&&(a={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),a&&(!a.func&&a.line&&(a.func=ov),l.push(a))}if(!l.length)return null;return{message:pv(t),name:t.name,stack:l}}(t))return fv(e,n)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,r,o=[],i=t.stack.split("\n"),l=0;l<i.length;++l){if(n=iv.exec(i[l])){var s=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=cv.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]);var a=n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],c=n[1]||ov,u=-1!==c.indexOf("safari-extension"),d=-1!==c.indexOf("safari-web-extension");(u||d)&&(c=-1!==c.indexOf("@")?c.split("@")[0]:ov,a=u?"safari-extension:"+a:"safari-web-extension:"+a),r={url:a,func:c,args:s?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=sv.exec(i[l]))r={url:n[2],func:n[1]||ov,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=lv.exec(i[l])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=av.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==l||n[5]||void 0===t.columnNumber||(o[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||ov,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=ov),o.push(r)}if(!o.length)return null;return{message:pv(t),name:t.name,stack:o}}(t))return fv(e,n)}catch(t){}return{message:pv(t),name:t&&t.name,stack:[],failed:!0}}function fv(t,e){try{return Yg(Yg({},t),{stack:t.stack.slice(e)})}catch(e){return t}}function pv(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function mv(t){var e=gv(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function hv(t){return{exception:{values:[mv(t)]}}}function gv(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,50).map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).reverse()}function _v(t,e,n){var r,o;if(void 0===n&&(n={}),r_(t)&&t.error)return r=hv(dv(t=t.error));if(o_(t)||(o=t,"[object DOMException]"===Object.prototype.toString.call(o))){var i=t,l=i.name||(o_(i)?"DOMError":"DOMException"),s=i.message?l+": "+i.message:l;return N_(r=yv(s,e,n),s),"code"in i&&(r.tags=Yg(Yg({},r.tags),{"DOMException.code":""+i.code})),r}return n_(t)?r=hv(dv(t)):s_(t)||a_(t)?(B_(r=function(t,e,n){var r={exception:{values:[{type:a_(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+K_(t)}]},extra:{__serialized__:z_(t)}};if(e){var o=gv(dv(e).stack);r.stacktrace={frames:o}}return r}(t,e,n.rejection),{synthetic:!0}),r):(N_(r=yv(t,e,n),""+t,void 0),B_(r,{synthetic:!0}),r)}function yv(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var o=gv(dv(e).stack);r.stacktrace={frames:o}}return r}var vv={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},$v=function(){function t(t){this.options=t,this._buffer=new _y(30),this._rateLimits={},this._api=new jy(t.dsn,t._metadata,t.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return t.prototype.sendEvent=function(t){throw new y_("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t.prototype._handleResponse=function(t){var e=t.requestType,n=t.response,r=t.headers,o=t.resolve,i=t.reject,l=Wg.fromHttpCode(n.status);this._handleRateLimit(r)&&j_.warn("Too many "+e+" requests, backing off until: "+this._disabledUntil(e)),l!==Wg.Success?i(n):o({status:l})},t.prototype._disabledUntil=function(t){var e=vv[t];return this._rateLimits[e]||this._rateLimits.all},t.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},t.prototype._handleRateLimit=function(t){var e,n,r,o,i=Date.now(),l=t["x-sentry-rate-limits"],s=t["retry-after"];if(l){try{for(var a=Vg(l.trim().split(",")),c=a.next();!c.done;c=a.next()){var u=c.value.split(":",2),d=parseInt(u[0],10),f=1e3*(isNaN(d)?60:d);try{for(var p=(r=void 0,Vg(u[1].split(";"))),m=p.next();!m.done;m=p.next()){var h=m.value;this._rateLimits[h||"all"]=new Date(i+f)}}catch(t){r={error:t}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!0}return!!s&&(this._rateLimits.all=new Date(i+function(t,e){if(!e)return 6e4;var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?6e4:r-t}(i,s)),!0)},t}();var bv=function(t){function e(e,n){void 0===n&&(n=function(){var t,e,n=I_();if(Q_(n.fetch))return n.fetch.bind(n);var r=n.document,o=n.fetch;if("function"==typeof(null===(t=r)||void 0===t?void 0:t.createElement))try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i),(null===(e=i.contentWindow)||void 0===e?void 0:e.fetch)&&(o=i.contentWindow.fetch),r.head.removeChild(i)}catch(t){j_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return o.bind(n)}());var r=t.call(this,e)||this;return r._fetch=n,r}return Fg(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(Zy(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(Xy(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;if(this._isRateLimited(t.type))return Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429});var r={body:t.body,method:"POST",referrerPolicy:ty()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new gy((function(e,o){n._fetch(t.url,r).then((function(r){var i={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:t.type,response:r,headers:i,resolve:e,reject:o})})).catch(o)}))}))},e}($v),wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fg(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(Zy(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(Xy(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;return this._isRateLimited(t.type)?Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429}):this._buffer.add((function(){return new gy((function(e,r){var o=new XMLHttpRequest;for(var i in o.onreadystatechange=function(){if(4===o.readyState){var i={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};n._handleResponse({requestType:t.type,response:o,headers:i,resolve:e,reject:r})}},o.open("POST",t.url),n.options.headers)n.options.headers.hasOwnProperty(i)&&o.setRequestHeader(i,n.options.headers[i]);o.send(t.body)}))}))},e}($v),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fg(e,t),e.prototype.eventFromException=function(t,e){return function(t,e,n){var r=_v(e,n&&n.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return B_(r,{handled:!0,type:"generic"}),r.level=Gg.Error,n&&n.event_id&&(r.event_id=n.event_id),gy.resolve(r)}(this._options,t,e)},e.prototype.eventFromMessage=function(t,e,n){return void 0===e&&(e=Gg.Info),function(t,e,n,r){void 0===n&&(n=Gg.Info);var o=yv(e,r&&r.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),gy.resolve(o)}(this._options,t,e,n)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=Yg(Yg({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(e):Z_()?new bv(e):new wv(e)},e}(Vy),Cv=0;function kv(){return Cv>0}function Ev(){Cv+=1,setTimeout((function(){Cv-=1}))}function Tv(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var o=r.map((function(t){return Tv(t,e)}));return t.handleEvent?t.handleEvent.apply(this,o):t.apply(this,o)}catch(t){throw Ev(),Ly((function(n){n.addEventProcessor((function(t){var n=Yg({},t);return e.mechanism&&(N_(n,void 0,void 0),B_(n,e.mechanism)),n.extra=Yg(Yg({},n.extra),{arguments:r}),n})),qy(t)})),t}};try{for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}catch(t){}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch(t){}return r}function Sv(t){if(void 0===t&&(t={}),t.eventId)if(t.dsn){var e=document.createElement("script");e.async=!0,e.src=new jy(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(document.head||document.body).appendChild(e)}else j_.error("Missing dsn option in showReportDialog call");else j_.error("Missing eventId option in showReportDialog call")}var Iv=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Yg({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(j_.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(j_.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(ly({callback:function(n){var r=n.error,o=Ay(),i=o.getIntegration(t),l=r&&!0===r.__sentry_own_request__;if(i&&!kv()&&!l){var s=o.getClient(),a=void 0===r&&i_(n.msg)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(_v(r||n.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);B_(a,{handled:!1,type:"onerror"}),o.captureEvent(a,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(ly({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(t){}var o=Ay(),i=o.getIntegration(t),l=r&&!0===r.__sentry_own_request__;if(!i||kv()||l)return!0;var s=o.getClient(),a=l_(r)?e._eventFromRejectionWithPrimitive(r):_v(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});a.level=Gg.Error,B_(a,{handled:!1,type:"onunhandledrejection"}),o.captureEvent(a,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(t,e,n,r){var o,i=r_(t)?t.message:t,l=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);l&&(o=l[1],i=l[2]);var s={exception:{values:[{type:o||"Error",value:i}]}};return this._enhanceEventWithInitialFrame(s,e,n,r)},t.prototype._eventFromRejectionWithPrimitive=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}},t.prototype._enhanceEventWithInitialFrame=function(t,e,n,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(r,10))?void 0:r,i=isNaN(parseInt(n,10))?void 0:n,l=i_(e)&&e.length>0?e:function(){try{return document.location.href}catch(t){return""}}();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:o,filename:l,function:"?",in_app:!0,lineno:i}),t},t.id="GlobalHandlers",t}(),Ov=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Rv=function(){function t(e){this.name=t.id,this._options=Yg({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var t=I_();(this._options.setTimeout&&H_(t,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&H_(t,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&H_(t,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&H_(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Ov).forEach(this._wrapEventTarget.bind(this))},t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Tv(r,{mechanism:{data:{function:U_(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t.call(this,Tv(e,{mechanism:{data:{function:"requestAnimationFrame",handler:U_(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=I_(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(H_(n,"addEventListener",(function(e){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Tv(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:U_(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.call(this,n,Tv(r,{mechanism:{data:{function:"addEventListener",handler:U_(r),target:t},handled:!0,type:"instrument"}}),o)}})),H_(n,"removeEventListener",(function(t){return function(e,n,r){var o,i=n;try{var l=null===(o=i)||void 0===o?void 0:o.__sentry_wrapped__;l&&t.call(this,e,l,r)}catch(t){}return t.call(this,e,i,r)}})))},t.prototype._wrapXHR=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(t){t in r&&"function"==typeof r[t]&&H_(r,t,(function(e){var n={mechanism:{data:{function:t,handler:U_(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(n.mechanism.data.handler=U_(e.__sentry_original__)),Tv(e,n)}))})),t.apply(this,e)}},t.id="TryCatch",t}(),Av=function(){function t(e){this.name=t.id,this._options=Yg({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(t){this._options.sentry&&Ay().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:A_(t)},{event:t})},t.prototype.setupOnce=function(){var t=this;this._options.console&&ly({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._consoleBreadcrumb.apply(t,Kg(e))},type:"console"}),this._options.dom&&ly({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._domBreadcrumb.apply(t,Kg(e))},type:"dom"}),this._options.xhr&&ly({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._xhrBreadcrumb.apply(t,Kg(e))},type:"xhr"}),this._options.fetch&&ly({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._fetchBreadcrumb.apply(t,Kg(e))},type:"fetch"}),this._options.history&&ly({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._historyBreadcrumb.apply(t,Kg(e))},type:"history"})},t.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:Gg.fromString(t.level),message:E_(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+(E_(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}Ay().addBreadcrumb(e,{input:t.args,level:t.level})},t.prototype._domBreadcrumb=function(t){var e,n="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{e=t.event.target?f_(t.event.target,n):f_(t.event,n)}catch(t){e="<unknown>"}0!==e.length&&Ay().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name,global:t.global})},t.prototype._xhrBreadcrumb=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},n=e.method,r=e.url,o=e.status_code,i=e.body;Ay().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:o},type:"http"},{xhr:t.xhr,input:i})}else;},t.prototype._fetchBreadcrumb=function(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?Ay().addBreadcrumb({category:"fetch",data:t.fetchData,level:Gg.Error,type:"http"},{data:t.error,input:t.args}):Ay().addBreadcrumb({category:"fetch",data:Yg(Yg({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))},t.prototype._historyBreadcrumb=function(t){var e=I_(),n=t.from,r=t.to,o=R_(e.location.href),i=R_(n),l=R_(r);i.path||(i=o),o.protocol===l.protocol&&o.host===l.host&&(r=l.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),Ay().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},t.id="Breadcrumbs",t}(),Mv=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){Ty((function(e,n){var r=Ay().getIntegration(t);return r?r._handler(e,n):e}))},t.prototype._handler=function(t,e){if(!(t.exception&&t.exception.values&&e&&d_(e.originalException,Error)))return t;var n=this._walkErrorTree(e.originalException,this._key);return t.exception.values=Kg(n,t.exception.values),t},t.prototype._walkErrorTree=function(t,e,n){if(void 0===n&&(n=[]),!d_(t[e],Error)||n.length+1>=this._limit)return n;var r=mv(dv(t[e]));return this._walkErrorTree(t[e],e,Kg([r],n))},t.id="LinkedErrors",t}(),Nv=I_(),Bv=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Ty((function(e){var n,r,o;if(Ay().getIntegration(t)){if(!Nv.navigator&&!Nv.location&&!Nv.document)return e;var i=(null===(n=e.request)||void 0===n?void 0:n.url)||(null===(r=Nv.location)||void 0===r?void 0:r.href),l=(Nv.document||{}).referrer,s=(Nv.navigator||{}).userAgent,a=Yg(Yg(Yg({},null===(o=e.request)||void 0===o?void 0:o.headers),l&&{Referer:l}),s&&{"User-Agent":s}),c=Yg(Yg({},i&&{url:i}),{headers:a});return Yg(Yg({},e),{request:c})}return e}))},t.id="UserAgent",t}(),Dv=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e((function(e){var r=n().getIntegration(t);if(r){try{if(r._shouldDropEvent(e,r._previousEvent))return null}catch(t){return r._previousEvent=e}return r._previousEvent=e}return e}))},t.prototype._shouldDropEvent=function(t,e){return!!e&&(!!this._isSameMessageEvent(t,e)||!!this._isSameExceptionEvent(t,e))},t.prototype._isSameMessageEvent=function(t,e){var n=t.message,r=e.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!this._isSameFingerprint(t,e)&&!!this._isSameStacktrace(t,e))))},t.prototype._getFramesFromEvent=function(t){var e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}else if(t.stacktrace)return t.stacktrace.frames},t.prototype._isSameStacktrace=function(t,e){var n=this._getFramesFromEvent(t),r=this._getFramesFromEvent(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var o=0;o<r.length;o++){var i=r[o],l=n[o];if(i.filename!==l.filename||i.lineno!==l.lineno||i.colno!==l.colno||i.function!==l.function)return!1}return!0},t.prototype._getExceptionFromEvent=function(t){return t.exception&&t.exception.values&&t.exception.values[0]},t.prototype._isSameExceptionEvent=function(t,e){var n=this._getExceptionFromEvent(e),r=this._getExceptionFromEvent(t);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!this._isSameFingerprint(t,e)&&!!this._isSameStacktrace(t,e)))},t.prototype._isSameFingerprint=function(t,e){var n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(t){return!1}},t.id="Dedupe",t}(),qv=function(t){function e(e){void 0===e&&(e={});return e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:tv}],version:tv},t.call(this,xv,e)||this}return Fg(e,t),e.prototype.showReportDialog=function(t){void 0===t&&(t={}),I_().document&&(this._isEnabled()?Sv(Yg(Yg({},t),{dsn:t.dsn||this.getDsn()})):j_.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype._prepareEvent=function(e,n,r){return e.platform=e.platform||"javascript",t.prototype._prepareEvent.call(this,e,n,r)},e.prototype._sendEvent=function(e){var n=this.getIntegration(Av);n&&n.addSentryBreadcrumb(e),t.prototype._sendEvent.call(this,e)},e}(zy),Lv=[new rv,new ev,new Rv,new Av,new Iv,new Mv,new Dv,new Bv];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var jv=function(t,e){return(jv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Pv(t,e){function n(){this.constructor=t}jv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Fv,Uv=function(){return(Uv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Hv(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function Gv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hv(arguments[e]));return t}!function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"}(Fv||(Fv={})),function(t){t.fromHttpCode=function(e){if(e<400)return t.Ok;if(e>=400&&e<500)switch(e){case 401:return t.Unauthenticated;case 403:return t.PermissionDenied;case 404:return t.NotFound;case 409:return t.AlreadyExists;case 413:return t.FailedPrecondition;case 429:return t.ResourceExhausted;default:return t.InvalidArgument}if(e>=500&&e<600)switch(e){case 501:return t.Unimplemented;case 503:return t.Unavailable;case 504:return t.DeadlineExceeded;default:return t.InternalError}return t.UnknownError}}(Fv||(Fv={}));var Wv=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function zv(t){var e;return void 0===t&&(t=null===(e=Ay().getClient())||void 0===e?void 0:e.getOptions()),!!t&&("tracesSampleRate"in t||"tracesSampler"in t)}function Yv(t){var e,n;return void 0===t&&(t=Ay()),null===(n=null===(e=t)||void 0===e?void 0:e.getScope())||void 0===n?void 0:n.getTransaction()}function Vv(t){return t/1e3}function Jv(){var t=Yv();t&&(j_.log("[Tracing] Transaction: "+Fv.InternalError+" -> Global error occured"),t.setStatus(Fv.InternalError))}var Kv=function(){function t(t){void 0===t&&(t=1e3),this.spans=[],this._maxlen=t}return t.prototype.add=function(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)},t}(),Xv=function(t){function e(e,n){var r=t.call(this,e)||this;return r._measurements={},r._hub=Ay(),d_(n,Iy)&&(r._hub=n),r.name=e.name||"",r.metadata=e.metadata||{},r._trimEnd=e.trimEnd,r.transaction=r,r}return Pv(e,t),e.prototype.setName=function(t){this.name=t},e.prototype.initSpanRecorder=function(t){void 0===t&&(t=1e3),this.spanRecorder||(this.spanRecorder=new Kv(t)),this.spanRecorder.add(this)},e.prototype.setMeasurements=function(t){this._measurements=Uv({},t)},e.prototype.setMetadata=function(t){this.metadata=Uv(Uv({},this.metadata),t)},e.prototype.finish=function(e){var n=this;if(void 0===this.endTimestamp){if(this.name||(j_.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),t.prototype.finish.call(this,e),!0===this.sampled){var r=this.spanRecorder?this.spanRecorder.spans.filter((function(t){return t!==n&&t.endTimestamp})):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((function(t,e){return t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t})).endTimestamp);var o={contexts:{trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata};return Object.keys(this._measurements).length>0&&(j_.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),j_.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(o)}j_.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.")}},e.prototype.toContext=function(){var e=t.prototype.toContext.call(this);return X_(Uv(Uv({},e),{name:this.name,trimEnd:this._trimEnd}))},e.prototype.updateWithContext=function(e){var n;return t.prototype.updateWithContext.call(this,e),this.name=null!=(n=e.name)?n:"",this._trimEnd=e.trimEnd,this},e}(function(){function t(t){if(this.traceId=O_(),this.spanId=O_().substring(16),this.startTimestamp=xy(),this.tags={},this.data={},!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}return t.prototype.child=function(t){return this.startChild(t)},t.prototype.startChild=function(e){var n=new t(Uv(Uv({},e),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},t.prototype.setTag=function(t,e){var n;return this.tags=Uv(Uv({},this.tags),((n={})[t]=e,n)),this},t.prototype.setData=function(t,e){var n;return this.data=Uv(Uv({},this.data),((n={})[t]=e,n)),this},t.prototype.setStatus=function(t){return this.status=t,this},t.prototype.setHttpStatus=function(t){this.setTag("http.status_code",String(t));var e=Fv.fromHttpCode(t);return e!==Fv.UnknownError&&this.setStatus(e),this},t.prototype.isSuccess=function(){return this.status===Fv.Ok},t.prototype.finish=function(t){this.endTimestamp="number"==typeof t?t:xy()},t.prototype.toTraceparent=function(){var t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+t},t.prototype.toContext=function(){return X_({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},t.prototype.updateWithContext=function(t){var e,n,r,o,i;return this.data=null!=(e=t.data)?e:{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=null!=(n=t.spanId)?n:this.spanId,this.startTimestamp=null!=(r=t.startTimestamp)?r:this.startTimestamp,this.status=t.status,this.tags=null!=(o=t.tags)?o:{},this.traceId=null!=(i=t.traceId)?i:this.traceId,this},t.prototype.getTraceContext=function(){return X_({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},t.prototype.toJSON=function(){return X_({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},t}()),Zv=function(t){function e(e,n,r,o){void 0===r&&(r="");var i=t.call(this,o)||this;return i._pushActivity=e,i._popActivity=n,i.transactionSpanId=r,i}return Pv(e,t),e.prototype.add=function(e){var n=this;e.spanId!==this.transactionSpanId&&(e.finish=function(t){e.endTimestamp="number"==typeof t?t:xy(),n._popActivity(e.spanId)},void 0===e.endTimestamp&&this._pushActivity(e.spanId)),t.prototype.add.call(this,e)},e}(Kv),Qv=function(t){function e(e,n,r,o){void 0===r&&(r=1e3),void 0===o&&(o=!1);var i=t.call(this,e,n)||this;return i._idleHub=n,i._idleTimeout=r,i._onScope=o,i.activities={},i._heartbeatTimer=0,i._heartbeatCounter=0,i._finished=!1,i._beforeFinishCallbacks=[],n&&o&&(t$(n),j_.log("Setting idle transaction on scope. Span ID: "+i.spanId),n.configureScope((function(t){return t.setSpan(i)}))),i._initTimeout=setTimeout((function(){i._finished||i.finish()}),i._idleTimeout),i}return Pv(e,t),e.prototype.finish=function(e){var n,r,o=this;if(void 0===e&&(e=xy()),this._finished=!0,this.activities={},this.spanRecorder){j_.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._beforeFinishCallbacks),l=i.next();!l.done;l=i.next()){(0,l.value)(this,e)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(t){if(t.spanId===o.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus(Fv.Cancelled),j_.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));var n=t.startTimestamp<e;return n||j_.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),n})),j_.log("[Tracing] flushing IdleTransaction")}else j_.log("[Tracing] No active IdleTransaction");return this._onScope&&t$(this._idleHub),t.prototype.finish.call(this,e)},e.prototype.registerBeforeFinishCallback=function(t){this._beforeFinishCallbacks.push(t)},e.prototype.initSpanRecorder=function(t){var e=this;if(!this.spanRecorder){this.spanRecorder=new Zv((function(t){e._finished||e._pushActivity(t)}),(function(t){e._finished||e._popActivity(t)}),this.spanId,t),j_.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)},e.prototype._pushActivity=function(t){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),j_.log("[Tracing] pushActivity: "+t),this.activities[t]=!0,j_.log("[Tracing] new activities count",Object.keys(this.activities).length)},e.prototype._popActivity=function(t){var e=this;if(this.activities[t]&&(j_.log("[Tracing] popActivity "+t),delete this.activities[t],j_.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var n=this._idleTimeout,r=xy()+n/1e3;setTimeout((function(){e._finished||e.finish(r)}),n)}},e.prototype._beat=function(){if(clearTimeout(this._heartbeatTimer),!this._finished){var t=Object.keys(this.activities),e=t.length?t.reduce((function(t,e){return t+e})):"";e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(j_.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(Fv.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},e.prototype._pingHeartbeat=function(){var t=this;j_.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),this._heartbeatTimer=setTimeout((function(){t._beat()}),5e3)},e}(Xv);function t$(t){if(t){var e=t.getScope();if(e)e.getTransaction()&&e.setSpan(void 0)}}function e$(){var t=this.getScope();if(t){var e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function n$(t,e,n){return zv()?void 0!==t.sampled?(t.setMetadata({transactionSampling:{method:zg.Explicit}}),t):("function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:zg.Sampler,rate:Number(r)}})):void 0!==n.parentSampled?(r=n.parentSampled,t.setMetadata({transactionSampling:{method:zg.Inheritance}})):(r=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:zg.Rate,rate:Number(r)}})),function(t){if(isNaN(t)||"number"!=typeof t&&"boolean"!=typeof t)return j_.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(t)+" of type "+JSON.stringify(typeof t)+"."),!1;if(t<0||t>1)return j_.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+t+"."),!1;return!0}(r)?r?(t.sampled=Math.random()<r,t.sampled?(j_.log("[Tracing] starting "+t.op+" transaction - "+t.name),t):(j_.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),t)):(j_.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(j_.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)):(t.sampled=!1,t);var r}function r$(t,e){var n,r,o=(null===(n=this.getClient())||void 0===n?void 0:n.getOptions())||{},i=new Xv(t,this);return(i=n$(i,o,Uv({parentSampled:t.parentSampled,transactionContext:t},e))).sampled&&i.initSpanRecorder(null===(r=o._experiments)||void 0===r?void 0:r.maxSpans),i}var o$=I_();var i$=function(t,e,n){var r;return function(o){e.value>=0&&(o||n)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},l$=function(t,e){return{name:t,value:null!=e?e:-1,delta:0,entries:[],id:"v2-"+Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12)}},s$=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},a$=function(t,e){var n=function(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},c$=-1,u$=function(){return c$<0&&(c$="hidden"===document.visibilityState?0:1/0,a$((function(t){var e=t.timeStamp;c$=e}),!0)),{get firstHiddenTime(){return c$}}},d$={},f$=I_(),p$=function(){function t(){var t;this._measurements={},this._performanceCursor=0,!w_()&&(null===(t=f$)||void 0===t?void 0:t.performance)&&(f$.performance.mark&&f$.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID())}return t.prototype.addPerformanceEntries=function(t){var e=this;if(f$&&f$.performance&&f$.performance.getEntries&&Cy){j_.log("[Tracing] Adding & adjusting spans using Performance API");var n,r,o,i,l,s=Vv(Cy);if(f$.document&&f$.document.scripts)for(var a=0;a<f$.document.scripts.length;a++)if("true"===f$.document.scripts[a].dataset.entry){n=f$.document.scripts[a].src;break}if(f$.performance.getEntries().slice(this._performanceCursor).forEach((function(a){var c=Vv(a.startTime),u=Vv(a.duration);if(!("navigation"===t.op&&s+c<t.startTimestamp))switch(a.entryType){case"navigation":!function(t,e,n){m$({transaction:t,entry:e,event:"unloadEvent",timeOrigin:n}),m$({transaction:t,entry:e,event:"redirect",timeOrigin:n}),m$({transaction:t,entry:e,event:"domContentLoadedEvent",timeOrigin:n}),m$({transaction:t,entry:e,event:"loadEvent",timeOrigin:n}),m$({transaction:t,entry:e,event:"connect",timeOrigin:n}),m$({transaction:t,entry:e,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"}),m$({transaction:t,entry:e,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"}),m$({transaction:t,entry:e,event:"domainLookup",timeOrigin:n,description:"DNS"}),function(t,e,n){h$(t,{op:"browser",description:"request",startTimestamp:n+Vv(e.requestStart),endTimestamp:n+Vv(e.responseEnd)}),h$(t,{op:"browser",description:"response",startTimestamp:n+Vv(e.responseStart),endTimestamp:n+Vv(e.responseEnd)})}(t,e,n)}(t,a,s),i=s+Vv(a.responseStart),l=s+Vv(a.requestStart);break;case"mark":case"paint":case"measure":var d=function(t,e,n,r,o){var i=o+n,l=i+r;return h$(t,{description:e.name,endTimestamp:l,op:e.entryType,startTimestamp:i}),i}(t,a,c,u,s);void 0===o&&"sentry-tracing-init"===a.name&&(o=d);var f=u$(),p=a.startTime<f.firstHiddenTime;"first-paint"===a.name&&p&&(j_.log("[Measurements] Adding FP"),e._measurements.fp={value:a.startTime},e._measurements["mark.fp"]={value:d}),"first-contentful-paint"===a.name&&p&&(j_.log("[Measurements] Adding FCP"),e._measurements.fcp={value:a.startTime},e._measurements["mark.fcp"]={value:d});break;case"resource":var m=a.name.replace(window.location.origin,""),h=function(t,e,n,r,o,i){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;var l={};"transferSize"in e&&(l["Transfer Size"]=e.transferSize);"encodedBodySize"in e&&(l["Encoded Body Size"]=e.encodedBodySize);"decodedBodySize"in e&&(l["Decoded Body Size"]=e.decodedBodySize);var s=i+r,a=s+o;return h$(t,{description:n,endTimestamp:a,op:e.initiatorType?"resource."+e.initiatorType:"resource",startTimestamp:s,data:l}),a}(t,a,m,c,u,s);void 0===r&&(n||"").indexOf(m)>-1&&(r=h)}})),void 0!==r&&void 0!==o&&h$(t,{description:"evaluation",endTimestamp:o,op:"script",startTimestamp:r}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(t),"pageload"===t.op){var c=Vv(Cy);"number"==typeof i&&(j_.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:1e3*(i-t.startTimestamp)},"number"==typeof l&&l<=i&&(this._measurements["ttfb.requestTime"]={value:1e3*(i-l)})),["fcp","fp","lcp"].forEach((function(n){if(e._measurements[n]&&!(c>=t.startTimestamp)){var r=e._measurements[n].value,o=c+Vv(r),i=Math.abs(1e3*(o-t.startTimestamp)),l=i-r;j_.log("[Measurements] Normalized "+n+" from "+r+" to "+i+" ("+l+")"),e._measurements[n].value=i}})),this._measurements["mark.fid"]&&this._measurements.fid&&h$(t,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+Vv(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),"fcp"in this._measurements||delete this._measurements.cls,t.setMeasurements(this._measurements),this._tagMetricInfo(t)}}},t.prototype._tagMetricInfo=function(t){this._lcpEntry&&(j_.log("[Measurements] Adding LCP Data"),this._lcpEntry.element&&t.setTag("lcp.element",f_(this._lcpEntry.element)),this._lcpEntry.id&&t.setTag("lcp.id",this._lcpEntry.id),this._lcpEntry.url&&t.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200)),t.setTag("lcp.size",this._lcpEntry.size)),this._clsEntry&&this._clsEntry.sources&&(j_.log("[Measurements] Adding CLS Data"),this._clsEntry.sources.forEach((function(e,n){return t.setTag("cls.source."+(n+1),f_(e.node))})))},t.prototype._trackCLS=function(){var t,e,n,r,o,i,l,s,a=this;t=function(t){var e=t.entries.pop();e&&(j_.log("[Measurements] Adding CLS"),a._measurements.cls={value:t.value},a._clsEntry=e)},r=l$("CLS",0),o=0,i=[],(s=s$("layout-shift",l=function(t){if(t&&!t.hadRecentInput){var e=i[0],l=i[i.length-1];o&&0!==i.length&&t.startTime-l.startTime<1e3&&t.startTime-e.startTime<5e3?(o+=t.value,i.push(t)):(o=t.value,i=[t]),o>r.value&&(r.value=o,r.entries=i,n&&n())}}))&&(n=i$(t,r,e),a$((function(){s.takeRecords().map(l),n(!0)})))},t.prototype._trackNavigator=function(t){var e=f$.navigator;if(e){var n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),g$(n.rtt)&&(this._measurements["connection.rtt"]={value:n.rtt}),g$(n.downlink)&&(this._measurements["connection.downlink"]={value:n.downlink})),g$(e.deviceMemory)&&t.setTag("deviceMemory",String(e.deviceMemory)),g$(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}},t.prototype._trackLCP=function(){var t=this;!function(t,e){var n,r=u$(),o=l$("LCP"),i=function(t){var e=t.startTime;e<r.firstHiddenTime&&(o.value=e,o.entries.push(t)),n&&n()},l=s$("largest-contentful-paint",i);if(l){n=i$(t,o,e);var s=function(){d$[o.id]||(l.takeRecords().map(i),l.disconnect(),d$[o.id]=!0,n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,s,{once:!0,capture:!0})})),a$(s,!0)}}((function(e){var n=e.entries.pop();if(n){var r=Vv(Cy),o=Vv(n.startTime);j_.log("[Measurements] Adding LCP"),t._measurements.lcp={value:e.value},t._measurements["mark.lcp"]={value:r+o},t._lcpEntry=n}}))},t.prototype._trackFID=function(){var t,e,n,r,o,i,l,s=this;t=function(t){var e=t.entries.pop();if(e){var n=Vv(Cy),r=Vv(e.startTime);j_.log("[Measurements] Adding FID"),s._measurements.fid={value:t.value},s._measurements["mark.fid"]={value:n+r}}},r=u$(),o=l$("FID"),(l=s$("first-input",i=function(t){n&&t.startTime<r.firstHiddenTime&&(o.value=t.processingStart-t.startTime,o.entries.push(t),n(!0))}))&&(n=i$(t,o,e),a$((function(){l.takeRecords().map(i),l.disconnect()}),!0))},t}();function m$(t){var e=t.transaction,n=t.entry,r=t.event,o=t.timeOrigin,i=t.eventEnd,l=t.description,s=i?n[i]:n[r+"End"],a=n[r+"Start"];a&&s&&h$(e,{op:"browser",description:null!=l?l:r,startTimestamp:o+Vv(a),endTimestamp:o+Vv(s)})}function h$(t,e){var n=e.startTimestamp,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["startTimestamp"]);return n&&t.startTimestamp>n&&(t.startTimestamp=n),t.startChild(Uv({startTimestamp:n},r))}function g$(t){return"number"==typeof t&&isFinite(t)}var _$={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function y$(t){var e=Uv(Uv({},_$),t),n=e.traceFetch,r=e.traceXHR,o=e.tracingOrigins,i=e.shouldCreateSpanForRequest,l={},s=function(t){if(l[t])return l[t];var e=o;return l[t]=e.some((function(e){return T_(t,e)}))&&!T_(t,"sentry_key"),l[t]},a=s;"function"==typeof i&&(a=function(t){return s(t)&&i(t)});var c={};n&&ly({callback:function(t){!function(t,e,n){if(!zv()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp&&t.fetchData.__span){return void((o=n[t.fetchData.__span])&&(t.response?o.setHttpStatus(t.response.status):t.error&&o.setStatus(Fv.InternalError),o.finish(),delete n[t.fetchData.__span]))}var r=Yv();if(r){var o=r.startChild({data:Uv(Uv({},t.fetchData),{type:"fetch"}),description:t.fetchData.method+" "+t.fetchData.url,op:"http.client"});t.fetchData.__span=o.spanId,n[o.spanId]=o;var i=t.args[0]=t.args[0],l=t.args[1]=t.args[1]||{},s=l.headers;d_(i,Request)&&(s=i.headers),s?"function"==typeof s.append?s.append("sentry-trace",o.toTraceparent()):s=Array.isArray(s)?Gv(s,[["sentry-trace",o.toTraceparent()]]):Uv(Uv({},s),{"sentry-trace":o.toTraceparent()}):s={"sentry-trace":o.toTraceparent()},l.headers=s}}(t,a,c)},type:"fetch"}),r&&ly({callback:function(t){!function(t,e,n){var r,o;if(!zv()||(null===(r=t.xhr)||void 0===r?void 0:r.__sentry_own_request__)||!(null===(o=t.xhr)||void 0===o?void 0:o.__sentry_xhr__)||!e(t.xhr.__sentry_xhr__.url))return;var i=t.xhr.__sentry_xhr__;if(t.endTimestamp&&t.xhr.__sentry_xhr_span_id__){return void((s=n[t.xhr.__sentry_xhr_span_id__])&&(s.setHttpStatus(i.status_code),s.finish(),delete n[t.xhr.__sentry_xhr_span_id__]))}var l=Yv();if(l){var s=l.startChild({data:Uv(Uv({},i.data),{type:"xhr",method:i.method,url:i.url}),description:i.method+" "+i.url,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=s.spanId,n[t.xhr.__sentry_xhr_span_id__]=s,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",s.toTraceparent())}catch(t){}}}(t,a,c)},type:"xhr"})}var v$=I_();var $$=Uv({idleTimeout:1e3,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),v$&&v$.location){var r,o=v$.location.href;e&&(r=t({name:v$.location.pathname,op:"pageload"})),n&&ly({callback:function(e){var n=e.to,i=e.from;void 0===i&&o&&-1!==o.indexOf(n)?o=void 0:i!==n&&(o=void 0,r&&(j_.log("[Tracing] Finishing current transaction with op: "+r.op),r.finish()),r=t({name:v$.location.pathname,op:"navigation"}))},type:"history"})}else j_.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},_$),b$=function(){function t(e){this.name=t.id,this._metrics=new p$,this._emitOptionsWarning=!1;var n=_$.tracingOrigins;e&&e.tracingOrigins&&Array.isArray(e.tracingOrigins)&&0!==e.tracingOrigins.length?n=e.tracingOrigins:this._emitOptionsWarning=!0,this.options=Uv(Uv(Uv({},$$),e),{tracingOrigins:n})}return t.prototype.setupOnce=function(t,e){var n=this;this._getCurrentHub=e,this._emitOptionsWarning&&(j_.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),j_.warn("[Tracing] We added a reasonable default for you: "+_$.tracingOrigins));var r=this.options,o=r.routingInstrumentation,i=r.startTransactionOnLocationChange,l=r.startTransactionOnPageLoad,s=r.markBackgroundTransactions,a=r.traceFetch,c=r.traceXHR,u=r.tracingOrigins,d=r.shouldCreateSpanForRequest;o((function(t){return n._createRouteTransaction(t)}),l,i),s&&(o$&&o$.document?o$.document.addEventListener("visibilitychange",(function(){var t=Yv();o$.document.hidden&&t&&(j_.log("[Tracing] Transaction: "+Fv.Cancelled+" -> since tab moved to the background, op: "+t.op),t.status||t.setStatus(Fv.Cancelled),t.setTag("visibilitychange","document.hidden"),t.finish())})):j_.warn("[Tracing] Could not set up background tab detection due to lack of global document")),y$({traceFetch:a,traceXHR:c,tracingOrigins:u,shouldCreateSpanForRequest:d})},t.prototype._createRouteTransaction=function(t){var e=this;if(this._getCurrentHub){var n=this.options,r=n.beforeNavigate,o=n.idleTimeout,i=n.maxTransactionDuration,l="pageload"===t.op?function(){var t=(e="sentry-trace",n=document.querySelector("meta[name="+e+"]"),n?n.getAttribute("content"):null);var e,n;if(t)return function(t){var e=t.match(Wv);if(e){var n=void 0;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}}(t);return}():void 0,s=Uv(Uv(Uv({},t),l),{trimEnd:!0}),a="function"==typeof r?r(s):s,c=void 0===a?Uv(Uv({},s),{sampled:!1}):a;!1===c.sampled&&j_.log("[Tracing] Will not send "+c.op+" transaction because of beforeNavigate."),j_.log("[Tracing] Starting "+c.op+" transaction on scope");var u=function(t,e,n,r,o){var i,l,s=(null===(i=t.getClient())||void 0===i?void 0:i.getOptions())||{},a=new Qv(e,t,n,r);return(a=n$(a,s,Uv({parentSampled:e.parentSampled,transactionContext:e},o))).sampled&&a.initSpanRecorder(null===(l=s._experiments)||void 0===l?void 0:l.maxSpans),a}(this._getCurrentHub(),c,o,!0,{location:I_().location});return u.registerBeforeFinishCallback((function(t,n){e._metrics.addPerformanceEntries(t),function(t,e,n){var r=n-e.startTimestamp;n&&(r>t||r<0)&&(e.setStatus(Fv.DeadlineExceeded),e.setTag("maxTransactionDurationExceeded","true"))}(1e3*i,t,n)})),u}j_.warn("[Tracing] Did not create "+t.op+" transaction because _getCurrentHub is invalid.")},t.id="BrowserTracing",t}();var w$=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}return t.prototype.setupOnce=function(){this._router?function(t,e){void 0===e&&(e=[]);e.forEach((function(e){return function(t,e){var n=t[e];return t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.call.apply(n,Gv([this],C$(t,e)))},t}(t,e)}))}(this._router,this._methods):j_.error("ExpressIntegration is missing an Express instance")},t.id="Express",t}();function x$(t,e){var n=t.length;switch(n){case 2:return function(n,r){var o=r.__sentry_transaction;if(o){var i=o.startChild({description:t.name,op:"middleware."+e});r.once("finish",(function(){i.finish()}))}return t.call(this,n,r)};case 3:return function(n,r,o){var i,l=null===(i=r.__sentry_transaction)||void 0===i?void 0:i.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=l)||void 0===t||t.finish(),o.call.apply(o,Gv([this],e))}))};case 4:return function(n,r,o,i){var l,s=null===(l=o.__sentry_transaction)||void 0===l?void 0:l.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,o,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=s)||void 0===t||t.finish(),i.call.apply(i,Gv([this],e))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function C$(t,e){return t.map((function(t){return"function"==typeof t?x$(t,e):Array.isArray(t)?t.map((function(t){return"function"==typeof t?x$(t,e):t})):t}))}var k$,E$=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n=C_("pg");n?H_(n.Client.prototype,"query",(function(t){return function(n,r,o){var i,l,s,a=null===(l=null===(i=e().getScope())||void 0===i?void 0:i.getSpan())||void 0===l?void 0:l.startChild({description:"string"==typeof n?n:n.text,op:"db"});if("function"==typeof o)return t.call(this,n,r,(function(t,e){var n;null===(n=a)||void 0===n||n.finish(),o(t,e)}));if("function"==typeof r)return t.call(this,n,(function(t,e){var n;null===(n=a)||void 0===n||n.finish(),r(t,e)}));var c=void 0!==r?t.call(this,n,r):t.call(this,n);return u_(c)?c.then((function(t){var e;return null===(e=a)||void 0===e||e.finish(),t})):(null===(s=a)||void 0===s||s.finish(),c)}})):j_.error("Postgres Integration was unable to require `pg` package.")},t.id="Postgres",t}(),T$=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n=C_("mysql/lib/Connection.js");n?H_(n,"createQuery",(function(t){return function(n,r,o){var i,l,s=null===(l=null===(i=e().getScope())||void 0===i?void 0:i.getSpan())||void 0===l?void 0:l.startChild({description:"string"==typeof n?n:n.sql,op:"db"});return"function"==typeof o?t.call(this,n,r,(function(t,e,n){var r;null===(r=s)||void 0===r||r.finish(),o(t,e,n)})):"function"==typeof r?t.call(this,n,(function(t,e,n){var o;null===(o=s)||void 0===o||o.finish(),r(t,e,n)})):t.call(this,n,r,o)}})):j_.error("Mysql Integration was unable to require `mysql` package.")},t.id="Mysql",t}(),S$=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],I$={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},O$=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._operations=Array.isArray(e.operations)?e.operations:S$,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}return t.prototype.setupOnce=function(t,e){var n=this._useMongoose?"mongoose":"mongodb",r=C_(n);r?this._instrumentOperations(r.Collection,this._operations,e):j_.error("Mongo Integration was unable to require `"+n+"` package.")},t.prototype._instrumentOperations=function(t,e,n){var r=this;e.forEach((function(e){return r._patchOperation(t,e,n)}))},t.prototype._patchOperation=function(t,e,n){if(e in t.prototype){var r=this._getSpanContextFromOperationArguments.bind(this);H_(t.prototype,e,(function(t){return function(){for(var o,i,l,s,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u=a[a.length-1],d=n().getScope(),f=null===(o=d)||void 0===o?void 0:o.getSpan();if("function"!=typeof u||"mapReduce"===e&&2===a.length){var p=null===(i=f)||void 0===i?void 0:i.startChild(r(this,e,a)),m=t.call.apply(t,Gv([this],a));return u_(m)?m.then((function(t){var e;return null===(e=p)||void 0===e||e.finish(),t})):(null===(l=p)||void 0===l||l.finish(),m)}var h=null===(s=f)||void 0===s?void 0:s.startChild(r(this,e,a.slice(0,-1)));return t.call.apply(t,Gv([this],a.slice(0,-1),[function(t,e){var n;null===(n=h)||void 0===n||n.finish(),u(t,e)}]))}}))}},t.prototype._getSpanContextFromOperationArguments=function(t,e,n){var r={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},o={op:"db",description:e,data:r},i=I$[e],l=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!i||!l)return o;try{if("mapReduce"===e){var s=Hv(n,2),a=s[0],c=s[1];r[i[0]]="string"==typeof a?a:a.name||"<anonymous>",r[i[1]]="string"==typeof c?c:c.name||"<anonymous>"}else for(var u=0;u<i.length;u++)r[i[u]]=JSON.stringify(n[u])}catch(t){}return o},t.id="Mongo",t}(),R$=Uv(Uv({},Object.freeze({__proto__:null,Express:w$,Postgres:E$,Mysql:T$,Mongo:O$})),{BrowserTracing:b$});function A$(){new jg({target:document.body})}(k$=Oy()).__SENTRY__&&(k$.__SENTRY__.extensions=k$.__SENTRY__.extensions||{},k$.__SENTRY__.extensions.startTransaction||(k$.__SENTRY__.extensions.startTransaction=r$),k$.__SENTRY__.extensions.traceHeaders||(k$.__SENTRY__.extensions.traceHeaders=e$)),w_()&&function(){var t=Oy();if(t.__SENTRY__){var e={mongodb:function(){return new(x_(module,"./integrations/mongo").Mongo)},mongoose:function(){return new(x_(module,"./integrations/mongo").Mongo)({mongoose:!0})},mysql:function(){return new(x_(module,"./integrations/mysql").Mysql)},pg:function(){return new(x_(module,"./integrations/postgres").Postgres)}},n=Object.keys(e).filter((function(t){return!!C_(t)})).map((function(t){try{return e[t]()}catch(t){return}})).filter((function(t){return t}));n.length>0&&(t.__SENTRY__.integrations=Gv(t.__SENTRY__.integrations||[],n))}}(),ly({callback:Jv,type:"error"}),ly({callback:Jv,type:"unhandledrejection"}),"localhost"!==location.hostname&&function(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=Lv),void 0===t.release){var e=I_();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),function(t,e){var n;!0===e.debug&&j_.enable();var r=Ay();null===(n=r.getScope())||void 0===n||n.update(e.initialScope);var o=new t(e);r.bindClient(o)}(qv,t),t.autoSessionTracking&&function(){if(void 0===I_().document)return void j_.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");var t=Ay();if("function"!=typeof t.startSession||"function"!=typeof t.captureSession)return;t.startSession({ignoreDuration:!0}),t.captureSession(),ly({callback:function(e){var n=e.from,r=e.to;void 0!==n&&n!==r&&(t.startSession({ignoreDuration:!0}),t.captureSession())},type:"history"})}()}({dsn:"https://e7e132477a2844118b8f6d045a507e10@o318291.ingest.sentry.io/5665093",integrations:[new R$.BrowserTracing],tracesSampleRate:.2}),"serviceWorker"in navigator?(navigator.serviceWorker.register("service-worker.js").catch((t=>{console.log("ServiceWorker registration failed: ",t)})),navigator.serviceWorker.ready.then(A$,A$)):A$()}();
//# sourceMappingURL=bundle.js.map
